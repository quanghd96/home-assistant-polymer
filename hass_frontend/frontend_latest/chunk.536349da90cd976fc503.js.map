{"version":3,"sources":["webpack:///./src/mixins/events-mixin.js","webpack:///./node_modules/@polymer/iron-input/iron-input.js","webpack:///./node_modules/@polymer/paper-item/paper-item-behavior.js","webpack:///./node_modules/@polymer/neon-animation/neon-animatable-behavior.js","webpack:///./node_modules/@polymer/neon-animation/neon-animation-runner-behavior.js","webpack:///./node_modules/@polymer/iron-checked-element-behavior/iron-checked-element-behavior.js","webpack:///./node_modules/@polymer/paper-behaviors/paper-checked-element-behavior.js","webpack:///./node_modules/@polymer/paper-item/paper-item.js","webpack:///./node_modules/@polymer/paper-item/paper-item-shared-styles.js","webpack:///./node_modules/@polymer/paper-listbox/paper-listbox.js","webpack:///./node_modules/@polymer/iron-dropdown/iron-dropdown.js","webpack:///./node_modules/@polymer/neon-animation/neon-animation-behavior.js","webpack:///./node_modules/@polymer/neon-animation/animations/fade-in-animation.js","webpack:///./node_modules/@polymer/neon-animation/animations/fade-out-animation.js","webpack:///./node_modules/@polymer/paper-menu-button/paper-menu-button-animations.js","webpack:///./node_modules/@polymer/paper-menu-button/paper-menu-button.js","webpack:///./node_modules/@polymer/paper-dropdown-menu/paper-dropdown-menu-icons.js","webpack:///./node_modules/@polymer/paper-dropdown-menu/paper-dropdown-menu-shared-styles.js","webpack:///./src/mixins/localize-mixin.js","webpack:///./src/components/ha-card.ts","webpack:///./src/common/entity/compute_state_name.ts","webpack:///./src/common/entity/compute_state_domain.ts","webpack:///./src/common/entity/domain_icon.ts","webpack:///./src/components/ha-icon.ts","webpack:///./node_modules/@polymer/paper-item/paper-item-body.js","webpack:///../src/vnode.js","webpack:///../src/options.js","webpack:///../src/h.js","webpack:///../src/util.js","webpack:///../src/clone-element.js","webpack:///../src/constants.js","webpack:///../src/render-queue.js","webpack:///../src/vdom/index.js","webpack:///../src/dom/index.js","webpack:///../src/vdom/diff.js","webpack:///../src/vdom/component.js","webpack:///../src/vdom/component-recycler.js","webpack:///../src/component.js","webpack:///./src/components/entity/state-badge.ts","webpack:///./node_modules/@polymer/paper-item/paper-icon-item.js","webpack:///./src/common/entity/compute_object_id.ts","webpack:///./src/components/entity/ha-entity-picker.ts","webpack:///./src/common/entity/sensor_icon.ts","webpack:///./src/common/entity/state_icon.ts","webpack:///./src/common/entity/binary_sensor_icon.ts","webpack:///./src/common/entity/cover_icon.ts","webpack:///./src/common/entity/input_dateteime_icon.ts","webpack:///./src/panels/config/ha-config-section.js","webpack:///./node_modules/@polymer/app-layout/app-header-layout/app-header-layout.js","webpack:///./src/common/preact/event.ts","webpack:///./node_modules/@polymer/paper-styles/element-styles/paper-material-styles.js","webpack:///./node_modules/@polymer/iron-autogrow-textarea/iron-autogrow-textarea.js","webpack:///./node_modules/@polymer/paper-input/paper-textarea.js","webpack:///./node_modules/@polymer/app-layout/app-header/app-header.js","webpack:///./node_modules/@vaadin/vaadin-overlay/theme/lumo/vaadin-overlay-styles.js","webpack:///./node_modules/@vaadin/vaadin-combo-box/theme/lumo/vaadin-combo-box-dropdown-styles.js","webpack:///./node_modules/@vaadin/vaadin-item/theme/lumo/vaadin-item-styles.js","webpack:///./node_modules/@vaadin/vaadin-item/src/vaadin-item-mixin.js","webpack:///./node_modules/@vaadin/vaadin-item/src/vaadin-item.js","webpack:///./node_modules/@vaadin/vaadin-combo-box/theme/lumo/vaadin-combo-box-item-styles.js","webpack:///./node_modules/@vaadin/vaadin-combo-box/src/vaadin-combo-box-placeholder.js","webpack:///./node_modules/@vaadin/vaadin-combo-box/src/vaadin-combo-box-mixin.js","webpack:///./node_modules/@vaadin/vaadin-combo-box/src/vaadin-combo-box-data-provider-mixin.js","webpack:///./node_modules/@polymer/iron-list/iron-list.js","webpack:///./node_modules/@vaadin/vaadin-combo-box/src/vaadin-combo-box-item.js","webpack:///./node_modules/@vaadin/vaadin-combo-box/src/vaadin-combo-box-dropdown.js","webpack:///./node_modules/@vaadin/vaadin-combo-box/src/vaadin-combo-box-dropdown-wrapper.js","webpack:///./node_modules/@vaadin/vaadin-combo-box/src/vaadin-combo-box-light.js","webpack:///./node_modules/@polymer/paper-dropdown-menu/paper-dropdown-menu-light.js","webpack:///./src/mixins/navigate-mixin.js","webpack:///./node_modules/@polymer/paper-behaviors/paper-button-behavior.js","webpack:///./node_modules/@polymer/paper-fab/paper-fab.js","webpack:///./node_modules/@polymer/paper-radio-button/paper-radio-button.js","webpack:///./node_modules/@polymer/iron-menu-behavior/iron-menubar-behavior.js","webpack:///./node_modules/@polymer/app-route/app-route.js","webpack:///./src/components/ha-textarea.js","webpack:///./node_modules/@polymer/iron-scroll-target-behavior/iron-scroll-target-behavior.js","webpack:///./src/layouts/ha-app-layout.js","webpack:///./node_modules/@polymer/paper-radio-group/paper-radio-group.js","webpack:///./node_modules/@polymer/app-layout/app-scroll-effects/app-scroll-effects-behavior.js","webpack:///./node_modules/@polymer/app-layout/helpers/helpers.js","webpack:///./src/components/ha-combo-box.js","webpack:///./src/components/ha-service-picker.js","webpack:///./src/panels/config/js/json_textarea.js","webpack:///./src/panels/config/js/condition/state.js","webpack:///./src/common/entity/has_location.ts","webpack:///./src/panels/config/js/condition/numeric_state.js","webpack:///./src/panels/config/js/condition/sun.js","webpack:///./src/panels/config/js/condition/template.js","webpack:///./src/panels/config/js/condition/time.js","webpack:///./src/panels/config/js/condition/zone.js","webpack:///./src/panels/config/js/condition/condition_edit.js","webpack:///./src/common/preact/unmount.ts","webpack:///./src/panels/config/js/script/call_service.js","webpack:///./src/panels/config/js/script/condition.js","webpack:///./src/panels/config/js/script/delay.js","webpack:///./src/panels/config/js/script/wait.js","webpack:///./src/panels/config/js/script/action_edit.js","webpack:///./src/panels/config/js/script/event.tsx","webpack:///./src/panels/config/js/script/action_row.js","webpack:///./src/panels/config/js/script/index.js","webpack:///./src/panels/config/js/script.js","webpack:///./src/data/script.ts","webpack:///./src/panels/config/script/ha-script-editor.js","webpack:///./src/panels/config/script/ha-script-picker.ts","webpack:///./src/panels/config/script/ha-config-script.js","webpack:///./node_modules/@polymer/paper-input/paper-input.js","webpack:///./node_modules/@polymer/iron-a11y-announcer/iron-a11y-announcer.js"],"names":["__webpack_require__","d","__webpack_exports__","EventsMixin","_polymer_polymer_lib_utils_mixin__WEBPACK_IMPORTED_MODULE_0__","_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_1__","dedupingMixin","superClass","fire","type","detail","options","fireEvent","node","this","_polymer_iron_a11y_announcer_iron_a11y_announcer_js__WEBPACK_IMPORTED_MODULE_1__","_polymer_iron_validatable_behavior_iron_validatable_behavior_js__WEBPACK_IMPORTED_MODULE_2__","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_3__","_polymer_polymer_lib_legacy_polymer_dom_js__WEBPACK_IMPORTED_MODULE_4__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_5__","Polymer","_template","html","is","behaviors","IronValidatableBehavior","properties","bindValue","String","value","computed","allowedPattern","autoValidate","Boolean","_inputElement","Object","observers","listeners","input","keypress","created","IronA11yAnnouncer","requestAvailability","_previousValidInput","_patternAlreadyChecked","attached","_observer","dom","observeNodes","info","_initSlottedInput","bind","detached","unobserveNodes","inputElement","getEffectiveChildren","_patternRegExp","pattern","RegExp","_bindValueChanged","undefined","validate","_onInput","_checkPatternValidity","_announceInvalidCharacter","_isPrintable","event","anyNonPrintable","keyCode","mozNonPrintable","charCode","_onKeypress","regexp","metaKey","ctrlKey","altKey","thisChar","fromCharCode","test","preventDefault","i","length","invalid","valid","checkValidity","required","hasValidator","call","message","text","_computeValue","PaperItemBehavior","_polymer_iron_behaviors_iron_button_state_js__WEBPACK_IMPORTED_MODULE_1__","_polymer_iron_behaviors_iron_control_state_js__WEBPACK_IMPORTED_MODULE_2__","IronButtonState","IronControlState","hostAttributes","role","tabindex","NeonAnimatableBehavior","animationConfig","entryAnimation","observer","exitAnimation","_entryAnimationChanged","name","_exitAnimationChanged","_copyProperties","config1","config2","property","_cloneConfig","config","clone","isClone","_getAnimationConfigRecursive","map","allConfigs","thisConfig","_warn","_logf","Array","isArray","index","animatable","id","cachedConfig","push","getAnimationConfig","key","NeonAnimationRunnerBehavior","_configureAnimations","configs","results","resultsToPlay","neonAnimation","document","createElement","isNeonAnimation","result","configure","console","warn","cancel","timeline","play","e","animation","_shouldComplete","activeEntries","finished","playState","_complete","complete","playAnimation","cookie","_active","onfinish","bubbles","cancelAnimation","k","entries","j","IronCheckedElementBehaviorImpl","checked","reflectToAttribute","notify","toggles","_hasIronCheckedElementBehavior","_getValidity","_value","disabled","_requiredChanged","setAttribute","removeAttribute","_checkedChanged","active","_valueChanged","IronCheckedElementBehavior","IronFormElementBehavior","PaperCheckedElementBehavior","PaperCheckedElementBehaviorImpl","hasRipple","_ripple","_buttonStateChanged","PaperRippleBehavior","isAttached","PaperInkyFocusBehavior","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_4__","_paper_item_behavior_js__WEBPACK_IMPORTED_MODULE_5__","$_documentContainer","innerHTML","head","appendChild","content","_polymer_iron_menu_behavior_iron_menu_behavior_js__WEBPACK_IMPORTED_MODULE_2__","IronMenuBehavior","IronA11yKeysBehavior","IronOverlayBehavior","horizontalAlign","verticalAlign","openAnimationConfig","closeAnimationConfig","focusTarget","noAnimations","allowOutsideScroll","neon-animation-finish","containedElement","nodes","$","getDistributedNodes","l","nodeType","Node","ELEMENT_NODE","ready","scrollAction","_readied","sizingTarget","_openedChanged","opened","_updateAnimationConfig","IronOverlayBehaviorImpl","apply","arguments","_renderOpened","open","contentWrapper","classList","add","_renderClosed","close","_onNeonAnimationFinish","remove","_finishRenderOpened","_finishRenderClosed","animationNode","animations","concat","_updateOverlayPosition","notifyResize","_allowOutsideScrollChanged","_applyFocus","noAutoFocus","focus","NeonAnimationBehavior","animationTiming","duration","easing","fill","body","animate","timingFromConfig","timing","setPrefixedProperty","prefix","prefixes","transform","transformOrigin","style","_effect","KeyframeEffect","opacity","height","getBoundingClientRect","width","ANIMATION_CUBIC_BEZIER","MAX_ANIMATION_TIME_MS","PaperMenuButton","dynamicAlign","horizontalOffset","Number","verticalOffset","noOverlap","ignoreSelect","closeOnActivate","delay","restoreFocusOnClose","_dropdownContent","aria-haspopup","iron-activate","iron-select","contentElement","toggle","dropdown","_onIronSelect","_onIronActivate","oldOpened","_disabledChanged","__onIronOverlayCanceled","uiEvent","trigger","path","indexOf","keys","forEach","hass","localize","Function","__computeLocalize","HaCard","_LitElement","[object Object]","args","super","_initialize","css","header","LitElement","customElements","define","_compute_object_id__WEBPACK_IMPORTED_MODULE_0__","stateObj","attributes","friendly_name","computeObjectId","entity_id","replace","computeStateDomain","_compute_domain__WEBPACK_IMPORTED_MODULE_0__","computeDomain","domainIcon","_const__WEBPACK_IMPORTED_MODULE_0__","fixedIcons","alert","alexa","automation","calendar","camera","climate","configurator","conversation","device_tracker","fan","google_assistant","group","history_graph","homeassistant","homekit","image_processing","input_boolean","input_datetime","input_number","input_select","input_text","light","mailbox","person","plant","proximity","remote","scene","script","sensor","simple_alarm","sun","switch","timer","updater","vacuum","water_heater","weather","weblink","domain","state","DEFAULT_DOMAIN_ICON","HaIcon","ironIconClass","get","loaded","_iconsetName","listen","eventName","methodName","then","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_4__","h","cloneElement","Component","render","VNode","stack","EMPTY_CHILDREN","nodeName","lastSimple","child","simple","children","pop","p","extend","obj","props","applyRef","ref","defer","Promise","resolve","setTimeout","vnode","slice","IS_NON_DIMENSIONAL","SYNC_RENDER","enqueueRender","component","debounceRendering","rerender","items","isSameNodeType","normalizedNodeName","toLowerCase","getNodeProps","_componentConstructor","isNamedNode","defaultProps","parentNode","createElementNS","isSvg","removeNode","cssText","old","__html","useCapture","addEventListener","eventProxy","_listeners","ns","setAttributeNS","className","mounts","hydrating","shift","diffLevel","componentDidMount","c","context","mountAll","parent","componentRoot","isSvgMode","flushMounts","ownerSVGElement","ret","out","prevSvgMode","splitText","_component","createTextNode","replaceChild","vnodeName","previousProps","isDirectOwner","_renderCallbacks","isOwner","isChild","originalComponent","oldDom","base","createComponent","ATTR_KEY","buildComponentFromVNode","firstChild","a","nodeValue","vchildren","fc","nextSibling","f","vchild","childrenLen","min","len","originalChildren","vlen","_child","__key","isHydrating","trim","keyedLen","keyed","recollectNodeTree","innerDiffNode","dangerouslySetInnerHTML","next","previousSibling","attrs","unmountOnly","inst","recyclerComponents","doRender","Ctor","nextBase","splice","constructor","setComponentProps","componentWillMount","componentWillReceiveProps","prevProps","prevContext","renderMode","_disable","__ref","syncComponentUpdates","rendered","cbase","prevState","isUpdate","previousContext","getDerivedStateFromProps","initialBase","snapshot","previousState","componentWillUpdate","FORCE_RENDER","_dirty","getChildContext","getSnapshotBeforeUpdate","initialChildComponent","childComponent","childProps","diff","toUnmount","baseParent","componentRef","t","componentDidUpdate","beforeUnmount","componentWillUnmount","inner","removeChildren","callback","merge","StateBadge","query","overrideIcon","stateIcon","changedProps","has","iconStyle","color","filter","hostStyle","backgroundImage","entity_picture","display","hs_color","hue","sat","brightness","errorMessage","assign","_icon","_paper_item_behavior_js__WEBPACK_IMPORTED_MODULE_6__","entityId","substr","HaEntityPicker","attribute","memoizeOne","domainFilter","entityFilter","states","entityIds","eid","sort","_get","_getPrototypeOf","prototype","_opened","_hass","_getStates","allowCustomEntity","root","_owner","model","firstElementChild","querySelector","item","textContent","computeStateName","autofocus","label","ev","fixedDeviceClassIcons","humidity","illuminance","temperature","pressure","power","signal_strength","domainIcons","binary_sensor","activated","device_class","cover","dclass","battery","isNaN","batteryRound","Math","round","unit","unit_of_measurement","UNIT_C","UNIT_F","has_date","has_time","icon","_polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_0__","_polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_1__","PolymerElement","template","narrow","isWide","computeContentClasses","classes","computeClasses","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_2__","_polymer_polymer_lib_legacy_polymer_dom_js__WEBPACK_IMPORTED_MODULE_3__","_app_layout_behavior_app_layout_behavior_js__WEBPACK_IMPORTED_MODULE_5__","AppLayoutBehavior","hasScrollingRegion","headerSlot","_updateLayoutStates","wrapper","scrollTarget","contentContainer","ownerDocument","documentElement","headerHeight","offsetHeight","left","right","requestAnimationFrame","rect","rightOffset","clientWidth","containerStyle","fixed","condenses","marginTop","paddingTop","onChangeEvent","prop","origData","target","data","onChange","rows","maxRows","autocomplete","inputmode","placeholder","readonly","minlength","maxlength","textarea","selectionStart","selectionEnd","navigator","userAgent","match","marginLeft","validity","mirror","_valueForMirror","eventPath","_constrain","tokens","_tokens","join","split","_updateCached","PaperInputBehavior","_ariaLabelledBy","_ariaDescribedBy","start","end","_ariaLabelledByChanged","ariaLabelledBy","_focusableElement","_ariaDescribedByChanged","ariaDescribedBy","_app_scroll_effects_app_scroll_effects_behavior_js__WEBPACK_IMPORTED_MODULE_6__","AppScrollEffectsBehavior","reveals","shadow","_height","_dHeight","_stickyElTop","_stickyElRef","_top","_progress","_wasScrollingDown","_initScrollTop","_initTimestamp","_lastTimestamp","_lastScrollTop","_maxHeaderTop","_stickyEl","slot","hasAttribute","_configChanged","resetLayout","_notifyLayoutChanged","offsetWidth","scrollTop","_clampedScrollTop","firstSetup","currentDisabled","_updateScrollState","_mayMove","offsetTop","_setUpEffect","_layoutIfDirty","forceUpdate","progress","top","lastTop","maxHeaderTop","dScrollTop","absDScrollTop","abs","isScrollingDown","now","performance","_clamp","max","transitionDuration","scrollVelocity","_runEffects","_transformHeader","willCondense","isOnScreen","isContentBelow","y","translate3d","v","_ensureBgContainers","_bgContainer","_bgRear","_bgFront","insertBefore","_getDOMRef","getScrollState","ItemMixin","_hasVaadinItemMixin","selected","attrValue","getAttribute","_setFocused","_setActive","_mousedown","mouseUpListener","removeEventListener","_onKeydown","_onKeyup","disconnectedCallback","_selectedChanged","blur","focused","defaultPrevented","click","ItemElement","ThemableMixin","version","ComboBoxPlaceholder","toString","ComboBoxMixin","subclass","renderer","allowCustomValue","filteredItems","_lastCommittedValue","loading","_focusedIndex","selectedItem","itemLabelPath","itemValuePath","itemIdPath","_toggleElement","_clearElement","_inputElementValue","_closeOnBlurIsPrevented","_previousDocumentPointerEvents","_itemTemplate","overlay","relatedTarget","composedPath","_overlaySelectedItemChanged","_onClosed","_onOpened","_onKeyDown","_onClick","_onOverlayTouchAction","_clear","FlattenedNodesObserver","_setTemplateFromNodes","addedNodes","_selector","querySelectorAll","_render","localName","_removeNewRendererOrTemplate","oldTemplate","oldRenderer","_templateOrRendererChanged","_oldTemplate","_oldRenderer","Error","_openedWithFocusRing","focusElement","touchDevice","_isEventKey","_onArrowDown","_onArrowUp","_onEnter","_onEscape","keyboardEventMatchesKeys","_getItemLabel","getItemLabel","_getItemValue","_items","_prefillFocusedItemLabel","_focusedItem","_markAllSelectionRange","_setSelectionRange","_nativeInput","setSelectionRange","ignore","_clearSelectionRange","pos","_stopPropagation","_revertInputValue","_toggleElementChanged","toggleElement","_detectAndDispatchChange","_revertInputValueToValue","flush","ensureItemsRendered","toggleScrollListener","updateViewportBoundaries","_increasePoolIfNeeded","_resizeDropdown","window","adjustScrollPosition","focusedItem","CustomEvent","composed","cancelable","dispatchEvent","customValue","_selectItemForValue","dataProvider","_propertyForValue","_inputValueChanged","_filterFromInput","_filterChanged","_itemLabelPathChanged","oldItemLabelPath","error","_filterItems","_filteredItemsChanged","_loadingChanged","_updateHasValue","hasValue","_selectedItemChanged","_selectedItem","oldVal","_isValidValue","_itemsChanged","oldItems","_ensureItemsOrDataProvider","_itemsOrPathsChanged","valueIndex","_indexOfValue","_setOverlayItems","indexOfLabel","_repositionOverlay","arr","previouslySelectedItem","set","stopPropagation","_instanceProps","_ensureTemplatized","_TemplateClass","tpl","_getRootTemplate","templatize","instanceProps","forwardHostProp","_itemTemplateInstance","notifyPath","elem","tagName","_preventInputBlur","_preventDefault","_restoreInputBlur","ComboBoxDataProviderMixin","pageSize","size","_pendingRequests","__placeHolder","_dataProviderClearFilter","clearCache","page","_getPageForIndex","_shouldLoadPage","_loadPage","_dataProviderFilterChanged","_ensureFirstPage","_forceNextRequest","loadedItem","params","floor","_sizeChanged","_pageSizeChanged","oldPageSize","_dataProviderChanged","oldDataProvider","restoreOldValueCallback","_warnDataProviderValue","IOS","IOS_TOUCH_SCROLLING","as","indexAs","selectedAs","grid","selectionEnabled","selectedItems","multiSelection","scrollOffset","Templatizer","IronResizableBehavior","IronScrollTargetBehavior","OptionalMutableDataBehavior","_ratio","_scrollerPaddingTop","_scrollPosition","_physicalSize","_physicalAverage","_physicalAverageCount","_physicalTop","_virtualCount","_estScrollHeight","_scrollHeight","_viewportHeight","_viewportWidth","_physicalItems","_physicalSizes","_firstVisibleIndexVal","_lastVisibleIndexVal","_maxPages","_focusedVirtualIndex","_focusedPhysicalIndex","_offscreenFocusedItem","_focusBackfillItem","_itemsPerRow","_itemWidth","_rowHeight","_templateCost","_parentModel","_physicalBottom","_scrollBottom","_virtualEnd","_virtualStart","_physicalCount","_hiddenContentSize","_physicalRows","_itemsParent","_userTemplate","_maxScrollTop","_scrollOffset","_maxVirtualStart","virtualCount","_convertIndexToCompleteRow","val","_virtualStartVal","_physicalStart","_physicalStartVal","_physicalEnd","_physicalCountVal","_optPhysicalSize","Infinity","_isVisible","firstVisibleIndex","idx","physicalOffset","_iterateItems","pidx","vidx","_getPhysicalSizeIncrement","lastVisibleIndex","_estRowsInView","_defaultScrollTarget","_virtualRowCount","ceil","_didFocus","_debounce","animationFrame","unlisten","_setOverflow","webkitOverflowScrolling","overflowY","styles","getComputedStyle","parseInt","_isRTL","direction","_scrollTargetHeight","_updateGridMetrics","_scrollHandler","_scrollTop","delta","idxAdjustment","_update","reusables","_getReusables","physicalTop","indexes","microTask","fromTop","ith","offsetContent","physicalItemHeight","idxs","protectedOffsetContent","virtualStart","virtualEnd","physicalCount","bottom","scrollBottom","itemSet","movingUp","_manageFocus","_assignModels","_updateMetrics","_positionItems","_updateScrollerSize","_createPool","physicalItems","stamp","_isClientFull","count","nextPhysicalCount","correction","nextIncrease","ts","_isIndexRendered","_getPhysicalIndex","idlePeriod","ctor","queryEffectiveChildren","tabIndex","mutableData","_gridChanged","newGrid","oldGrid","change","_physicalIndexForKey","_resetScrollPosition","_removeFocusedItem","_adjustVirtualIndex","indexSplices","some","addedCount","removed","activeElement","_getActiveElement","contains","affectedIndexRendered","_forwardItemPath","isIndexRendered","dot","offscreenInstance","modelForElement","substring","_setPendingPropertyOrPath","_flushProperties","splices","_removeItem","selector","deselect","fn","rtn","_computeVidx","el","__key__","_forwardProperty","isSelected","newPhysicalSize","oldPhysicalSize","prevAvgCount","prevPhysicalAvg","_adjustScrollPosition","totalItemWidth","rowOffset","modulus","x","_shouldRenderNextRow","deltaHeight","scrollToItem","scrollToIndex","currentTopItem","currentVirtualItem","targetOffsetTop","hiddenContentSize","_resetAverage","_resizeHandler","selectItem","selectIndex","clearSelection","updateSizeForIndex","deselectItem","deselectIndex","toggleSelectionForItem","toggleSelectionForIndex","isIndexSelected","_selectionEnabledChanged","_selectionHandler","modelTabIndex","activeElTabIndex","activeEl","physicalItem","_multiSelectionChanged","multi","updateSizeForItem","fidx","_restoreFocusedItem","_createFocusBackfillItem","_isIndexVisible","focusItem","_focusPhysicalItem","focusable","removeChild","fpidx","onScreenItem","onScreenInstance","offScreenInstance","targetModel","focusedModel","hasOffscreenFocusedItem","_keydownHandler","cb","asyncModule","_debouncers","Debouncer","debounce","enqueueDebouncer","_setPendingProperty","_forwardHostPropV2","_notifyInstancePropV2","matches","translate","_getStampedChildren","_forwardInstancePath","_forwardParentPath","_forwardParentProp","itemsHost","domHost","ComboBoxItemElement","connectedCallback","comboBoxOverlay","getRootNode","host","__dataHost","_comboBox","_rendererOrItemChanged","_updateLabel","_updateTemplateInstanceVariable","variable","ComboBoxOverlayElement","OverlayElement","loader","shadowRoot","ComboBoxDropdownElement","DisableUpgradeMixin","mixinBehaviors","positionTarget","alignedAbove","theme","_boundSetPosition","_setPosition","_boundOutsideClickListener","_outsideClickListener","oldValue","position","_isPositionFixed","element","offsetParent","_getOffsetParent","assignedSlot","parentElement","_verticalOffset","overlayRect","targetRect","_shouldAlignAbove","innerHeight","_translateX","_translateY","_devicePixelRatio","devicePixelRatio","justifyContent","TOUCH_DEVICE","createEvent","ComboBoxDropdownWrapperElement","_itemLabelPath","_itemValuePath","_itemIdPath","_fireTouchAction","sourceEvent","_getItems","_initDropdown","_templateChanged","_scroller","_selectorChanged","_patchWheelOverScrolling","_setOverlayHeight","maxHeight","ShadyCSS","getComputedStyleValue","getPropertyValue","_maxOverlayHeight","scrollHeight","_getFocusedItem","focusedIndex","_isItemSelected","_onItemClick","__requestItemByIndex","_isItemFocused","itemIndex","_getAriaSelected","_getAriaRole","_focusedIndexChanged","_scrollIntoView","visibleItemsCount","_visibleItemsCount","targetIndex","physicalItemRect","scrollerRect","scrollTopAdjust","_viewportTotalPaddingBottom","scroller","scrolledToTop","scrolledToBottom","clientHeight","deltaY","_cachedViewportTotalPaddingBottom","itemsStyle","paddingBottom","borderBottomWidth","reduce","sum","flushDebouncer","_selectItem","_hidden","itemsChange","ComboBoxLightElement","ThemePropertyMixin","attrForValue","Element","readOnly","_boundInputValueChanged","_setInputElement","dashToCamelCase","_polymer_iron_behaviors_iron_button_state_js__WEBPACK_IMPORTED_MODULE_7__","_polymer_iron_behaviors_iron_control_state_js__WEBPACK_IMPORTED_MODULE_8__","_polymer_iron_form_element_behavior_iron_form_element_behavior_js__WEBPACK_IMPORTED_MODULE_9__","_polymer_iron_validatable_behavior_iron_validatable_behavior_js__WEBPACK_IMPORTED_MODULE_10__","_polymer_paper_behaviors_paper_ripple_behavior_js__WEBPACK_IMPORTED_MODULE_11__","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_12__","_polymer_polymer_lib_legacy_polymer_dom_js__WEBPACK_IMPORTED_MODULE_13__","_polymer_polymer_lib_utils_gestures_js__WEBPACK_IMPORTED_MODULE_14__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_15__","selectedItemLabel","noLabelFloat","alwaysFloatLabel","hasContent","tap","keyBindings","up down","esc","aria-autocomplete","_setSelectedItem","menuButton","_onIronDeselect","_onTap","gestures","_setSelectedItemLabel","_computeMenuVerticalOffset","opt_verticalOffset","openState","_computeLabelClass","cls","_setHasContent","_common_navigate__WEBPACK_IMPORTED_MODULE_1__","navigate","PaperButtonBehaviorImpl","elevation","animated","_calculateElevation","pressed","receivedFocusFromKeyboard","_setElevation","_computeKeyboardClass","toggleClass","_spaceKeyDownHandler","IronButtonStateImpl","getRipple","ripples","uiDownAction","_spaceKeyUpHandler","uiUpAction","PaperButtonBehavior","src","mini","_labelChanged","_computeIsIconFab","_polymer_paper_behaviors_paper_checked_element_behavior_js__WEBPACK_IMPORTED_MODULE_3__","_polymer_polymer_lib_utils_render_status_js__WEBPACK_IMPORTED_MODULE_6__","aria-checked","ariaActiveAttribute","_rippleContainer","radioContainer","afterNextRender","parseFloat","defaultInkSize","updateStyles","--paper-radio-button-ink-size","IronMenubarBehaviorImpl","IronMenubarBehavior","_iron_menu_behavior_js__WEBPACK_IMPORTED_MODULE_1__","_onUpKey","keyboardEvent","_onDownKey","_onLeftKey","_focusNext","_focusPrevious","_onRightKey","_focusWithKeyboardEvent","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_1__","route","autoActivate","_queryParamsUpdating","queryParams","tail","__queryParams","_matched","linkPaths","__routeQueryParamsChanged","copyOfQueryParams","anythingChanged","__tailQueryParamsChanged","__queryParamsChanged","changes","__resetProperties","__tryToMatch","remainingPieces","patternPieces","matched","namedMatches","patternPiece","pathPiece","charAt","propertyUpdates","tailPrefix","tailPath","_dataInUrl","setProperties","__setMulti","__tailPathChanged","newPath","__updatePathOnDataChange","__getLink","overrideValues","values","interp","setObj","_propertySetter","_pathEffector","_notifyChange","_polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_1__","_polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_2__","_polymer_polymer_lib_legacy_polymer_dom_js__WEBPACK_IMPORTED_MODULE_1__","HTMLElement","_shouldHaveListener","_scrollTargetChanged","_oldScrollTarget","_toggleScrollListener","_doc","_isValidScrollTarget","pageYOffset","_scrollLeft","pageXOffset","scrollLeft","scrollTo","scroll","leftOrOptions","_scrollTargetWidth","innerWidth","yes","eventTarget","_boundScrollHandler","_polymer_iron_menu_behavior_iron_menubar_behavior_js__WEBPACK_IMPORTED_MODULE_3__","_polymer_iron_selector_iron_selectable_js__WEBPACK_IMPORTED_MODULE_4__","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_5__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_6__","attrForSelected","selectedAttribute","selectable","allowEmptySelection","select","newItem","_valueToItem","oldItem","IronSelectableBehavior","_activateFocusedItem","_itemActivate","_valueForItem","_polymer_iron_scroll_target_behavior_iron_scroll_target_behavior_js__WEBPACK_IMPORTED_MODULE_1__","_helpers_helpers_js__WEBPACK_IMPORTED_MODULE_2__","effects","effectsConfig","threshold","thresholdTriggered","_effectsRunFn","_effects","_scrollStateChanged","_tearDownEffects","createEffect","effectName","effectConfig","effectDef","_scrollEffects","ReferenceError","_getUndefinedMsg","_boundEffect","setUp","_effectsChanged","startsAt","endsAt","deltaS","noop","runFn","run","tearDown","_setThresholdTriggered","registerEffect","newVal","_computeToggleIcon","_computeItemLabel","_fireChanged","LocalizeMixin","_services","_hassChanged","oldHass","services","JSONTextArea","preact__WEBPACK_IMPORTED_MODULE_0__","isValid","JSON","stringify","parsed","parse","err","setState","minWidth","border","onvalue-changed","dir","StateCondition","_common_preact_event__WEBPACK_IMPORTED_MODULE_3__","entityPicked","condition","cndFor","for","defaultConfig","hasLocation","NumericStateCondition","value_template","below","above","preact","SunCondition","afterPicked","radioGroupPicked","beforePicked","after","after_offset","before","before_offset","allow-empty-selection","aria-labelledby","onpaper-radio-group-changed","TemplateCondition","TimeCondition","zoneAndLocationFilter","ZoneCondition","zonePicked","zone","condition_edit_ConditionRow","TYPES","numeric_state","time","OPTIONS","ConditionRow","typeChanged","Comp","no-animations","oniron-select","opt","unmount","mountEl","CallServiceAction","serviceChanged","serviceDataChanged","action","service","json_textarea","alias","ConditionAction","condition_edit","DelayAction","WaitAction","onTemplateChange","wait_template","timeout","event_data","eventData","getType","Action","newType","onDelete","confirm","class","horizontal-align","horizontal-offset","vertical-offset","onTap","action_edit_Action","script_Script","Script","addAction","actionChanged","newValue","act","action_row_Action","ScriptEditor","sequenceChanged","sequence","is-wide","href","js_script","deleteScript","objectId","callApi","NavigateMixin","errors","dirty","creatingNew","_rendered","_renderScheduled","rtl","configChanged","unmountPreact","_updateComponent","scriptChanged","history","back","creatingNewChanged","backTapped","mergeEl","saveScript","Date","computeName","_computeRTL","computeRTL","customElement","scripts","_runScript","async","currentTarget","variables","callService","triggerScript","showToast","haStyle","_routeData","_routeMatches","_creatingNew","_edittingScript","showEditor","computeScript","edittingAddon","routeData","computeScripts","entity","entityA","entityB","nameA","nameB","computeShowEditor","_polymer_iron_form_element_behavior_iron_form_element_behavior_js__WEBPACK_IMPORTED_MODULE_5__","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_7__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_8__","_paper_input_behavior_js__WEBPACK_IMPORTED_MODULE_9__","iron-input-ready","_onIronInputReady","nativeInput","$$","_typesThatHaveText","container","_handleValueAndAutoValidate","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_2__","mode","_text","instance","_onIronAnnounce","announce"],"mappings":"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","file":"chunk.536349da90cd976fc503.js","sourcesContent":["import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n\nimport { fireEvent } from \"../common/dom/fire_event\";\n\n// Polymer legacy event helpers used courtesy of the Polymer project.\n//\n// Copyright (c) 2017 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//    * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//    * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//    * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n/* @polymerMixin */\nexport const EventsMixin = dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      /**\n   * Dispatches a custom event with an optional detail value.\n   *\n   * @param {string} type Name of event type.\n   * @param {*=} detail Detail value containing event-specific\n   *   payload.\n   * @param {{ bubbles: (boolean|undefined),\n               cancelable: (boolean|undefined),\n                composed: (boolean|undefined) }=}\n    *  options Object specifying options.  These may include:\n    *  `bubbles` (boolean, defaults to `true`),\n    *  `cancelable` (boolean, defaults to false), and\n    *  `node` on which to fire the event (HTMLElement, defaults to `this`).\n    * @return {Event} The new event that was fired.\n    */\n      fire(type, detail, options) {\n        options = options || {};\n        return fireEvent(options.node || this, type, detail, options);\n      }\n    }\n);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronA11yAnnouncer} from '@polymer/iron-a11y-announcer/iron-a11y-announcer.js';\nimport {IronValidatableBehavior} from '@polymer/iron-validatable-behavior/iron-validatable-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\n`<iron-input>` is a wrapper to a native `<input>` element, that adds two-way\nbinding and prevention of invalid input. To use it, you must distribute a native\n`<input>` yourself. You can continue to use the native `input` as you would\nnormally:\n\n    <iron-input>\n      <input>\n    </iron-input>\n\n    <iron-input>\n      <input type=\"email\" disabled>\n    </iron-input>\n\n### Two-way binding\n\nBy default you can only get notified of changes to a native `<input>`'s `value`\ndue to user input:\n\n    <input value=\"{{myValue::input}}\">\n\nThis means that if you imperatively set the value (i.e. `someNativeInput.value =\n'foo'`), no events will be fired and this change cannot be observed.\n\n`iron-input` adds the `bind-value` property that mirrors the native `input`'s\n'`value` property; this property can be used for two-way data binding.\n`bind-value` will notify if it is changed either by user input or by script.\n\n    <iron-input bind-value=\"{{myValue}}\">\n      <input>\n    </iron-input>\n\nNote: this means that if you want to imperatively set the native `input`'s, you\n_must_ set `bind-value` instead, so that the wrapper `iron-input` can be\nnotified.\n\n### Validation\n\n`iron-input` uses the native `input`'s validation. For simplicity, `iron-input`\nhas a `validate()` method (which internally just checks the distributed\n`input`'s validity), which sets an `invalid` attribute that can also be used for\nstyling.\n\nTo validate automatically as you type, you can use the `auto-validate`\nattribute.\n\n`iron-input` also fires an `iron-input-validate` event after `validate()` is\ncalled. You can use it to implement a custom validator:\n\n    var CatsOnlyValidator = {\n      validate: function(ironInput) {\n        var valid = !ironInput.bindValue || ironInput.bindValue === 'cat';\n        ironInput.invalid = !valid;\n        return valid;\n      }\n    }\n    ironInput.addEventListener('iron-input-validate', function() {\n      CatsOnly.validate(input2);\n    });\n\nYou can also use an element implementing an\n[`IronValidatorBehavior`](/element/PolymerElements/iron-validatable-behavior).\nThis example can also be found in the demo for this element:\n\n    <iron-input validator=\"cats-only\">\n      <input>\n    </iron-input>\n\n### Preventing invalid input\n\nIt may be desirable to only allow users to enter certain characters. You can use\nthe `allowed-pattern` attribute to accomplish this. This feature is separate\nfrom validation, and `allowed-pattern` does not affect how the input is\nvalidated.\n\n    // Only allow typing digits, but a valid input has exactly 5 digits.\n    <iron-input allowed-pattern=\"[0-9]\">\n      <input pattern=\"\\d{5}\">\n    </iron-input>\n\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-block;\n      }\n    </style>\n    <slot id=\"content\"></slot>\n`,\n\n  is: 'iron-input',\n  behaviors: [IronValidatableBehavior],\n\n  /**\n   * Fired whenever `validate()` is called.\n   *\n   * @event iron-input-validate\n   */\n\n  properties: {\n\n    /**\n     * Use this property instead of `value` for two-way data binding, or to\n     * set a default value for the input. **Do not** use the distributed\n     * input's `value` property to set a default value.\n     */\n    bindValue: {type: String, value: ''},\n\n    /**\n     * Computed property that echoes `bindValue` (mostly used for Polymer 1.0\n     * backcompatibility, if you were one-way binding to the Polymer 1.0\n     * `input is=\"iron-input\"` value attribute).\n     */\n    value: {type: String, computed: '_computeValue(bindValue)'},\n\n    /**\n     * Regex-like list of characters allowed as input; all characters not in the\n     * list will be rejected. The recommended format should be a list of allowed\n     * characters, for example, `[a-zA-Z0-9.+-!;:]`.\n     *\n     * This pattern represents the allowed characters for the field; as the user\n     * inputs text, each individual character will be checked against the\n     * pattern (rather than checking the entire value as a whole). If a\n     * character is not a match, it will be rejected.\n     *\n     * Pasted input will have each character checked individually; if any\n     * character doesn't match `allowedPattern`, the entire pasted string will\n     * be rejected.\n     *\n     * Note: if you were using `iron-input` in 1.0, you were also required to\n     * set `prevent-invalid-input`. This is no longer needed as of Polymer 2.0,\n     * and will be set automatically for you if an `allowedPattern` is provided.\n     *\n     */\n    allowedPattern: {type: String},\n\n    /**\n     * Set to true to auto-validate the input value as you type.\n     */\n    autoValidate: {type: Boolean, value: false},\n\n    /**\n     * The native input element.\n     */\n    _inputElement: Object,\n  },\n\n  observers: ['_bindValueChanged(bindValue, _inputElement)'],\n  listeners: {'input': '_onInput', 'keypress': '_onKeypress'},\n\n  created: function() {\n    IronA11yAnnouncer.requestAvailability();\n    this._previousValidInput = '';\n    this._patternAlreadyChecked = false;\n  },\n\n  attached: function() {\n    // If the input is added at a later time, update the internal reference.\n    this._observer = dom(this).observeNodes(function(info) {\n      this._initSlottedInput();\n    }.bind(this));\n  },\n\n  detached: function() {\n    if (this._observer) {\n      dom(this).unobserveNodes(this._observer);\n      this._observer = null;\n    }\n  },\n\n  /**\n   * Returns the distributed input element.\n   */\n  get inputElement() {\n    return this._inputElement;\n  },\n\n  _initSlottedInput: function() {\n    this._inputElement = this.getEffectiveChildren()[0];\n\n    if (this.inputElement && this.inputElement.value) {\n      this.bindValue = this.inputElement.value;\n    }\n\n    this.fire('iron-input-ready');\n  },\n\n  get _patternRegExp() {\n    var pattern;\n    if (this.allowedPattern) {\n      pattern = new RegExp(this.allowedPattern);\n    } else {\n      switch (this.inputElement.type) {\n        case 'number':\n          pattern = /[0-9.,e-]/;\n          break;\n      }\n    }\n    return pattern;\n  },\n\n  /**\n   * @suppress {checkTypes}\n   */\n  _bindValueChanged: function(bindValue, inputElement) {\n    // The observer could have run before attached() when we have actually\n    // initialized this property.\n    if (!inputElement) {\n      return;\n    }\n\n    if (bindValue === undefined) {\n      inputElement.value = null;\n    } else if (bindValue !== inputElement.value) {\n      this.inputElement.value = bindValue;\n    }\n\n    if (this.autoValidate) {\n      this.validate();\n    }\n\n    // manually notify because we don't want to notify until after setting value\n    this.fire('bind-value-changed', {value: bindValue});\n  },\n\n  _onInput: function() {\n    // Need to validate each of the characters pasted if they haven't\n    // been validated inside `_onKeypress` already.\n    if (this.allowedPattern && !this._patternAlreadyChecked) {\n      var valid = this._checkPatternValidity();\n      if (!valid) {\n        this._announceInvalidCharacter(\n            'Invalid string of characters not entered.');\n        this.inputElement.value = this._previousValidInput;\n      }\n    }\n    this.bindValue = this._previousValidInput = this.inputElement.value;\n    this._patternAlreadyChecked = false;\n  },\n\n  _isPrintable: function(event) {\n    // What a control/printable character is varies wildly based on the browser.\n    // - most control characters (arrows, backspace) do not send a `keypress`\n    // event\n    //   in Chrome, but the *do* on Firefox\n    // - in Firefox, when they do send a `keypress` event, control chars have\n    //   a charCode = 0, keyCode = xx (for ex. 40 for down arrow)\n    // - printable characters always send a keypress event.\n    // - in Firefox, printable chars always have a keyCode = 0. In Chrome, the\n    // keyCode\n    //   always matches the charCode.\n    // None of this makes any sense.\n\n    // For these keys, ASCII code == browser keycode.\n    var anyNonPrintable = (event.keyCode == 8) ||  // backspace\n        (event.keyCode == 9) ||                    // tab\n        (event.keyCode == 13) ||                   // enter\n        (event.keyCode == 27);                     // escape\n\n    // For these keys, make sure it's a browser keycode and not an ASCII code.\n    var mozNonPrintable = (event.keyCode == 19) ||  // pause\n        (event.keyCode == 20) ||                    // caps lock\n        (event.keyCode == 45) ||                    // insert\n        (event.keyCode == 46) ||                    // delete\n        (event.keyCode == 144) ||                   // num lock\n        (event.keyCode == 145) ||                   // scroll lock\n        (event.keyCode > 32 &&\n         event.keyCode < 41) ||  // page up/down, end, home, arrows\n        (event.keyCode > 111 && event.keyCode < 124);  // fn keys\n\n    return !anyNonPrintable && !(event.charCode == 0 && mozNonPrintable);\n  },\n\n  _onKeypress: function(event) {\n    if (!this.allowedPattern && this.inputElement.type !== 'number') {\n      return;\n    }\n    var regexp = this._patternRegExp;\n    if (!regexp) {\n      return;\n    }\n\n    // Handle special keys and backspace\n    if (event.metaKey || event.ctrlKey || event.altKey) {\n      return;\n    }\n\n    // Check the pattern either here or in `_onInput`, but not in both.\n    this._patternAlreadyChecked = true;\n\n    var thisChar = String.fromCharCode(event.charCode);\n    if (this._isPrintable(event) && !regexp.test(thisChar)) {\n      event.preventDefault();\n      this._announceInvalidCharacter(\n          'Invalid character ' + thisChar + ' not entered.');\n    }\n  },\n\n  _checkPatternValidity: function() {\n    var regexp = this._patternRegExp;\n    if (!regexp) {\n      return true;\n    }\n    for (var i = 0; i < this.inputElement.value.length; i++) {\n      if (!regexp.test(this.inputElement.value[i])) {\n        return false;\n      }\n    }\n    return true;\n  },\n\n  /**\n   * Returns true if `value` is valid. The validator provided in `validator`\n   * will be used first, then any constraints.\n   * @return {boolean} True if the value is valid.\n   */\n  validate: function() {\n    if (!this.inputElement) {\n      this.invalid = false;\n      return true;\n    }\n\n    // Use the nested input's native validity.\n    var valid = this.inputElement.checkValidity();\n\n    // Only do extra checking if the browser thought this was valid.\n    if (valid) {\n      // Empty, required input is invalid\n      if (this.required && this.bindValue === '') {\n        valid = false;\n      } else if (this.hasValidator()) {\n        valid = IronValidatableBehavior.validate.call(this, this.bindValue);\n      }\n    }\n\n    this.invalid = !valid;\n    this.fire('iron-input-validate');\n    return valid;\n  },\n\n  _announceInvalidCharacter: function(message) {\n    this.fire('iron-announce', {text: message});\n  },\n\n  _computeValue: function(bindValue) {\n    return bindValue;\n  }\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronButtonState} from '@polymer/iron-behaviors/iron-button-state.js';\nimport {IronControlState} from '@polymer/iron-behaviors/iron-control-state.js';\n\n/*\n`PaperItemBehavior` is a convenience behavior shared by <paper-item> and\n<paper-icon-item> that manages the shared control states and attributes of\nthe items.\n*/\n/** @polymerBehavior PaperItemBehavior */\nexport const PaperItemBehaviorImpl = {\n  hostAttributes: {role: 'option', tabindex: '0'}\n};\n\n/** @polymerBehavior */\nexport const PaperItemBehavior =\n    [IronButtonState, IronControlState, PaperItemBehaviorImpl];\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\n/**\n * `NeonAnimatableBehavior` is implemented by elements containing\n * animations for use with elements implementing\n * `NeonAnimationRunnerBehavior`.\n * @polymerBehavior\n */\nexport const NeonAnimatableBehavior = {\n\n  properties: {\n\n    /**\n     * Animation configuration. See README for more info.\n     */\n    animationConfig: {type: Object},\n\n    /**\n     * Convenience property for setting an 'entry' animation. Do not set\n     * `animationConfig.entry` manually if using this. The animated node is set\n     * to `this` if using this property.\n     */\n    entryAnimation: {\n      observer: '_entryAnimationChanged',\n      type: String,\n    },\n\n    /**\n     * Convenience property for setting an 'exit' animation. Do not set\n     * `animationConfig.exit` manually if using this. The animated node is set\n     * to `this` if using this property.\n     */\n    exitAnimation: {\n      observer: '_exitAnimationChanged',\n      type: String,\n    },\n\n  },\n\n  _entryAnimationChanged: function() {\n    this.animationConfig = this.animationConfig || {};\n    this.animationConfig['entry'] = [{name: this.entryAnimation, node: this}];\n  },\n\n  _exitAnimationChanged: function() {\n    this.animationConfig = this.animationConfig || {};\n    this.animationConfig['exit'] = [{name: this.exitAnimation, node: this}];\n  },\n\n  _copyProperties: function(config1, config2) {\n    // shallowly copy properties from config2 to config1\n    for (var property in config2) {\n      config1[property] = config2[property];\n    }\n  },\n\n  _cloneConfig: function(config) {\n    var clone = {isClone: true};\n    this._copyProperties(clone, config);\n    return clone;\n  },\n\n  _getAnimationConfigRecursive: function(type, map, allConfigs) {\n    if (!this.animationConfig) {\n      return;\n    }\n\n    if (this.animationConfig.value &&\n        typeof this.animationConfig.value === 'function') {\n      this._warn(this._logf(\n          'playAnimation',\n          'Please put \\'animationConfig\\' inside of your components \\'properties\\' object instead of outside of it.'));\n      return;\n    }\n\n    // type is optional\n    var thisConfig;\n    if (type) {\n      thisConfig = this.animationConfig[type];\n    } else {\n      thisConfig = this.animationConfig;\n    }\n\n    if (!Array.isArray(thisConfig)) {\n      thisConfig = [thisConfig];\n    }\n\n    // iterate animations and recurse to process configurations from child nodes\n    if (thisConfig) {\n      for (var config, index = 0; config = thisConfig[index]; index++) {\n        if (config.animatable) {\n          config.animatable._getAnimationConfigRecursive(\n              config.type || type, map, allConfigs);\n        } else {\n          if (config.id) {\n            var cachedConfig = map[config.id];\n            if (cachedConfig) {\n              // merge configurations with the same id, making a clone lazily\n              if (!cachedConfig.isClone) {\n                map[config.id] = this._cloneConfig(cachedConfig);\n                cachedConfig = map[config.id];\n              }\n              this._copyProperties(cachedConfig, config);\n            } else {\n              // put any configs with an id into a map\n              map[config.id] = config;\n            }\n          } else {\n            allConfigs.push(config);\n          }\n        }\n      }\n    }\n  },\n\n  /**\n   * An element implementing `NeonAnimationRunnerBehavior` calls this\n   * method to configure an animation with an optional type. Elements\n   * implementing `NeonAnimatableBehavior` should define the property\n   * `animationConfig`, which is either a configuration object or a map of\n   * animation type to array of configuration objects.\n   */\n  getAnimationConfig: function(type) {\n    var map = {};\n    var allConfigs = [];\n    this._getAnimationConfigRecursive(type, map, allConfigs);\n    // append the configurations saved in the map to the array\n    for (var key in map) {\n      allConfigs.push(map[key]);\n    }\n    return allConfigs;\n  }\n\n};\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {NeonAnimatableBehavior} from './neon-animatable-behavior.js';\n\n/**\n * `NeonAnimationRunnerBehavior` adds a method to run animations.\n *\n * @polymerBehavior NeonAnimationRunnerBehavior\n */\nexport const NeonAnimationRunnerBehaviorImpl = {\n\n  _configureAnimations: function(configs) {\n    var results = [];\n    var resultsToPlay = [];\n\n    if (configs.length > 0) {\n      for (let config, index = 0; config = configs[index]; index++) {\n        let neonAnimation = document.createElement(config.name);\n        // is this element actually a neon animation?\n        if (neonAnimation.isNeonAnimation) {\n          let result = null;\n          // Closure compiler does not work well with a try / catch here.\n          // .configure needs to be explicitly defined\n          if (!neonAnimation.configure) {\n            /**\n             * @param {Object} config\n             * @return {AnimationEffectReadOnly}\n             */\n            neonAnimation.configure = function(config) {\n              return null;\n            }\n          }\n\n          result = neonAnimation.configure(config);\n          resultsToPlay.push({\n            result: result,\n            config: config,\n            neonAnimation: neonAnimation,\n          });\n        } else {\n          console.warn(this.is + ':', config.name, 'not found!');\n        }\n      }\n    }\n\n    for (var i = 0; i < resultsToPlay.length; i++) {\n      let result = resultsToPlay[i].result;\n      let config = resultsToPlay[i].config;\n      let neonAnimation = resultsToPlay[i].neonAnimation;\n      // configuration or play could fail if polyfills aren't loaded\n      try {\n        // Check if we have an Effect rather than an Animation\n        if (typeof result.cancel != 'function') {\n          result = document.timeline.play(result);\n        }\n      } catch (e) {\n        result = null;\n        console.warn('Couldnt play', '(', config.name, ').', e);\n      }\n\n      if (result) {\n        results.push({\n          neonAnimation: neonAnimation,\n          config: config,\n          animation: result,\n        });\n      }\n    }\n\n    return results;\n  },\n\n  _shouldComplete: function(activeEntries) {\n    var finished = true;\n    for (var i = 0; i < activeEntries.length; i++) {\n      if (activeEntries[i].animation.playState != 'finished') {\n        finished = false;\n        break;\n      }\n    }\n    return finished;\n  },\n\n  _complete: function(activeEntries) {\n    for (var i = 0; i < activeEntries.length; i++) {\n      activeEntries[i].neonAnimation.complete(activeEntries[i].config);\n    }\n    for (var i = 0; i < activeEntries.length; i++) {\n      activeEntries[i].animation.cancel();\n    }\n  },\n\n  /**\n   * Plays an animation with an optional `type`.\n   * @param {string=} type\n   * @param {!Object=} cookie\n   */\n  playAnimation: function(type, cookie) {\n    var configs = this.getAnimationConfig(type);\n    if (!configs) {\n      return;\n    }\n    this._active = this._active || {};\n    if (this._active[type]) {\n      this._complete(this._active[type]);\n      delete this._active[type];\n    }\n\n    var activeEntries = this._configureAnimations(configs);\n\n    if (activeEntries.length == 0) {\n      this.fire('neon-animation-finish', cookie, {bubbles: false});\n      return;\n    }\n\n    this._active[type] = activeEntries;\n\n    for (var i = 0; i < activeEntries.length; i++) {\n      activeEntries[i].animation.onfinish = function() {\n        if (this._shouldComplete(activeEntries)) {\n          this._complete(activeEntries);\n          delete this._active[type];\n          this.fire('neon-animation-finish', cookie, {bubbles: false});\n        }\n      }.bind(this);\n    }\n  },\n\n  /**\n   * Cancels the currently running animations.\n   */\n  cancelAnimation: function() {\n    for (var k in this._active) {\n      var entries = this._active[k]\n\n                    for (var j in entries) {\n        entries[j].animation.cancel();\n      }\n    }\n\n    this._active = {};\n  }\n};\n\n/** @polymerBehavior */\nexport const NeonAnimationRunnerBehavior =\n    [NeonAnimatableBehavior, NeonAnimationRunnerBehaviorImpl];\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronFormElementBehavior} from '@polymer/iron-form-element-behavior/iron-form-element-behavior.js';\nimport {IronValidatableBehavior} from '@polymer/iron-validatable-behavior/iron-validatable-behavior.js';\n\n/**\n * Use `IronCheckedElementBehavior` to implement a custom element that has a\n * `checked` property, which can be used for validation if the element is also\n * `required`. Element instances implementing this behavior will also be\n * registered for use in an `iron-form` element.\n *\n * @demo demo/index.html\n * @polymerBehavior IronCheckedElementBehavior\n */\nexport const IronCheckedElementBehaviorImpl = {\n\n  properties: {\n    /**\n     * Fired when the checked state changes.\n     *\n     * @event iron-change\n     */\n\n    /**\n     * Gets or sets the state, `true` is checked and `false` is unchecked.\n     */\n    checked: {\n      type: Boolean,\n      value: false,\n      reflectToAttribute: true,\n      notify: true,\n      observer: '_checkedChanged'\n    },\n\n    /**\n     * If true, the button toggles the active state with each tap or press\n     * of the spacebar.\n     */\n    toggles: {type: Boolean, value: true, reflectToAttribute: true},\n\n    /* Overriden from IronFormElementBehavior */\n    value: {type: String, value: 'on', observer: '_valueChanged'}\n  },\n\n  observers: ['_requiredChanged(required)'],\n\n  created: function() {\n    // Used by `iron-form` to handle the case that an element with this behavior\n    // doesn't have a role of 'checkbox' or 'radio', but should still only be\n    // included when the form is serialized if `this.checked === true`.\n    this._hasIronCheckedElementBehavior = true;\n  },\n\n  /**\n   * Returns false if the element is required and not checked, and true\n   * otherwise.\n   * @param {*=} _value Ignored.\n   * @return {boolean} true if `required` is false or if `checked` is true.\n   */\n  _getValidity: function(_value) {\n    return this.disabled || !this.required || this.checked;\n  },\n\n  /**\n   * Update the aria-required label when `required` is changed.\n   */\n  _requiredChanged: function() {\n    if (this.required) {\n      this.setAttribute('aria-required', 'true');\n    } else {\n      this.removeAttribute('aria-required');\n    }\n  },\n\n  /**\n   * Fire `iron-changed` when the checked state changes.\n   */\n  _checkedChanged: function() {\n    this.active = this.checked;\n    this.fire('iron-change');\n  },\n\n  /**\n   * Reset value to 'on' if it is set to `undefined`.\n   */\n  _valueChanged: function() {\n    if (this.value === undefined || this.value === null) {\n      this.value = 'on';\n    }\n  }\n};\n\n/** @polymerBehavior */\nexport const IronCheckedElementBehavior = [\n  IronFormElementBehavior,\n  IronValidatableBehavior,\n  IronCheckedElementBehaviorImpl\n];\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronCheckedElementBehavior, IronCheckedElementBehaviorImpl} from '@polymer/iron-checked-element-behavior/iron-checked-element-behavior.js';\n\nimport {PaperInkyFocusBehavior} from './paper-inky-focus-behavior.js';\nimport {PaperRippleBehavior} from './paper-ripple-behavior.js';\n\n/**\n * Use `PaperCheckedElementBehavior` to implement a custom element that has a\n * `checked` property similar to `IronCheckedElementBehavior` and is compatible\n * with having a ripple effect.\n * @polymerBehavior PaperCheckedElementBehavior\n */\nexport const PaperCheckedElementBehaviorImpl = {\n  /**\n   * Synchronizes the element's checked state with its ripple effect.\n   */\n  _checkedChanged: function() {\n    IronCheckedElementBehaviorImpl._checkedChanged.call(this);\n    if (this.hasRipple()) {\n      if (this.checked) {\n        this._ripple.setAttribute('checked', '');\n      } else {\n        this._ripple.removeAttribute('checked');\n      }\n    }\n  },\n\n  /**\n   * Synchronizes the element's `active` and `checked` state.\n   */\n  _buttonStateChanged: function() {\n    PaperRippleBehavior._buttonStateChanged.call(this);\n    if (this.disabled) {\n      return;\n    }\n    if (this.isAttached) {\n      this.checked = this.active;\n    }\n  }\n};\n\n/** @polymerBehavior */\nexport const PaperCheckedElementBehavior = [\n  PaperInkyFocusBehavior,\n  IronCheckedElementBehavior,\n  PaperCheckedElementBehaviorImpl\n];\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport './paper-item-shared-styles.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {PaperItemBehavior} from './paper-item-behavior.js';\n\n/**\nMaterial design:\n[Lists](https://www.google.com/design/spec/components/lists.html)\n\n`<paper-item>` is an interactive list item. By default, it is a horizontal\nflexbox.\n\n    <paper-item>Item</paper-item>\n\nUse this element with `<paper-item-body>` to make Material Design styled\ntwo-line and three-line items.\n\n    <paper-item>\n      <paper-item-body two-line>\n        <div>Show your status</div>\n        <div secondary>Your status is visible to everyone</div>\n      </paper-item-body>\n      <iron-icon icon=\"warning\"></iron-icon>\n    </paper-item>\n\nTo use `paper-item` as a link, wrap it in an anchor tag. Since `paper-item` will\nalready receive focus, you may want to prevent the anchor tag from receiving\nfocus as well by setting its tabindex to -1.\n\n    <a href=\"https://www.polymer-project.org/\" tabindex=\"-1\">\n      <paper-item raised>Polymer Project</paper-item>\n    </a>\n\nIf you are concerned about performance and want to use `paper-item` in a\n`paper-listbox` with many items, you can just use a native `button` with the\n`paper-item` class applied (provided you have correctly included the shared\nstyles):\n\n    <style is=\"custom-style\" include=\"paper-item-shared-styles\"></style>\n\n    <paper-listbox>\n      <button class=\"paper-item\" role=\"option\">Inbox</button>\n      <button class=\"paper-item\" role=\"option\">Starred</button>\n      <button class=\"paper-item\" role=\"option\">Sent mail</button>\n    </paper-listbox>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-min-height` | Minimum height of the item | `48px`\n`--paper-item` | Mixin applied to the item | `{}`\n`--paper-item-selected-weight` | The font weight of a selected item | `bold`\n`--paper-item-selected` | Mixin applied to selected paper-items | `{}`\n`--paper-item-disabled-color` | The color for disabled paper-items | `--disabled-text-color`\n`--paper-item-disabled` | Mixin applied to disabled paper-items | `{}`\n`--paper-item-focused` | Mixin applied to focused paper-items | `{}`\n`--paper-item-focused-before` | Mixin applied to :before focused paper-items | `{}`\n\n### Accessibility\n\nThis element has `role=\"listitem\"` by default. Depending on usage, it may be\nmore appropriate to set `role=\"menuitem\"`, `role=\"menuitemcheckbox\"` or\n`role=\"menuitemradio\"`.\n\n    <paper-item role=\"menuitemcheckbox\">\n      <paper-item-body>\n        Show your status\n      </paper-item-body>\n      <paper-checkbox></paper-checkbox>\n    </paper-item>\n\n@group Paper Elements\n@element paper-item\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style include=\"paper-item-shared-styles\">\n      :host {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n        @apply --paper-font-subhead;\n\n        @apply --paper-item;\n      }\n    </style>\n    <slot></slot>\n`,\n\n  is: 'paper-item',\n  behaviors: [PaperItemBehavior]\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/color.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/typography.js';\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.setAttribute('style', 'display: none;');\n\n$_documentContainer.innerHTML = `<dom-module id=\"paper-item-shared-styles\">\n  <template>\n    <style>\n      :host, .paper-item {\n        display: block;\n        position: relative;\n        min-height: var(--paper-item-min-height, 48px);\n        padding: 0px 16px;\n      }\n\n      .paper-item {\n        @apply --paper-font-subhead;\n        border:none;\n        outline: none;\n        background: white;\n        width: 100%;\n        text-align: left;\n      }\n\n      :host([hidden]), .paper-item[hidden] {\n        display: none !important;\n      }\n\n      :host(.iron-selected), .paper-item.iron-selected {\n        font-weight: var(--paper-item-selected-weight, bold);\n\n        @apply --paper-item-selected;\n      }\n\n      :host([disabled]), .paper-item[disabled] {\n        color: var(--paper-item-disabled-color, var(--disabled-text-color));\n\n        @apply --paper-item-disabled;\n      }\n\n      :host(:focus), .paper-item:focus {\n        position: relative;\n        outline: 0;\n\n        @apply --paper-item-focused;\n      }\n\n      :host(:focus):before, .paper-item:focus:before {\n        @apply --layout-fit;\n\n        background: currentColor;\n        content: '';\n        opacity: var(--dark-divider-opacity);\n        pointer-events: none;\n\n        @apply --paper-item-focused-before;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/paper-styles/default-theme.js';\n\nimport {IronMenuBehavior} from '@polymer/iron-menu-behavior/iron-menu-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\nMaterial design:\n[Menus](https://www.google.com/design/spec/components/menus.html)\n\n`<paper-listbox>` implements an accessible listbox control with Material Design\nstyling. The focused item is highlighted, and the selected item has bolded text.\n\n    <paper-listbox>\n      <paper-item>Item 1</paper-item>\n      <paper-item>Item 2</paper-item>\n    </paper-listbox>\n\nAn initial selection can be specified with the `selected` attribute.\n\n    <paper-listbox selected=\"0\">\n      <paper-item>Item 1</paper-item>\n      <paper-item>Item 2</paper-item>\n    </paper-listbox>\n\nMake a multi-select listbox with the `multi` attribute. Items in a multi-select\nlistbox can be deselected, and multiple item can be selected.\n\n    <paper-listbox multi>\n      <paper-item>Item 1</paper-item>\n      <paper-item>Item 2</paper-item>\n    </paper-listbox>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-listbox-background-color`   | Menu background color |\n`--primary-background-color`\n`--paper-listbox-color`              | Menu foreground color |\n`--primary-text-color`\n`--paper-listbox`                    | Mixin applied to the listbox | `{}`\n\n### Accessibility\n\n`<paper-listbox>` has `role=\"listbox\"` by default. A multi-select listbox will\nalso have `aria-multiselectable` set. It implements key bindings to navigate\nthrough the listbox with the up and down arrow keys, esc to exit the listbox,\nand enter to activate a listbox item. Typing the first letter of a listbox item\nwill also focus it.\n\n@group Paper Elements\n@element paper-listbox\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        padding: 8px 0;\n\n        background: var(--paper-listbox-background-color, var(--primary-background-color));\n        color: var(--paper-listbox-color, var(--primary-text-color));\n\n        @apply --paper-listbox;\n      }\n    </style>\n\n    <slot></slot>\n`,\n\n  is: 'paper-listbox',\n  behaviors: [IronMenuBehavior],\n\n  /** @private */\n  hostAttributes: {role: 'listbox'}\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronA11yKeysBehavior} from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\nimport {IronControlState} from '@polymer/iron-behaviors/iron-control-state.js';\nimport {IronOverlayBehavior, IronOverlayBehaviorImpl} from '@polymer/iron-overlay-behavior/iron-overlay-behavior.js';\nimport {NeonAnimationRunnerBehavior} from '@polymer/neon-animation/neon-animation-runner-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\n`<iron-dropdown>` is a generalized element that is useful when you have\nhidden content (`dropdown-content`) that is revealed due to some change in\nstate that should cause it to do so.\n\nNote that this is a low-level element intended to be used as part of other\ncomposite elements that cause dropdowns to be revealed.\n\nExamples of elements that might be implemented using an `iron-dropdown`\ninclude comboboxes, menubuttons, selects. The list goes on.\n\nThe `<iron-dropdown>` element exposes attributes that allow the position\nof the `dropdown-content` relative to the `dropdown-trigger` to be\nconfigured.\n\n    <iron-dropdown horizontal-align=\"right\" vertical-align=\"top\">\n      <div slot=\"dropdown-content\">Hello!</div>\n    </iron-dropdown>\n\nIn the above example, the `<div>` assigned to the `dropdown-content` slot will\nbe hidden until the dropdown element has `opened` set to true, or when the\n`open` method is called on the element.\n\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        position: fixed;\n      }\n\n      #contentWrapper ::slotted(*) {\n        overflow: auto;\n      }\n\n      #contentWrapper.animating ::slotted(*) {\n        overflow: hidden;\n        pointer-events: none;\n      }\n    </style>\n\n    <div id=\"contentWrapper\">\n      <slot id=\"content\" name=\"dropdown-content\"></slot>\n    </div>\n`,\n\n  is: 'iron-dropdown',\n\n  behaviors: [\n    IronControlState,\n    IronA11yKeysBehavior,\n    IronOverlayBehavior,\n    NeonAnimationRunnerBehavior\n  ],\n\n  properties: {\n    /**\n     * The orientation against which to align the dropdown content\n     * horizontally relative to the dropdown trigger.\n     * Overridden from `Polymer.IronFitBehavior`.\n     */\n    horizontalAlign: {type: String, value: 'left', reflectToAttribute: true},\n\n    /**\n     * The orientation against which to align the dropdown content\n     * vertically relative to the dropdown trigger.\n     * Overridden from `Polymer.IronFitBehavior`.\n     */\n    verticalAlign: {type: String, value: 'top', reflectToAttribute: true},\n\n    /**\n     * An animation config. If provided, this will be used to animate the\n     * opening of the dropdown. Pass an Array for multiple animations.\n     * See `neon-animation` documentation for more animation configuration\n     * details.\n     */\n    openAnimationConfig: {type: Object},\n\n    /**\n     * An animation config. If provided, this will be used to animate the\n     * closing of the dropdown. Pass an Array for multiple animations.\n     * See `neon-animation` documentation for more animation configuration\n     * details.\n     */\n    closeAnimationConfig: {type: Object},\n\n    /**\n     * If provided, this will be the element that will be focused when\n     * the dropdown opens.\n     */\n    focusTarget: {type: Object},\n\n    /**\n     * Set to true to disable animations when opening and closing the\n     * dropdown.\n     */\n    noAnimations: {type: Boolean, value: false},\n\n    /**\n     * By default, the dropdown will constrain scrolling on the page\n     * to itself when opened.\n     * Set to true in order to prevent scroll from being constrained\n     * to the dropdown when it opens.\n     * This property is a shortcut to set `scrollAction` to lock or refit.\n     * Prefer directly setting the `scrollAction` property.\n     */\n    allowOutsideScroll:\n        {type: Boolean, value: false, observer: '_allowOutsideScrollChanged'}\n  },\n\n  listeners: {'neon-animation-finish': '_onNeonAnimationFinish'},\n\n  observers: [\n    '_updateOverlayPosition(positionTarget, verticalAlign, horizontalAlign, verticalOffset, horizontalOffset)'\n  ],\n\n  /**\n   * The element that is contained by the dropdown, if any.\n   */\n  get containedElement() {\n    // Polymer 2.x returns slot.assignedNodes which can contain text nodes.\n    var nodes = dom(this.$.content).getDistributedNodes();\n    for (var i = 0, l = nodes.length; i < l; i++) {\n      if (nodes[i].nodeType === Node.ELEMENT_NODE) {\n        return nodes[i];\n      }\n    }\n  },\n\n  ready: function() {\n    // Ensure scrollAction is set.\n    if (!this.scrollAction) {\n      this.scrollAction = this.allowOutsideScroll ? 'refit' : 'lock';\n    }\n    this._readied = true;\n  },\n\n  attached: function() {\n    if (!this.sizingTarget || this.sizingTarget === this) {\n      this.sizingTarget = this.containedElement || this;\n    }\n  },\n\n  detached: function() {\n    this.cancelAnimation();\n  },\n\n  /**\n   * Called when the value of `opened` changes.\n   * Overridden from `IronOverlayBehavior`\n   */\n  _openedChanged: function() {\n    if (this.opened && this.disabled) {\n      this.cancel();\n    } else {\n      this.cancelAnimation();\n      this._updateAnimationConfig();\n      IronOverlayBehaviorImpl._openedChanged.apply(this, arguments);\n    }\n  },\n\n  /**\n   * Overridden from `IronOverlayBehavior`.\n   */\n  _renderOpened: function() {\n    if (!this.noAnimations && this.animationConfig.open) {\n      this.$.contentWrapper.classList.add('animating');\n      this.playAnimation('open');\n    } else {\n      IronOverlayBehaviorImpl._renderOpened.apply(this, arguments);\n    }\n  },\n\n  /**\n   * Overridden from `IronOverlayBehavior`.\n   */\n  _renderClosed: function() {\n    if (!this.noAnimations && this.animationConfig.close) {\n      this.$.contentWrapper.classList.add('animating');\n      this.playAnimation('close');\n    } else {\n      IronOverlayBehaviorImpl._renderClosed.apply(this, arguments);\n    }\n  },\n\n  /**\n   * Called when animation finishes on the dropdown (when opening or\n   * closing). Responsible for \"completing\" the process of opening or\n   * closing the dropdown by positioning it or setting its display to\n   * none.\n   */\n  _onNeonAnimationFinish: function() {\n    this.$.contentWrapper.classList.remove('animating');\n    if (this.opened) {\n      this._finishRenderOpened();\n    } else {\n      this._finishRenderClosed();\n    }\n  },\n\n  /**\n   * Constructs the final animation config from different properties used\n   * to configure specific parts of the opening and closing animations.\n   */\n  _updateAnimationConfig: function() {\n    // Update the animation node to be the containedElement.\n    var animationNode = this.containedElement;\n    var animations = [].concat(this.openAnimationConfig || [])\n                         .concat(this.closeAnimationConfig || []);\n    for (var i = 0; i < animations.length; i++) {\n      animations[i].node = animationNode;\n    }\n    this.animationConfig = {\n      open: this.openAnimationConfig,\n      close: this.closeAnimationConfig\n    };\n  },\n\n  /**\n   * Updates the overlay position based on configured horizontal\n   * and vertical alignment.\n   */\n  _updateOverlayPosition: function() {\n    if (this.isAttached) {\n      // This triggers iron-resize, and iron-overlay-behavior will call refit if\n      // needed.\n      this.notifyResize();\n    }\n  },\n\n  /**\n   * Sets scrollAction according to the value of allowOutsideScroll.\n   * Prefer setting directly scrollAction.\n   */\n  _allowOutsideScrollChanged: function(allowOutsideScroll) {\n    // Wait until initial values are all set.\n    if (!this._readied) {\n      return;\n    }\n    if (!allowOutsideScroll) {\n      this.scrollAction = 'lock';\n    } else if (!this.scrollAction || this.scrollAction === 'lock') {\n      this.scrollAction = 'refit';\n    }\n  },\n\n  /**\n   * Apply focus to focusTarget or containedElement\n   */\n  _applyFocus: function() {\n    var focusTarget = this.focusTarget || this.containedElement;\n    if (focusTarget && this.opened && !this.noAutoFocus) {\n      focusTarget.focus();\n    } else {\n      IronOverlayBehaviorImpl._applyFocus.apply(this, arguments);\n    }\n  }\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\n/**\n * Use `NeonAnimationBehavior` to implement an animation.\n * @polymerBehavior\n */\nexport const NeonAnimationBehavior = {\n\n  properties: {\n\n    /**\n     * Defines the animation timing.\n     */\n    animationTiming: {\n      type: Object,\n      value: function() {\n        return {\n          duration: 500, easing: 'cubic-bezier(0.4, 0, 0.2, 1)', fill: 'both'\n        }\n      }\n    }\n\n  },\n\n  /**\n   * Can be used to determine that elements implement this behavior.\n   */\n  isNeonAnimation: true,\n\n  /**\n   * Do any animation configuration here.\n   */\n  // configure: function(config) {\n  // },\n\n  created: function() {\n    if (!document.body.animate) {\n      console.warn(\n          'No web animations detected. This element will not' +\n          ' function without a web animations polyfill.');\n    }\n  },\n\n  /**\n   * Returns the animation timing by mixing in properties from `config` to the\n   * defaults defined by the animation.\n   */\n  timingFromConfig: function(config) {\n    if (config.timing) {\n      for (var property in config.timing) {\n        this.animationTiming[property] = config.timing[property];\n      }\n    }\n    return this.animationTiming;\n  },\n\n  /**\n   * Sets `transform` and `transformOrigin` properties along with the prefixed\n   * versions.\n   */\n  setPrefixedProperty: function(node, property, value) {\n    var map = {\n      'transform': ['webkitTransform'],\n      'transformOrigin': ['mozTransformOrigin', 'webkitTransformOrigin']\n    };\n    var prefixes = map[property];\n    for (var prefix, index = 0; prefix = prefixes[index]; index++) {\n      node.style[prefix] = value;\n    }\n    node.style[property] = value;\n  },\n\n  /**\n   * Called when the animation finishes.\n   */\n  complete: function(config) {}\n\n};\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {NeonAnimationBehavior} from '../neon-animation-behavior.js';\n/*\n`<fade-in-animation>` animates the opacity of an element from 0 to 1.\n\nConfiguration:\n```\n{\n  name: 'fade-in-animation',\n  node: <node>\n  timing: <animation-timing>\n}\n```\n*/\nPolymer({\n\n  is: 'fade-in-animation',\n\n  behaviors: [NeonAnimationBehavior],\n\n  configure: function(config) {\n    var node = config.node;\n    this._effect = new KeyframeEffect(\n        node,\n        [{'opacity': '0'}, {'opacity': '1'}],\n        this.timingFromConfig(config));\n    return this._effect;\n  }\n\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {NeonAnimationBehavior} from '../neon-animation-behavior.js';\n/*\n`<fade-out-animation>` animates the opacity of an element from 1 to 0.\n\nConfiguration:\n```\n{\n  name: 'fade-out-animation',\n  node: <node>\n  timing: <animation-timing>\n}\n```\n*/\nPolymer({\n\n  is: 'fade-out-animation',\n\n  behaviors: [NeonAnimationBehavior],\n\n  configure: function(config) {\n    var node = config.node;\n    this._effect = new KeyframeEffect(\n        node,\n        [\n          {'opacity': '1'},\n          {'opacity': '0'},\n        ],\n        this.timingFromConfig(config));\n    return this._effect;\n  }\n\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {NeonAnimationBehavior} from '@polymer/neon-animation/neon-animation-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nPolymer({\n  is: 'paper-menu-grow-height-animation',\n\n  behaviors: [NeonAnimationBehavior],\n\n  configure: function(config) {\n    var node = config.node;\n    var rect = node.getBoundingClientRect();\n    var height = rect.height;\n\n    this._effect = new KeyframeEffect(\n        node,\n        [{height: (height / 2) + 'px'}, {height: height + 'px'}],\n        this.timingFromConfig(config));\n\n    return this._effect;\n  }\n});\n\nPolymer({\n  is: 'paper-menu-grow-width-animation',\n\n  behaviors: [NeonAnimationBehavior],\n\n  configure: function(config) {\n    var node = config.node;\n    var rect = node.getBoundingClientRect();\n    var width = rect.width;\n\n    this._effect = new KeyframeEffect(\n        node,\n        [{width: (width / 2) + 'px'}, {width: width + 'px'}],\n        this.timingFromConfig(config));\n\n    return this._effect;\n  }\n});\n\nPolymer({\n  is: 'paper-menu-shrink-width-animation',\n\n  behaviors: [NeonAnimationBehavior],\n\n  configure: function(config) {\n    var node = config.node;\n    var rect = node.getBoundingClientRect();\n    var width = rect.width;\n\n    this._effect = new KeyframeEffect(\n        node,\n        [{width: width + 'px'}, {width: width - (width / 20) + 'px'}],\n        this.timingFromConfig(config));\n\n    return this._effect;\n  }\n});\n\nPolymer({\n  is: 'paper-menu-shrink-height-animation',\n\n  behaviors: [NeonAnimationBehavior],\n\n  configure: function(config) {\n    var node = config.node;\n    var rect = node.getBoundingClientRect();\n    var height = rect.height;\n\n    this.setPrefixedProperty(node, 'transformOrigin', '0 0');\n\n    this._effect = new KeyframeEffect(\n        node,\n        [\n          {height: height + 'px', transform: 'translateY(0)'},\n          {height: height / 2 + 'px', transform: 'translateY(-20px)'}\n        ],\n        this.timingFromConfig(config));\n\n    return this._effect;\n  }\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-dropdown/iron-dropdown.js';\nimport '@polymer/neon-animation/animations/fade-in-animation.js';\nimport '@polymer/neon-animation/animations/fade-out-animation.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/shadow.js';\nimport './paper-menu-button-animations.js';\n\nimport {IronA11yKeysBehavior} from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\nimport {IronControlState} from '@polymer/iron-behaviors/iron-control-state.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nvar config = {\n  ANIMATION_CUBIC_BEZIER: 'cubic-bezier(.3,.95,.5,1)',\n  MAX_ANIMATION_TIME_MS: 400\n};\n\n/**\nMaterial design: [Dropdown\nbuttons](https://www.google.com/design/spec/components/buttons.html#buttons-dropdown-buttons)\n\n`paper-menu-button` allows one to compose a designated \"trigger\" element with\nanother element that represents \"content\", to create a dropdown menu that\ndisplays the \"content\" when the \"trigger\" is clicked.\n\nThe child element assigned to the `dropdown-trigger` slot will be used as the\n\"trigger\" element. The child element assigned to the `dropdown-content` slot\nwill be used as the \"content\" element.\n\nThe `paper-menu-button` is sensitive to its content's `iron-select` events. If\nthe \"content\" element triggers an `iron-select` event, the `paper-menu-button`\nwill close automatically.\n\nExample:\n\n    <paper-menu-button>\n      <paper-icon-button icon=\"menu\"\nslot=\"dropdown-trigger\"></paper-icon-button> <paper-listbox\nslot=\"dropdown-content\"> <paper-item>Share</paper-item>\n        <paper-item>Settings</paper-item>\n        <paper-item>Help</paper-item>\n      </paper-listbox>\n    </paper-menu-button>\n\n### Styling\n\nThe following custom properties and mixins are also available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-menu-button-dropdown-background` | Background color of the paper-menu-button dropdown | `--primary-background-color`\n`--paper-menu-button` | Mixin applied to the paper-menu-button | `{}`\n`--paper-menu-button-disabled` | Mixin applied to the paper-menu-button when disabled | `{}`\n`--paper-menu-button-dropdown` | Mixin applied to the paper-menu-button dropdown | `{}`\n`--paper-menu-button-content` | Mixin applied to the paper-menu-button content | `{}`\n\n@hero hero.svg\n@demo demo/index.html\n*/\nexport const PaperMenuButton = Polymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-block;\n        position: relative;\n        padding: 8px;\n        outline: none;\n\n        @apply --paper-menu-button;\n      }\n\n      :host([disabled]) {\n        cursor: auto;\n        color: var(--disabled-text-color);\n\n        @apply --paper-menu-button-disabled;\n      }\n\n      iron-dropdown {\n        @apply --paper-menu-button-dropdown;\n      }\n\n      .dropdown-content {\n        @apply --shadow-elevation-2dp;\n\n        position: relative;\n        border-radius: 2px;\n        background-color: var(--paper-menu-button-dropdown-background, var(--primary-background-color));\n\n        @apply --paper-menu-button-content;\n      }\n\n      :host([vertical-align=\"top\"]) .dropdown-content {\n        margin-bottom: 20px;\n        margin-top: -10px;\n        top: 10px;\n      }\n\n      :host([vertical-align=\"bottom\"]) .dropdown-content {\n        bottom: 10px;\n        margin-bottom: -10px;\n        margin-top: 20px;\n      }\n\n      #trigger {\n        cursor: pointer;\n      }\n    </style>\n\n    <div id=\"trigger\" on-tap=\"toggle\">\n      <slot name=\"dropdown-trigger\"></slot>\n    </div>\n\n    <iron-dropdown id=\"dropdown\" opened=\"{{opened}}\" horizontal-align=\"[[horizontalAlign]]\" vertical-align=\"[[verticalAlign]]\" dynamic-align=\"[[dynamicAlign]]\" horizontal-offset=\"[[horizontalOffset]]\" vertical-offset=\"[[verticalOffset]]\" no-overlap=\"[[noOverlap]]\" open-animation-config=\"[[openAnimationConfig]]\" close-animation-config=\"[[closeAnimationConfig]]\" no-animations=\"[[noAnimations]]\" focus-target=\"[[_dropdownContent]]\" allow-outside-scroll=\"[[allowOutsideScroll]]\" restore-focus-on-close=\"[[restoreFocusOnClose]]\" on-iron-overlay-canceled=\"__onIronOverlayCanceled\">\n      <div slot=\"dropdown-content\" class=\"dropdown-content\">\n        <slot id=\"content\" name=\"dropdown-content\"></slot>\n      </div>\n    </iron-dropdown>\n`,\n\n  is: 'paper-menu-button',\n\n  /**\n   * Fired when the dropdown opens.\n   *\n   * @event paper-dropdown-open\n   */\n\n  /**\n   * Fired when the dropdown closes.\n   *\n   * @event paper-dropdown-close\n   */\n\n  behaviors: [IronA11yKeysBehavior, IronControlState],\n\n  properties: {\n    /**\n     * True if the content is currently displayed.\n     */\n    opened:\n        {type: Boolean, value: false, notify: true, observer: '_openedChanged'},\n\n    /**\n     * The orientation against which to align the menu dropdown\n     * horizontally relative to the dropdown trigger.\n     */\n    horizontalAlign: {type: String, value: 'left', reflectToAttribute: true},\n\n    /**\n     * The orientation against which to align the menu dropdown\n     * vertically relative to the dropdown trigger.\n     */\n    verticalAlign: {type: String, value: 'top', reflectToAttribute: true},\n\n    /**\n     * If true, the `horizontalAlign` and `verticalAlign` properties will\n     * be considered preferences instead of strict requirements when\n     * positioning the dropdown and may be changed if doing so reduces\n     * the area of the dropdown falling outside of `fitInto`.\n     */\n    dynamicAlign: {type: Boolean},\n\n    /**\n     * A pixel value that will be added to the position calculated for the\n     * given `horizontalAlign`. Use a negative value to offset to the\n     * left, or a positive value to offset to the right.\n     */\n    horizontalOffset: {type: Number, value: 0, notify: true},\n\n    /**\n     * A pixel value that will be added to the position calculated for the\n     * given `verticalAlign`. Use a negative value to offset towards the\n     * top, or a positive value to offset towards the bottom.\n     */\n    verticalOffset: {type: Number, value: 0, notify: true},\n\n    /**\n     * If true, the dropdown will be positioned so that it doesn't overlap\n     * the button.\n     */\n    noOverlap: {type: Boolean},\n\n    /**\n     * Set to true to disable animations when opening and closing the\n     * dropdown.\n     */\n    noAnimations: {type: Boolean, value: false},\n\n    /**\n     * Set to true to disable automatically closing the dropdown after\n     * a selection has been made.\n     */\n    ignoreSelect: {type: Boolean, value: false},\n\n    /**\n     * Set to true to enable automatically closing the dropdown after an\n     * item has been activated, even if the selection did not change.\n     */\n    closeOnActivate: {type: Boolean, value: false},\n\n    /**\n     * An animation config. If provided, this will be used to animate the\n     * opening of the dropdown.\n     */\n    openAnimationConfig: {\n      type: Object,\n      value: function() {\n        return [\n          {name: 'fade-in-animation', timing: {delay: 100, duration: 200}},\n          {\n            name: 'paper-menu-grow-width-animation',\n            timing: {\n              delay: 100,\n              duration: 150,\n              easing: config.ANIMATION_CUBIC_BEZIER\n            }\n          },\n          {\n            name: 'paper-menu-grow-height-animation',\n            timing: {\n              delay: 100,\n              duration: 275,\n              easing: config.ANIMATION_CUBIC_BEZIER\n            }\n          }\n        ];\n      }\n    },\n\n    /**\n     * An animation config. If provided, this will be used to animate the\n     * closing of the dropdown.\n     */\n    closeAnimationConfig: {\n      type: Object,\n      value: function() {\n        return [\n          {name: 'fade-out-animation', timing: {duration: 150}},\n          {\n            name: 'paper-menu-shrink-width-animation',\n            timing: {\n              delay: 100,\n              duration: 50,\n              easing: config.ANIMATION_CUBIC_BEZIER\n            }\n          },\n          {\n            name: 'paper-menu-shrink-height-animation',\n            timing: {duration: 200, easing: 'ease-in'}\n          }\n        ];\n      }\n    },\n\n    /**\n     * By default, the dropdown will constrain scrolling on the page\n     * to itself when opened.\n     * Set to true in order to prevent scroll from being constrained\n     * to the dropdown when it opens.\n     */\n    allowOutsideScroll: {type: Boolean, value: false},\n\n    /**\n     * Whether focus should be restored to the button when the menu closes.\n     */\n    restoreFocusOnClose: {type: Boolean, value: true},\n\n    /**\n     * This is the element intended to be bound as the focus target\n     * for the `iron-dropdown` contained by `paper-menu-button`.\n     */\n    _dropdownContent: {type: Object}\n  },\n\n  hostAttributes: {role: 'group', 'aria-haspopup': 'true'},\n\n  listeners:\n      {'iron-activate': '_onIronActivate', 'iron-select': '_onIronSelect'},\n\n  /**\n   * The content element that is contained by the menu button, if any.\n   */\n  get contentElement() {\n    // Polymer 2.x returns slot.assignedNodes which can contain text nodes.\n    var nodes = dom(this.$.content).getDistributedNodes();\n    for (var i = 0, l = nodes.length; i < l; i++) {\n      if (nodes[i].nodeType === Node.ELEMENT_NODE) {\n        return nodes[i];\n      }\n    }\n  },\n\n  /**\n   * Toggles the dropdown content between opened and closed.\n   */\n  toggle: function() {\n    if (this.opened) {\n      this.close();\n    } else {\n      this.open();\n    }\n  },\n\n  /**\n   * Make the dropdown content appear as an overlay positioned relative\n   * to the dropdown trigger.\n   */\n  open: function() {\n    if (this.disabled) {\n      return;\n    }\n\n    this.$.dropdown.open();\n  },\n\n  /**\n   * Hide the dropdown content.\n   */\n  close: function() {\n    this.$.dropdown.close();\n  },\n\n  /**\n   * When an `iron-select` event is received, the dropdown should\n   * automatically close on the assumption that a value has been chosen.\n   *\n   * @param {CustomEvent} event A CustomEvent instance with type\n   * set to `\"iron-select\"`.\n   */\n  _onIronSelect: function(event) {\n    if (!this.ignoreSelect) {\n      this.close();\n    }\n  },\n\n  /**\n   * Closes the dropdown when an `iron-activate` event is received if\n   * `closeOnActivate` is true.\n   *\n   * @param {CustomEvent} event A CustomEvent of type 'iron-activate'.\n   */\n  _onIronActivate: function(event) {\n    if (this.closeOnActivate) {\n      this.close();\n    }\n  },\n\n  /**\n   * When the dropdown opens, the `paper-menu-button` fires `paper-open`.\n   * When the dropdown closes, the `paper-menu-button` fires `paper-close`.\n   *\n   * @param {boolean} opened True if the dropdown is opened, otherwise false.\n   * @param {boolean} oldOpened The previous value of `opened`.\n   */\n  _openedChanged: function(opened, oldOpened) {\n    if (opened) {\n      // TODO(cdata): Update this when we can measure changes in distributed\n      // children in an idiomatic way.\n      // We poke this property in case the element has changed. This will\n      // cause the focus target for the `iron-dropdown` to be updated as\n      // necessary:\n      this._dropdownContent = this.contentElement;\n      this.fire('paper-dropdown-open');\n    } else if (oldOpened != null) {\n      this.fire('paper-dropdown-close');\n    }\n  },\n\n  /**\n   * If the dropdown is open when disabled becomes true, close the\n   * dropdown.\n   *\n   * @param {boolean} disabled True if disabled, otherwise false.\n   */\n  _disabledChanged: function(disabled) {\n    IronControlState._disabledChanged.apply(this, arguments);\n    if (disabled && this.opened) {\n      this.close();\n    }\n  },\n\n  __onIronOverlayCanceled: function(event) {\n    var uiEvent = event.detail;\n    var trigger = this.$.trigger;\n    var path = dom(uiEvent).path;\n\n    if (path.indexOf(trigger) > -1) {\n      event.preventDefault();\n    }\n  }\n});\n\nObject.keys(config).forEach(function(key) {\n  PaperMenuButton[key] = config[key];\n});\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/iron-iconset-svg/iron-iconset-svg.js';\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.setAttribute('style', 'display: none;');\n\n$_documentContainer.innerHTML =\n    `<iron-iconset-svg name=\"paper-dropdown-menu\" size=\"24\">\n<svg><defs>\n<g id=\"arrow-drop-down\"><path d=\"M7 10l5 5 5-5z\"></path></g>\n</defs></svg>\n</iron-iconset-svg>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/paper-styles/default-theme.js';\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.setAttribute('style', 'display: none;');\n\n$_documentContainer.innerHTML =\n    `<dom-module id=\"paper-dropdown-menu-shared-styles\">\n  <template>\n    <style>\n      :host {\n        display: inline-block;\n        position: relative;\n        text-align: left;\n\n        /* NOTE(cdata): Both values are needed, since some phones require the\n         * value to be \\`transparent\\`.\n         */\n        -webkit-tap-highlight-color: rgba(0,0,0,0);\n        -webkit-tap-highlight-color: transparent;\n\n        --paper-input-container-input: {\n          overflow: hidden;\n          white-space: nowrap;\n          text-overflow: ellipsis;\n          max-width: 100%;\n          box-sizing: border-box;\n          cursor: pointer;\n        };\n\n        @apply --paper-dropdown-menu;\n      }\n\n      :host([disabled]) {\n        @apply --paper-dropdown-menu-disabled;\n      }\n\n      :host([noink]) paper-ripple {\n        display: none;\n      }\n\n      :host([no-label-float]) paper-ripple {\n        top: 8px;\n      }\n\n      paper-ripple {\n        top: 12px;\n        left: 0px;\n        bottom: 8px;\n        right: 0px;\n\n        @apply --paper-dropdown-menu-ripple;\n      }\n\n      paper-menu-button {\n        display: block;\n        padding: 0;\n\n        @apply --paper-dropdown-menu-button;\n      }\n\n      paper-input {\n        @apply --paper-dropdown-menu-input;\n      }\n\n      iron-icon {\n        color: var(--disabled-text-color);\n\n        @apply --paper-dropdown-menu-icon;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n/**\n * Polymer Mixin to enable a localize function powered by language/resources from hass object.\n *\n * @polymerMixin\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      static get properties() {\n        return {\n          hass: Object,\n\n          /**\n           * Translates a string to the current `language`. Any parameters to the\n           * string should be passed in order, as follows:\n           * `localize(stringKey, param1Name, param1Value, param2Name, param2Value)`\n           */\n          localize: {\n            type: Function,\n            computed: \"__computeLocalize(hass.localize)\",\n          },\n        };\n      }\n\n      __computeLocalize(localize) {\n        return localize;\n      }\n    }\n);\n","import {\n  css,\n  CSSResult,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\n\nclass HaCard extends LitElement {\n  @property() public header?: string;\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        background: var(\n          --ha-card-background,\n          var(--paper-card-background-color, white)\n        );\n        border-radius: var(--ha-card-border-radius, 2px);\n        box-shadow: var(\n          --ha-card-box-shadow,\n          0 2px 2px 0 rgba(0, 0, 0, 0.14),\n          0 1px 5px 0 rgba(0, 0, 0, 0.12),\n          0 3px 1px -2px rgba(0, 0, 0, 0.2)\n        );\n        color: var(--primary-text-color);\n        display: block;\n        transition: all 0.3s ease-out;\n        position: relative;\n      }\n\n      .card-header,\n      :host ::slotted(.card-header) {\n        color: var(--ha-card-header-color, --primary-text-color);\n        font-family: var(--ha-card-header-font-family, inherit);\n        font-size: var(--ha-card-header-font-size, 24px);\n        letter-spacing: -0.012em;\n        line-height: 32px;\n        padding: 24px 16px 16px;\n        display: block;\n      }\n\n      :host ::slotted(.card-content:not(:first-child)),\n      slot:not(:first-child)::slotted(.card-content) {\n        padding-top: 0px;\n        margin-top: -8px;\n      }\n\n      :host ::slotted(.card-content) {\n        padding: 16px;\n      }\n\n      :host ::slotted(.card-actions) {\n        border-top: 1px solid #e8e8e8;\n        padding: 5px 16px;\n      }\n    `;\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      ${this.header\n        ? html`\n            <div class=\"card-header\">${this.header}</div>\n          `\n        : html``}\n      <slot></slot>\n    `;\n  }\n}\n\ncustomElements.define(\"ha-card\", HaCard);\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport computeObjectId from \"./compute_object_id\";\n\nexport default (stateObj: HassEntity): string =>\n  stateObj.attributes.friendly_name === undefined\n    ? computeObjectId(stateObj.entity_id).replace(/_/g, \" \")\n    : stateObj.attributes.friendly_name || \"\";\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport computeDomain from \"./compute_domain\";\n\nexport default function computeStateDomain(stateObj: HassEntity) {\n  return computeDomain(stateObj.entity_id);\n}\n","/**\n * Return the icon to be used for a domain.\n *\n * Optionally pass in a state to influence the domain icon.\n */\nimport { DEFAULT_DOMAIN_ICON } from \"../const\";\n\nconst fixedIcons = {\n  alert: \"hass:alert\",\n  alexa: \"hass:amazon-alexa\",\n  automation: \"hass:playlist-play\",\n  calendar: \"hass:calendar\",\n  camera: \"hass:video\",\n  climate: \"hass:thermostat\",\n  configurator: \"hass:settings\",\n  conversation: \"hass:text-to-speech\",\n  device_tracker: \"hass:account\",\n  fan: \"hass:fan\",\n  google_assistant: \"hass:google-assistant\",\n  group: \"hass:google-circles-communities\",\n  history_graph: \"hass:chart-line\",\n  homeassistant: \"hass:home-assistant\",\n  homekit: \"hass:home-automation\",\n  image_processing: \"hass:image-filter-frames\",\n  input_boolean: \"hass:drawing\",\n  input_datetime: \"hass:calendar-clock\",\n  input_number: \"hass:ray-vertex\",\n  input_select: \"hass:format-list-bulleted\",\n  input_text: \"hass:textbox\",\n  light: \"hass:lightbulb\",\n  mailbox: \"hass:mailbox\",\n  notify: \"hass:comment-alert\",\n  person: \"hass:account\",\n  plant: \"hass:flower\",\n  proximity: \"hass:apple-safari\",\n  remote: \"hass:remote\",\n  scene: \"hass:google-pages\",\n  script: \"hass:file-document\",\n  sensor: \"hass:eye\",\n  simple_alarm: \"hass:bell\",\n  sun: \"hass:white-balance-sunny\",\n  switch: \"hass:flash\",\n  timer: \"hass:timer\",\n  updater: \"hass:cloud-upload\",\n  vacuum: \"hass:robot-vacuum\",\n  water_heater: \"hass:thermometer\",\n  weather: \"hass:weather-cloudy\",\n  weblink: \"hass:open-in-new\",\n};\n\nexport default function domainIcon(domain: string, state?: string): string {\n  if (domain in fixedIcons) {\n    return fixedIcons[domain];\n  }\n\n  switch (domain) {\n    case \"alarm_control_panel\":\n      switch (state) {\n        case \"armed_home\":\n          return \"hass:bell-plus\";\n        case \"armed_night\":\n          return \"hass:bell-sleep\";\n        case \"disarmed\":\n          return \"hass:bell-outline\";\n        case \"triggered\":\n          return \"hass:bell-ring\";\n        default:\n          return \"hass:bell\";\n      }\n\n    case \"binary_sensor\":\n      return state && state === \"off\"\n        ? \"hass:radiobox-blank\"\n        : \"hass:checkbox-marked-circle\";\n\n    case \"cover\":\n      return state === \"closed\" ? \"hass:window-closed\" : \"hass:window-open\";\n\n    case \"lock\":\n      return state && state === \"unlocked\" ? \"hass:lock-open\" : \"hass:lock\";\n\n    case \"media_player\":\n      return state && state !== \"off\" && state !== \"idle\"\n        ? \"hass:cast-connected\"\n        : \"hass:cast\";\n\n    case \"zwave\":\n      switch (state) {\n        case \"dead\":\n          return \"hass:emoticon-dead\";\n        case \"sleeping\":\n          return \"hass:sleep\";\n        case \"initializing\":\n          return \"hass:timer-sand\";\n        default:\n          return \"hass:z-wave\";\n      }\n\n    default:\n      // tslint:disable-next-line\n      console.warn(\n        \"Unable to find icon for domain \" + domain + \" (\" + state + \")\"\n      );\n      return DEFAULT_DOMAIN_ICON;\n  }\n}\n","import { Constructor } from \"lit-element\";\nimport \"@polymer/iron-icon/iron-icon\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { IronIconElement } from \"@polymer/iron-icon/iron-icon\";\n\nconst ironIconClass = customElements.get(\"iron-icon\") as Constructor<\n  IronIconElement\n>;\n\nlet loaded = false;\n\nexport class HaIcon extends ironIconClass {\n  private _iconsetName?: string;\n\n  public listen(\n    node: EventTarget | null,\n    eventName: string,\n    methodName: string\n  ): void {\n    super.listen(node, eventName, methodName);\n\n    if (!loaded && this._iconsetName === \"mdi\") {\n      loaded = true;\n      import(/* webpackChunkName: \"mdi-icons\" */ \"../resources/mdi-icons\");\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon\": HaIcon;\n  }\n}\n\ncustomElements.define(\"ha-icon\", HaIcon);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/typography.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/*\nUse `<paper-item-body>` in a `<paper-item>` or `<paper-icon-item>` to make two-\nor three- line items. It is a flex item that is a vertical flexbox.\n\n    <paper-item>\n      <paper-item-body two-line>\n        <div>Show your status</div>\n        <div secondary>Your status is visible to everyone</div>\n      </paper-item-body>\n    </paper-item>\n\nThe child elements with the `secondary` attribute is given secondary text\nstyling.\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-body-two-line-min-height` | Minimum height of a two-line item | `72px`\n`--paper-item-body-three-line-min-height` | Minimum height of a three-line item | `88px`\n`--paper-item-body-secondary-color` | Foreground color for the `secondary` area | `--secondary-text-color`\n`--paper-item-body-secondary` | Mixin applied to the `secondary` area | `{}`\n\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        overflow: hidden; /* needed for text-overflow: ellipsis to work on ff */\n        @apply --layout-vertical;\n        @apply --layout-center-justified;\n        @apply --layout-flex;\n      }\n\n      :host([two-line]) {\n        min-height: var(--paper-item-body-two-line-min-height, 72px);\n      }\n\n      :host([three-line]) {\n        min-height: var(--paper-item-body-three-line-min-height, 88px);\n      }\n\n      :host > ::slotted(*) {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n\n      :host > ::slotted([secondary]) {\n        @apply --paper-font-body1;\n\n        color: var(--paper-item-body-secondary-color, var(--secondary-text-color));\n\n        @apply --paper-item-body-secondary;\n      }\n    </style>\n\n    <slot></slot>\n`,\n\n  is: 'paper-item-body'\n});\n","/**\n * Virtual DOM Node\n * @typedef VNode\n * @property {string | function} nodeName The string of the DOM node to create or Component constructor to render\n * @property {Array<VNode | string>} children The children of node\n * @property {string | number | undefined} key The key used to identify this VNode in a list\n * @property {object} attributes The properties of this VNode\n */\nexport const VNode = function VNode() {};\n","/**\n * @typedef {import('./component').Component} Component\n * @typedef {import('./vnode').VNode} VNode\n */\n\n/**\n * Global options\n * @public\n * @typedef Options\n * @property {boolean} [syncComponentUpdates] If `true`, `prop` changes trigger synchronous component updates. Defaults to true.\n * @property {(vnode: VNode) => void} [vnode] Processes all created VNodes.\n * @property {(component: Component) => void} [afterMount] Hook invoked after a component is mounted.\n * @property {(component: Component) => void} [afterUpdate] Hook invoked after the DOM is updated with a component's latest render.\n * @property {(component: Component) => void} [beforeUnmount] Hook invoked immediately before a component is unmounted.\n * @property {(rerender: function) => void} [debounceRendering] Hook invoked whenever a rerender is requested. Can be used to debounce rerenders.\n * @property {(event: Event) => Event | void} [event] Hook invoked before any Preact event listeners. The return value (if any) replaces the native browser event given to event listeners\n */\n\n/** @type {Options}  */\nconst options = {};\n\nexport default options;\n","import { VNode } from './vnode';\nimport options from './options';\n\n\nconst stack = [];\n\nconst EMPTY_CHILDREN = [];\n\n/**\n * JSX/hyperscript reviver.\n * @see http://jasonformat.com/wtf-is-jsx\n * Benchmarks: https://esbench.com/bench/57ee8f8e330ab09900a1a1a0\n *\n * Note: this is exported as both `h()` and `createElement()` for compatibility\n * reasons.\n *\n * Creates a VNode (virtual DOM element). A tree of VNodes can be used as a\n * lightweight representation of the structure of a DOM tree. This structure can\n * be realized by recursively comparing it against the current _actual_ DOM\n * structure, and applying only the differences.\n *\n * `h()`/`createElement()` accepts an element name, a list of attributes/props,\n * and optionally children to append to the element.\n *\n * @example The following DOM tree\n *\n * `<div id=\"foo\" name=\"bar\">Hello!</div>`\n *\n * can be constructed using this function as:\n *\n * `h('div', { id: 'foo', name : 'bar' }, 'Hello!');`\n *\n * @param {string | function} nodeName An element name. Ex: `div`, `a`, `span`, etc.\n * @param {object | null} attributes Any attributes/props to set on the created element.\n * @param {VNode[]} [rest] Additional arguments are taken to be children to\n *  append. Can be infinitely nested Arrays.\n *\n * @public\n */\nexport function h(nodeName, attributes) {\n\tlet children=EMPTY_CHILDREN, lastSimple, child, simple, i;\n\tfor (i=arguments.length; i-- > 2; ) {\n\t\tstack.push(arguments[i]);\n\t}\n\tif (attributes && attributes.children!=null) {\n\t\tif (!stack.length) stack.push(attributes.children);\n\t\tdelete attributes.children;\n\t}\n\twhile (stack.length) {\n\t\tif ((child = stack.pop()) && child.pop!==undefined) {\n\t\t\tfor (i=child.length; i--; ) stack.push(child[i]);\n\t\t}\n\t\telse {\n\t\t\tif (typeof child==='boolean') child = null;\n\n\t\t\tif ((simple = typeof nodeName!=='function')) {\n\t\t\t\tif (child==null) child = '';\n\t\t\t\telse if (typeof child==='number') child = String(child);\n\t\t\t\telse if (typeof child!=='string') simple = false;\n\t\t\t}\n\n\t\t\tif (simple && lastSimple) {\n\t\t\t\tchildren[children.length-1] += child;\n\t\t\t}\n\t\t\telse if (children===EMPTY_CHILDREN) {\n\t\t\t\tchildren = [child];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tchildren.push(child);\n\t\t\t}\n\n\t\t\tlastSimple = simple;\n\t\t}\n\t}\n\n\tlet p = new VNode();\n\tp.nodeName = nodeName;\n\tp.children = children;\n\tp.attributes = attributes==null ? undefined : attributes;\n\tp.key = attributes==null ? undefined : attributes.key;\n\n\t// if a \"vnode hook\" is defined, pass every created VNode to it\n\tif (options.vnode!==undefined) options.vnode(p);\n\n\treturn p;\n}\n","/**\n * Copy all properties from `props` onto `obj`.\n * @param {object} obj Object onto which properties should be copied.\n * @param {object} props Object from which to copy properties.\n * @returns {object}\n * @private\n */\nexport function extend(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn obj;\n}\n\n/** Invoke or update a ref, depending on whether it is a function or object ref.\n *  @param {object|function} [ref=null]\n *  @param {any} [value]\n */\nexport function applyRef(ref, value) {\n\tif (ref!=null) {\n\t\tif (typeof ref=='function') ref(value);\n\t\telse ref.current = value;\n\t}\n}\n\n/**\n * Call a function asynchronously, as soon as possible. Makes\n * use of HTML Promise to schedule the callback if available,\n * otherwise falling back to `setTimeout` (mainly for IE<11).\n * @type {(callback: function) => void}\n */\nexport const defer = typeof Promise=='function' ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout;\n","import { extend } from './util';\nimport { h } from './h';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {import('./vnode').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./vnode').VNode>} [rest] Any additional arguments will be used as replacement\n *  children.\n */\nexport function cloneElement(vnode, props) {\n\treturn h(\n\t\tvnode.nodeName,\n\t\textend(extend({}, vnode.attributes), props),\n\t\targuments.length>2 ? [].slice.call(arguments, 2) : vnode.children\n\t);\n}\n","// render modes\n\n/** Do not re-render a component */\nexport const NO_RENDER = 0;\n/** Synchronously re-render a component and its children */\nexport const SYNC_RENDER = 1;\n/** Synchronously re-render a component, even if its lifecycle methods attempt to prevent it. */\nexport const FORCE_RENDER = 2;\n/** Queue asynchronous re-render of a component and it's children */\nexport const ASYNC_RENDER = 3;\n\n\nexport const ATTR_KEY = '__preactattr_';\n\n/** DOM properties that should NOT have \"px\" added when numeric */\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n\n","import options from './options';\nimport { defer } from './util';\nimport { renderComponent } from './vdom/component';\n\n/**\n * Managed queue of dirty components to be re-rendered\n * @type {Array<import('./component').Component>}\n */\nlet items = [];\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./component').Component} component The component to rerender\n */\nexport function enqueueRender(component) {\n\tif (!component._dirty && (component._dirty = true) && items.push(component)==1) {\n\t\t(options.debounceRendering || defer)(rerender);\n\t}\n}\n\n/** Rerender all enqueued dirty components */\nexport function rerender() {\n\tlet p;\n\twhile ( (p = items.pop()) ) {\n\t\tif (p._dirty) renderComponent(p);\n\t}\n}\n","import { extend } from '../util';\n\n\n/**\n * Check if two nodes are equivalent.\n * @param {import('../dom').PreactElement} node DOM Node to compare\n * @param {import('../vnode').VNode} vnode Virtual DOM node to compare\n * @param {boolean} [hydrating=false] If true, ignores component constructors\n *  when comparing.\n * @private\n */\nexport function isSameNodeType(node, vnode, hydrating) {\n\tif (typeof vnode==='string' || typeof vnode==='number') {\n\t\treturn node.splitText!==undefined;\n\t}\n\tif (typeof vnode.nodeName==='string') {\n\t\treturn !node._componentConstructor && isNamedNode(node, vnode.nodeName);\n\t}\n\treturn hydrating || node._componentConstructor===vnode.nodeName;\n}\n\n\n/**\n * Check if an Element has a given nodeName, case-insensitively.\n * @param {import('../dom').PreactElement} node A DOM Element to inspect the name of.\n * @param {string} nodeName Unnormalized name to compare against.\n */\nexport function isNamedNode(node, nodeName) {\n\treturn node.normalizedNodeName===nodeName || node.nodeName.toLowerCase()===nodeName.toLowerCase();\n}\n\n\n/**\n * Reconstruct Component-style `props` from a VNode.\n * Ensures default/fallback values from `defaultProps`:\n * Own-properties of `defaultProps` not present in `vnode.attributes` are added.\n * @param {import('../vnode').VNode} vnode The VNode to get props for\n * @returns {object} The props to use for this VNode\n */\nexport function getNodeProps(vnode) {\n\tlet props = extend({}, vnode.attributes);\n\tprops.children = vnode.children;\n\n\tlet defaultProps = vnode.nodeName.defaultProps;\n\tif (defaultProps!==undefined) {\n\t\tfor (let i in defaultProps) {\n\t\t\tif (props[i]===undefined) {\n\t\t\t\tprops[i] = defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn props;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport { applyRef } from '../util';\nimport options from '../options';\n\n/**\n * A DOM event listener\n * @typedef {(e: Event) => void} EventListner\n */\n\n/**\n * A mapping of event types to event listeners\n * @typedef {Object.<string, EventListener>} EventListenerMap\n */\n\n/**\n * Properties Preact adds to elements it creates\n * @typedef PreactElementExtensions\n * @property {string} [normalizedNodeName] A normalized node name to use in diffing\n * @property {EventListenerMap} [_listeners] A map of event listeners added by components to this DOM node\n * @property {import('../component').Component} [_component] The component that rendered this DOM node\n * @property {function} [_componentConstructor] The constructor of the component that rendered this DOM node\n */\n\n/**\n * A DOM element that has been extended with Preact properties\n * @typedef {Element & ElementCSSInlineStyle & PreactElementExtensions} PreactElement\n */\n\n/**\n * Create an element with the given nodeName.\n * @param {string} nodeName The DOM node to create\n * @param {boolean} [isSvg=false] If `true`, creates an element within the SVG\n *  namespace.\n * @returns {PreactElement} The created DOM node\n */\nexport function createNode(nodeName, isSvg) {\n\t/** @type {PreactElement} */\n\tlet node = isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName);\n\tnode.normalizedNodeName = nodeName;\n\treturn node;\n}\n\n\n/**\n * Remove a child node from its parent if attached.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\n\n/**\n * Set a named attribute on the given Node, with special behavior for some names\n * and event handlers. If `value` is `null`, the attribute/handler will be\n * removed.\n * @param {PreactElement} node An element to mutate\n * @param {string} name The name/key to set, such as an event or attribute name\n * @param {*} old The last value that was set for this name/node pair\n * @param {*} value An attribute value, such as a function to be used as an\n *  event handler\n * @param {boolean} isSvg Are we currently diffing inside an svg?\n * @private\n */\nexport function setAccessor(node, name, old, value, isSvg) {\n\tif (name==='className') name = 'class';\n\n\n\tif (name==='key') {\n\t\t// ignore\n\t}\n\telse if (name==='ref') {\n\t\tapplyRef(old, null);\n\t\tapplyRef(value, node);\n\t}\n\telse if (name==='class' && !isSvg) {\n\t\tnode.className = value || '';\n\t}\n\telse if (name==='style') {\n\t\tif (!value || typeof value==='string' || typeof old==='string') {\n\t\t\tnode.style.cssText = value || '';\n\t\t}\n\t\tif (value && typeof value==='object') {\n\t\t\tif (typeof old!=='string') {\n\t\t\t\tfor (let i in old) if (!(i in value)) node.style[i] = '';\n\t\t\t}\n\t\t\tfor (let i in value) {\n\t\t\t\tnode.style[i] = typeof value[i]==='number' && IS_NON_DIMENSIONAL.test(i)===false ? (value[i]+'px') : value[i];\n\t\t\t}\n\t\t}\n\t}\n\telse if (name==='dangerouslySetInnerHTML') {\n\t\tif (value) node.innerHTML = value.__html || '';\n\t}\n\telse if (name[0]=='o' && name[1]=='n') {\n\t\tlet useCapture = name !== (name=name.replace(/Capture$/, ''));\n\t\tname = name.toLowerCase().substring(2);\n\t\tif (value) {\n\t\t\tif (!old) node.addEventListener(name, eventProxy, useCapture);\n\t\t}\n\t\telse {\n\t\t\tnode.removeEventListener(name, eventProxy, useCapture);\n\t\t}\n\t\t(node._listeners || (node._listeners = {}))[name] = value;\n\t}\n\telse if (name!=='list' && name!=='type' && !isSvg && name in node) {\n\t\t// Attempt to set a DOM property to the given value.\n\t\t// IE & FF throw for certain property-value combinations.\n\t\ttry {\n\t\t\tnode[name] = value==null ? '' : value;\n\t\t} catch (e) { }\n\t\tif ((value==null || value===false) && name!='spellcheck') node.removeAttribute(name);\n\t}\n\telse {\n\t\tlet ns = isSvg && (name !== (name = name.replace(/^xlink:?/, '')));\n\t\t// spellcheck is treated differently than all other boolean values and\n\t\t// should not be removed when the value is `false`. See:\n\t\t// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-spellcheck\n\t\tif (value==null || value===false) {\n\t\t\tif (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase());\n\t\t\telse node.removeAttribute(name);\n\t\t}\n\t\telse if (typeof value!=='function') {\n\t\t\tif (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase(), value);\n\t\t\telse node.setAttribute(name, value);\n\t\t}\n\t}\n}\n\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\treturn this._listeners[e.type](options.event && options.event(e) || e);\n}\n","import { ATTR_KEY } from '../constants';\nimport { isSameNodeType, isNamedNode } from './index';\nimport { buildComponentFromVNode } from './component';\nimport { createNode, setAccessor } from '../dom/index';\nimport { unmountComponent } from './component';\nimport options from '../options';\nimport { applyRef } from '../util';\nimport { removeNode } from '../dom/index';\n\n/**\n * Queue of components that have been mounted and are awaiting componentDidMount\n * @type {Array<import('../component').Component>}\n */\nexport const mounts = [];\n\n/** Diff recursion count, used to track the end of the diff cycle. */\nexport let diffLevel = 0;\n\n/** Global flag indicating if the diff is currently within an SVG */\nlet isSvgMode = false;\n\n/** Global flag indicating if the diff is performing hydration */\nlet hydrating = false;\n\n/** Invoke queued componentDidMount lifecycle methods */\nexport function flushMounts() {\n\tlet c;\n\twhile ((c = mounts.shift())) {\n\t\tif (options.afterMount) options.afterMount(c);\n\t\tif (c.componentDidMount) c.componentDidMount();\n\t}\n}\n\n\n/**\n * Apply differences in a given vnode (and it's deep children) to a real DOM Node.\n * @param {import('../dom').PreactElement} dom A DOM node to mutate into the shape of a `vnode`\n * @param {import('../vnode').VNode} vnode A VNode (with descendants forming a tree) representing\n *  the desired DOM structure\n * @param {object} context The current context\n * @param {boolean} mountAll Whether or not to immediately mount all components\n * @param {Element} parent ?\n * @param {boolean} componentRoot ?\n * @returns {import('../dom').PreactElement} The created/mutated element\n * @private\n */\nexport function diff(dom, vnode, context, mountAll, parent, componentRoot) {\n\t// diffLevel having been 0 here indicates initial entry into the diff (not a subdiff)\n\tif (!diffLevel++) {\n\t\t// when first starting the diff, check if we're diffing an SVG or within an SVG\n\t\tisSvgMode = parent!=null && parent.ownerSVGElement!==undefined;\n\n\t\t// hydration is indicated by the existing element to be diffed not having a prop cache\n\t\thydrating = dom!=null && !(ATTR_KEY in dom);\n\t}\n\n\tlet ret = idiff(dom, vnode, context, mountAll, componentRoot);\n\n\t// append the element if its a new parent\n\tif (parent && ret.parentNode!==parent) parent.appendChild(ret);\n\n\t// diffLevel being reduced to 0 means we're exiting the diff\n\tif (!--diffLevel) {\n\t\thydrating = false;\n\t\t// invoke queued componentDidMount lifecycle methods\n\t\tif (!componentRoot) flushMounts();\n\t}\n\n\treturn ret;\n}\n\n\n/**\n * Internals of `diff()`, separated to allow bypassing diffLevel / mount flushing.\n * @param {import('../dom').PreactElement} dom A DOM node to mutate into the shape of a `vnode`\n * @param {import('../vnode').VNode} vnode A VNode (with descendants forming a tree) representing the desired DOM structure\n * @param {object} context The current context\n * @param {boolean} mountAll Whether or not to immediately mount all components\n * @param {boolean} [componentRoot] ?\n * @private\n */\nfunction idiff(dom, vnode, context, mountAll, componentRoot) {\n\tlet out = dom,\n\t\tprevSvgMode = isSvgMode;\n\n\t// empty values (null, undefined, booleans) render as empty Text nodes\n\tif (vnode==null || typeof vnode==='boolean') vnode = '';\n\n\n\t// Fast case: Strings & Numbers create/update Text nodes.\n\tif (typeof vnode==='string' || typeof vnode==='number') {\n\n\t\t// update if it's already a Text node:\n\t\tif (dom && dom.splitText!==undefined && dom.parentNode && (!dom._component || componentRoot)) {\n\t\t\t/* istanbul ignore if */ /* Browser quirk that can't be covered: https://github.com/developit/preact/commit/fd4f21f5c45dfd75151bd27b4c217d8003aa5eb9 */\n\t\t\tif (dom.nodeValue!=vnode) {\n\t\t\t\tdom.nodeValue = vnode;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// it wasn't a Text node: replace it with one and recycle the old Element\n\t\t\tout = document.createTextNode(vnode);\n\t\t\tif (dom) {\n\t\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\t\t\t\trecollectNodeTree(dom, true);\n\t\t\t}\n\t\t}\n\n\t\tout[ATTR_KEY] = true;\n\n\t\treturn out;\n\t}\n\n\n\t// If the VNode represents a Component, perform a component diff:\n\tlet vnodeName = vnode.nodeName;\n\tif (typeof vnodeName==='function') {\n\t\treturn buildComponentFromVNode(dom, vnode, context, mountAll);\n\t}\n\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tisSvgMode = vnodeName==='svg' ? true : vnodeName==='foreignObject' ? false : isSvgMode;\n\n\n\t// If there's no existing element or it's the wrong type, create a new one:\n\tvnodeName = String(vnodeName);\n\tif (!dom || !isNamedNode(dom, vnodeName)) {\n\t\tout = createNode(vnodeName, isSvgMode);\n\n\t\tif (dom) {\n\t\t\t// move children into the replacement node\n\t\t\twhile (dom.firstChild) out.appendChild(dom.firstChild);\n\n\t\t\t// if the previous Element was mounted into the DOM, replace it inline\n\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\n\t\t\t// recycle the old element (skips non-Element node types)\n\t\t\trecollectNodeTree(dom, true);\n\t\t}\n\t}\n\n\n\tlet fc = out.firstChild,\n\t\tprops = out[ATTR_KEY],\n\t\tvchildren = vnode.children;\n\n\tif (props==null) {\n\t\tprops = out[ATTR_KEY] = {};\n\t\tfor (let a=out.attributes, i=a.length; i--; ) props[a[i].name] = a[i].value;\n\t}\n\n\t// Optimization: fast-path for elements containing a single TextNode:\n\tif (!hydrating && vchildren && vchildren.length===1 && typeof vchildren[0]==='string' && fc!=null && fc.splitText!==undefined && fc.nextSibling==null) {\n\t\tif (fc.nodeValue!=vchildren[0]) {\n\t\t\tfc.nodeValue = vchildren[0];\n\t\t}\n\t}\n\t// otherwise, if there are existing or new children, diff them:\n\telse if (vchildren && vchildren.length || fc!=null) {\n\t\tinnerDiffNode(out, vchildren, context, mountAll, hydrating || props.dangerouslySetInnerHTML!=null);\n\t}\n\n\n\t// Apply attributes/props from VNode to the DOM Element:\n\tdiffAttributes(out, vnode.attributes, props);\n\n\n\t// restore previous SVG mode: (in case we're exiting an SVG namespace)\n\tisSvgMode = prevSvgMode;\n\n\treturn out;\n}\n\n\n/**\n * Apply child and attribute changes between a VNode and a DOM Node to the DOM.\n * @param {import('../dom').PreactElement} dom Element whose children should be compared & mutated\n * @param {Array<import('../vnode').VNode>} vchildren Array of VNodes to compare to `dom.childNodes`\n * @param {object} context Implicitly descendant context object (from most\n *  recent `getChildContext()`)\n * @param {boolean} mountAll Whether or not to immediately mount all components\n * @param {boolean} isHydrating if `true`, consumes externally created elements\n *  similar to hydration\n */\nfunction innerDiffNode(dom, vchildren, context, mountAll, isHydrating) {\n\tlet originalChildren = dom.childNodes,\n\t\tchildren = [],\n\t\tkeyed = {},\n\t\tkeyedLen = 0,\n\t\tmin = 0,\n\t\tlen = originalChildren.length,\n\t\tchildrenLen = 0,\n\t\tvlen = vchildren ? vchildren.length : 0,\n\t\tj, c, f, vchild, child;\n\n\t// Build up a map of keyed children and an Array of unkeyed children:\n\tif (len!==0) {\n\t\tfor (let i=0; i<len; i++) {\n\t\t\tlet child = originalChildren[i],\n\t\t\t\tprops = child[ATTR_KEY],\n\t\t\t\tkey = vlen && props ? child._component ? child._component.__key : props.key : null;\n\t\t\tif (key!=null) {\n\t\t\t\tkeyedLen++;\n\t\t\t\tkeyed[key] = child;\n\t\t\t}\n\t\t\telse if (props || (child.splitText!==undefined ? (isHydrating ? child.nodeValue.trim() : true) : isHydrating)) {\n\t\t\t\tchildren[childrenLen++] = child;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (vlen!==0) {\n\t\tfor (let i=0; i<vlen; i++) {\n\t\t\tvchild = vchildren[i];\n\t\t\tchild = null;\n\n\t\t\t// attempt to find a node based on key matching\n\t\t\tlet key = vchild.key;\n\t\t\tif (key!=null) {\n\t\t\t\tif (keyedLen && keyed[key]!==undefined) {\n\t\t\t\t\tchild = keyed[key];\n\t\t\t\t\tkeyed[key] = undefined;\n\t\t\t\t\tkeyedLen--;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// attempt to pluck a node of the same type from the existing children\n\t\t\telse if (min<childrenLen) {\n\t\t\t\tfor (j=min; j<childrenLen; j++) {\n\t\t\t\t\tif (children[j]!==undefined && isSameNodeType(c = children[j], vchild, isHydrating)) {\n\t\t\t\t\t\tchild = c;\n\t\t\t\t\t\tchildren[j] = undefined;\n\t\t\t\t\t\tif (j===childrenLen-1) childrenLen--;\n\t\t\t\t\t\tif (j===min) min++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// morph the matched/found/created DOM child to match vchild (deep)\n\t\t\tchild = idiff(child, vchild, context, mountAll);\n\n\t\t\tf = originalChildren[i];\n\t\t\tif (child && child!==dom && child!==f) {\n\t\t\t\tif (f==null) {\n\t\t\t\t\tdom.appendChild(child);\n\t\t\t\t}\n\t\t\t\telse if (child===f.nextSibling) {\n\t\t\t\t\tremoveNode(f);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdom.insertBefore(child, f);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\t// remove unused keyed children:\n\tif (keyedLen) {\n\t\tfor (let i in keyed) if (keyed[i]!==undefined) recollectNodeTree(keyed[i], false);\n\t}\n\n\t// remove orphaned unkeyed children:\n\twhile (min<=childrenLen) {\n\t\tif ((child = children[childrenLen--])!==undefined) recollectNodeTree(child, false);\n\t}\n}\n\n\n\n/**\n * Recursively recycle (or just unmount) a node and its descendants.\n * @param {import('../dom').PreactElement} node DOM node to start\n *  unmount/removal from\n * @param {boolean} [unmountOnly=false] If `true`, only triggers unmount\n *  lifecycle, skips removal\n */\nexport function recollectNodeTree(node, unmountOnly) {\n\tlet component = node._component;\n\tif (component) {\n\t\t// if node is owned by a Component, unmount that component (ends up recursing back here)\n\t\tunmountComponent(component);\n\t}\n\telse {\n\t\t// If the node's VNode had a ref function, invoke it with null here.\n\t\t// (this is part of the React spec, and smart for unsetting references)\n\t\tif (node[ATTR_KEY]!=null) applyRef(node[ATTR_KEY].ref, null);\n\n\t\tif (unmountOnly===false || node[ATTR_KEY]==null) {\n\t\t\tremoveNode(node);\n\t\t}\n\n\t\tremoveChildren(node);\n\t}\n}\n\n\n/**\n * Recollect/unmount all children.\n *\t- we use .lastChild here because it causes less reflow than .firstChild\n *\t- it's also cheaper than accessing the .childNodes Live NodeList\n */\nexport function removeChildren(node) {\n\tnode = node.lastChild;\n\twhile (node) {\n\t\tlet next = node.previousSibling;\n\t\trecollectNodeTree(node, true);\n\t\tnode = next;\n\t}\n}\n\n\n/**\n * Apply differences in attributes from a VNode to the given DOM Element.\n * @param {import('../dom').PreactElement} dom Element with attributes to diff `attrs` against\n * @param {object} attrs The desired end-state key-value attribute pairs\n * @param {object} old Current/previous attributes (from previous VNode or\n *  element's prop cache)\n */\nfunction diffAttributes(dom, attrs, old) {\n\tlet name;\n\n\t// remove attributes no longer present on the vnode by setting them to undefined\n\tfor (name in old) {\n\t\tif (!(attrs && attrs[name]!=null) && old[name]!=null) {\n\t\t\tsetAccessor(dom, name, old[name], old[name] = undefined, isSvgMode);\n\t\t}\n\t}\n\n\t// add new & update changed attributes\n\tfor (name in attrs) {\n\t\tif (name!=='children' && name!=='innerHTML' && (!(name in old) || attrs[name]!==(name==='value' || name==='checked' ? dom[name] : old[name]))) {\n\t\t\tsetAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);\n\t\t}\n\t}\n}\n","import { SYNC_RENDER, NO_RENDER, FORCE_RENDER, ASYNC_RENDER, ATTR_KEY } from '../constants';\nimport options from '../options';\nimport { extend, applyRef } from '../util';\nimport { enqueueRender } from '../render-queue';\nimport { getNodeProps } from './index';\nimport { diff, mounts, diffLevel, flushMounts, recollectNodeTree, removeChildren } from './diff';\nimport { createComponent, recyclerComponents } from './component-recycler';\nimport { removeNode } from '../dom/index';\n\n/**\n * Set a component's `props` and possibly re-render the component\n * @param {import('../component').Component} component The Component to set props on\n * @param {object} props The new props\n * @param {number} renderMode Render options - specifies how to re-render the component\n * @param {object} context The new context\n * @param {boolean} mountAll Whether or not to immediately mount all components\n */\nexport function setComponentProps(component, props, renderMode, context, mountAll) {\n\tif (component._disable) return;\n\tcomponent._disable = true;\n\n\tcomponent.__ref = props.ref;\n\tcomponent.__key = props.key;\n\tdelete props.ref;\n\tdelete props.key;\n\n\tif (typeof component.constructor.getDerivedStateFromProps === 'undefined') {\n\t\tif (!component.base || mountAll) {\n\t\t\tif (component.componentWillMount) component.componentWillMount();\n\t\t}\n\t\telse if (component.componentWillReceiveProps) {\n\t\t\tcomponent.componentWillReceiveProps(props, context);\n\t\t}\n\t}\n\n\tif (context && context!==component.context) {\n\t\tif (!component.prevContext) component.prevContext = component.context;\n\t\tcomponent.context = context;\n\t}\n\n\tif (!component.prevProps) component.prevProps = component.props;\n\tcomponent.props = props;\n\n\tcomponent._disable = false;\n\n\tif (renderMode!==NO_RENDER) {\n\t\tif (renderMode===SYNC_RENDER || options.syncComponentUpdates!==false || !component.base) {\n\t\t\trenderComponent(component, SYNC_RENDER, mountAll);\n\t\t}\n\t\telse {\n\t\t\tenqueueRender(component);\n\t\t}\n\t}\n\n\tapplyRef(component.__ref, component);\n}\n\n\n\n/**\n * Render a Component, triggering necessary lifecycle events and taking\n * High-Order Components into account.\n * @param {import('../component').Component} component The component to render\n * @param {number} [renderMode] render mode, see constants.js for available options.\n * @param {boolean} [mountAll] Whether or not to immediately mount all components\n * @param {boolean} [isChild] ?\n * @private\n */\nexport function renderComponent(component, renderMode, mountAll, isChild) {\n\tif (component._disable) return;\n\n\tlet props = component.props,\n\t\tstate = component.state,\n\t\tcontext = component.context,\n\t\tpreviousProps = component.prevProps || props,\n\t\tpreviousState = component.prevState || state,\n\t\tpreviousContext = component.prevContext || context,\n\t\tisUpdate = component.base,\n\t\tnextBase = component.nextBase,\n\t\tinitialBase = isUpdate || nextBase,\n\t\tinitialChildComponent = component._component,\n\t\tskip = false,\n\t\tsnapshot = previousContext,\n\t\trendered, inst, cbase;\n\n\tif (component.constructor.getDerivedStateFromProps) {\n\t\tstate = extend(extend({}, state), component.constructor.getDerivedStateFromProps(props, state));\n\t\tcomponent.state = state;\n\t}\n\n\t// if updating\n\tif (isUpdate) {\n\t\tcomponent.props = previousProps;\n\t\tcomponent.state = previousState;\n\t\tcomponent.context = previousContext;\n\t\tif (renderMode!==FORCE_RENDER\n\t\t\t&& component.shouldComponentUpdate\n\t\t\t&& component.shouldComponentUpdate(props, state, context) === false) {\n\t\t\tskip = true;\n\t\t}\n\t\telse if (component.componentWillUpdate) {\n\t\t\tcomponent.componentWillUpdate(props, state, context);\n\t\t}\n\t\tcomponent.props = props;\n\t\tcomponent.state = state;\n\t\tcomponent.context = context;\n\t}\n\n\tcomponent.prevProps = component.prevState = component.prevContext = component.nextBase = null;\n\tcomponent._dirty = false;\n\n\tif (!skip) {\n\t\trendered = component.render(props, state, context);\n\n\t\t// context to pass to the child, can be updated via (grand-)parent component\n\t\tif (component.getChildContext) {\n\t\t\tcontext = extend(extend({}, context), component.getChildContext());\n\t\t}\n\n\t\tif (isUpdate && component.getSnapshotBeforeUpdate) {\n\t\t\tsnapshot = component.getSnapshotBeforeUpdate(previousProps, previousState);\n\t\t}\n\n\t\tlet childComponent = rendered && rendered.nodeName,\n\t\t\ttoUnmount, base;\n\n\t\tif (typeof childComponent==='function') {\n\t\t\t// set up high order component link\n\n\t\t\tlet childProps = getNodeProps(rendered);\n\t\t\tinst = initialChildComponent;\n\n\t\t\tif (inst && inst.constructor===childComponent && childProps.key==inst.__key) {\n\t\t\t\tsetComponentProps(inst, childProps, SYNC_RENDER, context, false);\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttoUnmount = inst;\n\n\t\t\t\tcomponent._component = inst = createComponent(childComponent, childProps, context);\n\t\t\t\tinst.nextBase = inst.nextBase || nextBase;\n\t\t\t\tinst._parentComponent = component;\n\t\t\t\tsetComponentProps(inst, childProps, NO_RENDER, context, false);\n\t\t\t\trenderComponent(inst, SYNC_RENDER, mountAll, true);\n\t\t\t}\n\n\t\t\tbase = inst.base;\n\t\t}\n\t\telse {\n\t\t\tcbase = initialBase;\n\n\t\t\t// destroy high order component link\n\t\t\ttoUnmount = initialChildComponent;\n\t\t\tif (toUnmount) {\n\t\t\t\tcbase = component._component = null;\n\t\t\t}\n\n\t\t\tif (initialBase || renderMode===SYNC_RENDER) {\n\t\t\t\tif (cbase) cbase._component = null;\n\t\t\t\tbase = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, true);\n\t\t\t}\n\t\t}\n\n\t\tif (initialBase && base!==initialBase && inst!==initialChildComponent) {\n\t\t\tlet baseParent = initialBase.parentNode;\n\t\t\tif (baseParent && base!==baseParent) {\n\t\t\t\tbaseParent.replaceChild(base, initialBase);\n\n\t\t\t\tif (!toUnmount) {\n\t\t\t\t\tinitialBase._component = null;\n\t\t\t\t\trecollectNodeTree(initialBase, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (toUnmount) {\n\t\t\tunmountComponent(toUnmount);\n\t\t}\n\n\t\tcomponent.base = base;\n\t\tif (base && !isChild) {\n\t\t\tlet componentRef = component,\n\t\t\t\tt = component;\n\t\t\twhile ((t=t._parentComponent)) {\n\t\t\t\t(componentRef = t).base = base;\n\t\t\t}\n\t\t\tbase._component = componentRef;\n\t\t\tbase._componentConstructor = componentRef.constructor;\n\t\t}\n\t}\n\n\tif (!isUpdate || mountAll) {\n\t\tmounts.push(component);\n\t}\n\telse if (!skip) {\n\t\t// Ensure that pending componentDidMount() hooks of child components\n\t\t// are called before the componentDidUpdate() hook in the parent.\n\t\t// Note: disabled as it causes duplicate hooks, see https://github.com/developit/preact/issues/750\n\t\t// flushMounts();\n\n\t\tif (component.componentDidUpdate) {\n\t\t\tcomponent.componentDidUpdate(previousProps, previousState, snapshot);\n\t\t}\n\t\tif (options.afterUpdate) options.afterUpdate(component);\n\t}\n\n\twhile (component._renderCallbacks.length) component._renderCallbacks.pop().call(component);\n\n\tif (!diffLevel && !isChild) flushMounts();\n}\n\n\n\n/**\n * Apply the Component referenced by a VNode to the DOM.\n * @param {import('../dom').PreactElement} dom The DOM node to mutate\n * @param {import('../vnode').VNode} vnode A Component-referencing VNode\n * @param {object} context The current context\n * @param {boolean} mountAll Whether or not to immediately mount all components\n * @returns {import('../dom').PreactElement} The created/mutated element\n * @private\n */\nexport function buildComponentFromVNode(dom, vnode, context, mountAll) {\n\tlet c = dom && dom._component,\n\t\toriginalComponent = c,\n\t\toldDom = dom,\n\t\tisDirectOwner = c && dom._componentConstructor===vnode.nodeName,\n\t\tisOwner = isDirectOwner,\n\t\tprops = getNodeProps(vnode);\n\twhile (c && !isOwner && (c=c._parentComponent)) {\n\t\tisOwner = c.constructor===vnode.nodeName;\n\t}\n\n\tif (c && isOwner && (!mountAll || c._component)) {\n\t\tsetComponentProps(c, props, ASYNC_RENDER, context, mountAll);\n\t\tdom = c.base;\n\t}\n\telse {\n\t\tif (originalComponent && !isDirectOwner) {\n\t\t\tunmountComponent(originalComponent);\n\t\t\tdom = oldDom = null;\n\t\t}\n\n\t\tc = createComponent(vnode.nodeName, props, context);\n\t\tif (dom && !c.nextBase) {\n\t\t\tc.nextBase = dom;\n\t\t\t// passing dom/oldDom as nextBase will recycle it if unused, so bypass recycling on L229:\n\t\t\toldDom = null;\n\t\t}\n\t\tsetComponentProps(c, props, SYNC_RENDER, context, mountAll);\n\t\tdom = c.base;\n\n\t\tif (oldDom && dom!==oldDom) {\n\t\t\toldDom._component = null;\n\t\t\trecollectNodeTree(oldDom, false);\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n\n\n/**\n * Remove a component from the DOM and recycle it.\n * @param {import('../component').Component} component The Component instance to unmount\n * @private\n */\nexport function unmountComponent(component) {\n\tif (options.beforeUnmount) options.beforeUnmount(component);\n\n\tlet base = component.base;\n\n\tcomponent._disable = true;\n\n\tif (component.componentWillUnmount) component.componentWillUnmount();\n\n\tcomponent.base = null;\n\n\t// recursively tear down & recollect high-order component children:\n\tlet inner = component._component;\n\tif (inner) {\n\t\tunmountComponent(inner);\n\t}\n\telse if (base) {\n\t\tif (base[ATTR_KEY]!=null) applyRef(base[ATTR_KEY].ref, null);\n\n\t\tcomponent.nextBase = base;\n\n\t\tremoveNode(base);\n\t\trecyclerComponents.push(component);\n\n\t\tremoveChildren(base);\n\t}\n\n\tapplyRef(component.__ref, null);\n}\n","import { Component } from '../component';\n\n/**\n * Retains a pool of Components for re-use.\n * @type {Component[]}\n * @private\n */\nexport const recyclerComponents = [];\n\n\n/**\n * Create a component. Normalizes differences between PFC's and classful\n * Components.\n * @param {function} Ctor The constructor of the component to create\n * @param {object} props The initial props of the component\n * @param {object} context The initial context of the component\n * @returns {import('../component').Component}\n */\nexport function createComponent(Ctor, props, context) {\n\tlet inst, i = recyclerComponents.length;\n\n\tif (Ctor.prototype && Ctor.prototype.render) {\n\t\tinst = new Ctor(props, context);\n\t\tComponent.call(inst, props, context);\n\t}\n\telse {\n\t\tinst = new Component(props, context);\n\t\tinst.constructor = Ctor;\n\t\tinst.render = doRender;\n\t}\n\n\n\twhile (i--) {\n\t\tif (recyclerComponents[i].constructor===Ctor) {\n\t\t\tinst.nextBase = recyclerComponents[i].nextBase;\n\t\t\trecyclerComponents.splice(i, 1);\n\t\t\treturn inst;\n\t\t}\n\t}\n\n\treturn inst;\n}\n\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { FORCE_RENDER } from './constants';\nimport { extend } from './util';\nimport { renderComponent } from './vdom/component';\nimport { enqueueRender } from './render-queue';\n/**\n * Base Component class.\n * Provides `setState()` and `forceUpdate()`, which trigger rendering.\n * @typedef {object} Component\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components' getChildContext\n * @public\n *\n * @example\n * class MyFoo extends Component {\n *   render(props, state) {\n *     return <div />;\n *   }\n * }\n */\nexport function Component(props, context) {\n\tthis._dirty = true;\n\n\t/**\n\t * @public\n\t * @type {object}\n\t */\n\tthis.context = context;\n\n\t/**\n\t * @public\n\t * @type {object}\n\t */\n\tthis.props = props;\n\n\t/**\n\t * @public\n\t * @type {object}\n\t */\n\tthis.state = this.state || {};\n\n\tthis._renderCallbacks = [];\n}\n\n\nextend(Component.prototype, {\n\n\t/**\n\t * Update component state and schedule a re-render.\n\t * @param {object} state A dict of state properties to be shallowly merged\n\t * \tinto the current state, or a function that will produce such a dict. The\n\t * \tfunction is called with the current state and props.\n\t * @param {() => void} callback A function to be called once component state is\n\t * \tupdated\n\t */\n\tsetState(state, callback) {\n\t\tif (!this.prevState) this.prevState = this.state;\n\t\tthis.state = extend(\n\t\t\textend({}, this.state),\n\t\t\ttypeof state === 'function' ? state(this.state, this.props) : state\n\t\t);\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t},\n\n\n\t/**\n\t * Immediately perform a synchronous re-render of the component.\n\t * @param {() => void} callback A function to be called after component is\n\t * \tre-rendered.\n\t * @private\n\t */\n\tforceUpdate(callback) {\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\trenderComponent(this, FORCE_RENDER);\n\t},\n\n\n\t/**\n\t * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n\t * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n\t * @param {object} props Props (eg: JSX attributes) received from parent\n\t * \telement/component\n\t * @param {object} state The component's current state\n\t * @param {object} context Context object, as returned by the nearest\n\t *  ancestor's `getChildContext()`\n\t * @returns {import('./vnode').VNode | void}\n\t */\n\trender() {}\n\n});\n","import {\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  html,\n  property,\n  PropertyValues,\n  query,\n} from \"lit-element\";\nimport \"../ha-icon\";\nimport computeStateDomain from \"../../common/entity/compute_state_domain\";\nimport stateIcon from \"../../common/entity/state_icon\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { HaIcon } from \"../ha-icon\";\n\nclass StateBadge extends LitElement {\n  @property() public stateObj?: HassEntity;\n  @property() public overrideIcon?: string;\n  @query(\"ha-icon\") private _icon!: HaIcon;\n\n  protected render(): TemplateResult | void {\n    const stateObj = this.stateObj;\n\n    if (!stateObj) {\n      return html``;\n    }\n\n    return html`\n      <ha-icon\n        id=\"icon\"\n        data-domain=${computeStateDomain(stateObj)}\n        data-state=${stateObj.state}\n        .icon=${this.overrideIcon || stateIcon(stateObj)}\n      ></ha-icon>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    if (!changedProps.has(\"stateObj\") || !this.stateObj) {\n      return;\n    }\n    const stateObj = this.stateObj;\n\n    const iconStyle: Partial<CSSStyleDeclaration> = {\n      color: \"\",\n      filter: \"\",\n    };\n    const hostStyle: Partial<CSSStyleDeclaration> = {\n      backgroundImage: \"\",\n    };\n    if (stateObj) {\n      // hide icon if we have entity picture\n      if (stateObj.attributes.entity_picture && !this.overrideIcon) {\n        hostStyle.backgroundImage =\n          \"url(\" + stateObj.attributes.entity_picture + \")\";\n        iconStyle.display = \"none\";\n      } else {\n        if (stateObj.attributes.hs_color) {\n          const hue = stateObj.attributes.hs_color[0];\n          const sat = stateObj.attributes.hs_color[1];\n          if (sat > 10) {\n            iconStyle.color = `hsl(${hue}, 100%, ${100 - sat / 2}%)`;\n          }\n        }\n        if (stateObj.attributes.brightness) {\n          const brightness = stateObj.attributes.brightness;\n          if (typeof brightness !== \"number\") {\n            const errorMessage = `Type error: state-badge expected number, but type of ${\n              stateObj.entity_id\n            }.attributes.brightness is ${typeof brightness} (${brightness})`;\n            // tslint:disable-next-line\n            console.warn(errorMessage);\n          }\n          // lowest brighntess will be around 50% (that's pretty dark)\n          iconStyle.filter = `brightness(${(brightness + 245) / 5}%)`;\n        }\n      }\n    }\n    Object.assign(this._icon.style, iconStyle);\n    Object.assign(this.style, hostStyle);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        position: relative;\n        display: inline-block;\n        width: 40px;\n        color: var(--paper-item-icon-color, #44739e);\n        border-radius: 50%;\n        height: 40px;\n        text-align: center;\n        background-size: cover;\n        line-height: 40px;\n      }\n\n      ha-icon {\n        transition: color 0.3s ease-in-out, filter 0.3s ease-in-out;\n      }\n\n      /* Color the icon if light or sun is on */\n      ha-icon[data-domain=\"light\"][data-state=\"on\"],\n      ha-icon[data-domain=\"switch\"][data-state=\"on\"],\n      ha-icon[data-domain=\"binary_sensor\"][data-state=\"on\"],\n      ha-icon[data-domain=\"fan\"][data-state=\"on\"],\n      ha-icon[data-domain=\"sun\"][data-state=\"above_horizon\"] {\n        color: var(--paper-item-icon-active-color, #fdd835);\n      }\n\n      /* Color the icon if unavailable */\n      ha-icon[data-state=\"unavailable\"] {\n        color: var(--state-icon-unavailable-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"state-badge\": StateBadge;\n  }\n}\n\ncustomElements.define(\"state-badge\", StateBadge);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/typography.js';\nimport './paper-item-shared-styles.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {PaperItemBehavior} from './paper-item-behavior.js';\n\n/*\n`<paper-icon-item>` is a convenience element to make an item with icon. It is an\ninteractive list item with a fixed-width icon area, according to Material\nDesign. This is useful if the icons are of varying widths, but you want the item\nbodies to line up. Use this like a `<paper-item>`. The child node with the slot\nname `item-icon` is placed in the icon area.\n\n    <paper-icon-item>\n      <iron-icon icon=\"favorite\" slot=\"item-icon\"></iron-icon>\n      Favorite\n    </paper-icon-item>\n    <paper-icon-item>\n      <div class=\"avatar\" slot=\"item-icon\"></div>\n      Avatar\n    </paper-icon-item>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-icon-width` | Width of the icon area | `56px`\n`--paper-item-icon` | Mixin applied to the icon area | `{}`\n`--paper-icon-item` | Mixin applied to the item | `{}`\n`--paper-item-selected-weight` | The font weight of a selected item | `bold`\n`--paper-item-selected` | Mixin applied to selected paper-items | `{}`\n`--paper-item-disabled-color` | The color for disabled paper-items | `--disabled-text-color`\n`--paper-item-disabled` | Mixin applied to disabled paper-items | `{}`\n`--paper-item-focused` | Mixin applied to focused paper-items | `{}`\n`--paper-item-focused-before` | Mixin applied to :before focused paper-items | `{}`\n\n*/\nPolymer({\n  _template: html`\n    <style include=\"paper-item-shared-styles\"></style>\n    <style>\n      :host {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n        @apply --paper-font-subhead;\n\n        @apply --paper-item;\n        @apply --paper-icon-item;\n      }\n\n      .content-icon {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n\n        width: var(--paper-item-icon-width, 56px);\n        @apply --paper-item-icon;\n      }\n    </style>\n\n    <div id=\"contentIcon\" class=\"content-icon\">\n      <slot name=\"item-icon\"></slot>\n    </div>\n    <slot></slot>\n`,\n\n  is: 'paper-icon-item',\n  behaviors: [PaperItemBehavior]\n});\n","/** Compute the object ID of a state. */\nexport default function computeObjectId(entityId: string): string {\n  return entityId.substr(entityId.indexOf(\".\") + 1);\n}\n","import \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-item/paper-icon-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport \"@vaadin/vaadin-combo-box/vaadin-combo-box-light\";\nimport memoizeOne from \"memoize-one\";\n\nimport \"./state-badge\";\n\nimport computeStateName from \"../../common/entity/compute_state_name\";\nimport {\n  LitElement,\n  TemplateResult,\n  html,\n  css,\n  CSSResult,\n  property,\n  PropertyValues,\n} from \"lit-element\";\nimport { HomeAssistant } from \"../../types\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { PolymerChangedEvent } from \"../../polymer-types\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\n\nexport type HaEntityPickerEntityFilterFunc = (entityId: HassEntity) => boolean;\n\nconst rowRenderer = (\n  root: HTMLElement,\n  _owner,\n  model: { item: HassEntity }\n) => {\n  if (!root.firstElementChild) {\n    root.innerHTML = `\n      <style>\n        paper-icon-item {\n          margin: -10px;\n          padding: 0;\n        }\n      </style>\n      <paper-icon-item>\n        <state-badge state-obj=\"[[item]]\" slot=\"item-icon\"></state-badge>\n        <paper-item-body two-line=\"\">\n          <div class='name'>[[_computeStateName(item)]]</div>\n          <div secondary>[[item.entity_id]]</div>\n        </paper-item-body>\n      </paper-icon-item>\n    `;\n  }\n\n  root.querySelector(\"state-badge\")!.stateObj = model.item;\n  root.querySelector(\".name\")!.textContent = computeStateName(model.item);\n  root.querySelector(\"[secondary]\")!.textContent = model.item.entity_id;\n};\n\nclass HaEntityPicker extends LitElement {\n  @property({ type: Boolean }) public autofocus?: boolean;\n  @property({ type: Boolean }) public disabled?: boolean;\n  @property({ type: Boolean, attribute: \"allow-custom-entity\" })\n  public allowCustomEntity;\n  @property() public hass?: HomeAssistant;\n  @property() public label?: string;\n  @property() public value?: string;\n  @property({ attribute: \"domain-filter\" }) public domainFilter?: string;\n  @property() public entityFilter?: HaEntityPickerEntityFilterFunc;\n  @property({ type: Boolean }) private _opened?: boolean;\n  @property() private _hass?: HomeAssistant;\n\n  private _getStates = memoizeOne(\n    (\n      hass: this[\"hass\"],\n      domainFilter: this[\"domainFilter\"],\n      entityFilter: this[\"entityFilter\"]\n    ) => {\n      let states: HassEntity[] = [];\n\n      if (!hass) {\n        return [];\n      }\n      let entityIds = Object.keys(hass.states);\n\n      if (domainFilter) {\n        entityIds = entityIds.filter(\n          (eid) => eid.substr(0, eid.indexOf(\".\")) === domainFilter\n        );\n      }\n\n      states = entityIds.sort().map((key) => hass!.states[key]);\n\n      if (entityFilter) {\n        states = states.filter(\n          (stateObj) =>\n            // We always want to include the entity of the current value\n            stateObj.entity_id === this.value || entityFilter!(stateObj)\n        );\n      }\n      return states;\n    }\n  );\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n\n    if (changedProps.has(\"hass\") && !this._opened) {\n      this._hass = this.hass;\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    const states = this._getStates(\n      this._hass,\n      this.domainFilter,\n      this.entityFilter\n    );\n\n    return html`\n      <vaadin-combo-box-light\n        item-value-path=\"entity_id\"\n        item-label-path=\"entity_id\"\n        .items=${states}\n        .value=${this._value}\n        .allowCustomValue=${this.allowCustomEntity}\n        .renderer=${rowRenderer}\n        @opened-changed=${this._openedChanged}\n        @value-changed=${this._valueChanged}\n      >\n        <paper-input\n          .autofocus=${this.autofocus}\n          .label=${this.label === undefined && this._hass\n            ? this._hass.localize(\"ui.components.entity.entity-picker.entity\")\n            : this.label}\n          .value=${this._value}\n          .disabled=${this.disabled}\n          class=\"input\"\n          autocapitalize=\"none\"\n          autocomplete=\"off\"\n          autocorrect=\"off\"\n          spellcheck=\"false\"\n        >\n          ${this.value\n            ? html`\n                <paper-icon-button\n                  slot=\"suffix\"\n                  class=\"clear-button\"\n                  icon=\"hass:close\"\n                  no-ripple\n                >\n                  Clear\n                </paper-icon-button>\n              `\n            : \"\"}\n          ${states.length > 0\n            ? html`\n                <paper-icon-button\n                  slot=\"suffix\"\n                  class=\"toggle-button\"\n                  .icon=${this._opened ? \"hass:menu-up\" : \"hass:menu-down\"}\n                >\n                  Toggle\n                </paper-icon-button>\n              `\n            : \"\"}\n        </paper-input>\n      </vaadin-combo-box-light>\n    `;\n  }\n\n  private get _value() {\n    return this.value || \"\";\n  }\n\n  private _openedChanged(ev: PolymerChangedEvent<boolean>) {\n    this._opened = ev.detail.value;\n  }\n\n  private _valueChanged(ev: PolymerChangedEvent<string>) {\n    const newValue = ev.detail.value;\n    if (newValue !== this._value) {\n      this.value = ev.detail.value;\n      setTimeout(() => {\n        fireEvent(this, \"value-changed\", { value: this.value });\n        fireEvent(this, \"change\");\n      }, 0);\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      paper-input > paper-icon-button {\n        width: 24px;\n        height: 24px;\n        padding: 2px;\n        color: var(--secondary-text-color);\n      }\n      [hidden] {\n        display: none;\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"ha-entity-picker\", HaEntityPicker);\n","/** Return an icon representing a sensor state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { UNIT_C, UNIT_F } from \"../const\";\nimport domainIcon from \"./domain_icon\";\n\nconst fixedDeviceClassIcons = {\n  humidity: \"hass:water-percent\",\n  illuminance: \"hass:brightness-5\",\n  temperature: \"hass:thermometer\",\n  pressure: \"hass:gauge\",\n  power: \"hass:flash\",\n  signal_strength: \"hass:wifi\",\n};\n\nexport default function sensorIcon(state: HassEntity) {\n  const dclass = state.attributes.device_class;\n\n  if (dclass && dclass in fixedDeviceClassIcons) {\n    return fixedDeviceClassIcons[dclass];\n  }\n  if (dclass === \"battery\") {\n    const battery = Number(state.state);\n    if (isNaN(battery)) {\n      return \"hass:battery-unknown\";\n    }\n    const batteryRound = Math.round(battery / 10) * 10;\n    if (batteryRound >= 100) {\n      return \"hass:battery\";\n    }\n    if (batteryRound <= 0) {\n      return \"hass:battery-alert\";\n    }\n    // Will return one of the following icons: (listed so extractor picks up)\n    // hass:battery-10\n    // hass:battery-20\n    // hass:battery-30\n    // hass:battery-40\n    // hass:battery-50\n    // hass:battery-60\n    // hass:battery-70\n    // hass:battery-80\n    // hass:battery-90\n    // We obscure 'hass' in iconname so this name does not get picked up\n    return `${\"hass\"}:battery-${batteryRound}`;\n  }\n\n  const unit = state.attributes.unit_of_measurement;\n  if (unit === UNIT_C || unit === UNIT_F) {\n    return \"hass:thermometer\";\n  }\n  return domainIcon(\"sensor\");\n}\n","/** Return an icon representing a state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { DEFAULT_DOMAIN_ICON } from \"../const\";\n\nimport computeDomain from \"./compute_domain\";\nimport domainIcon from \"./domain_icon\";\n\nimport binarySensorIcon from \"./binary_sensor_icon\";\nimport coverIcon from \"./cover_icon\";\nimport sensorIcon from \"./sensor_icon\";\nimport inputDateTimeIcon from \"./input_dateteime_icon\";\n\nconst domainIcons = {\n  binary_sensor: binarySensorIcon,\n  cover: coverIcon,\n  sensor: sensorIcon,\n  input_datetime: inputDateTimeIcon,\n};\n\nexport default function stateIcon(state: HassEntity) {\n  if (!state) {\n    return DEFAULT_DOMAIN_ICON;\n  }\n  if (state.attributes.icon) {\n    return state.attributes.icon;\n  }\n\n  const domain = computeDomain(state.entity_id);\n\n  if (domain in domainIcons) {\n    return domainIcons[domain](state);\n  }\n  return domainIcon(domain, state.state);\n}\n","import { HassEntity } from \"home-assistant-js-websocket\";\n\n/** Return an icon representing a binary sensor state. */\n\nexport default function binarySensorIcon(state: HassEntity) {\n  const activated = state.state && state.state === \"off\";\n  switch (state.attributes.device_class) {\n    case \"battery\":\n      return activated ? \"hass:battery\" : \"hass:battery-outline\";\n    case \"cold\":\n      return activated ? \"hass:thermometer\" : \"hass:snowflake\";\n    case \"connectivity\":\n      return activated ? \"hass:server-network-off\" : \"hass:server-network\";\n    case \"door\":\n      return activated ? \"hass:door-closed\" : \"hass:door-open\";\n    case \"garage_door\":\n      return activated ? \"hass:garage\" : \"hass:garage-open\";\n    case \"gas\":\n    case \"power\":\n    case \"problem\":\n    case \"safety\":\n    case \"smoke\":\n      return activated ? \"hass:shield-check\" : \"hass:alert\";\n    case \"heat\":\n      return activated ? \"hass:thermometer\" : \"hass:fire\";\n    case \"light\":\n      return activated ? \"hass:brightness-5\" : \"hass:brightness-7\";\n    case \"lock\":\n      return activated ? \"hass:lock\" : \"hass:lock-open\";\n    case \"moisture\":\n      return activated ? \"hass:water-off\" : \"hass:water\";\n    case \"motion\":\n      return activated ? \"hass:walk\" : \"hass:run\";\n    case \"occupancy\":\n      return activated ? \"hass:home-outline\" : \"hass:home\";\n    case \"opening\":\n      return activated ? \"hass:square\" : \"hass:square-outline\";\n    case \"plug\":\n      return activated ? \"hass:power-plug-off\" : \"hass:power-plug\";\n    case \"presence\":\n      return activated ? \"hass:home-outline\" : \"hass:home\";\n    case \"sound\":\n      return activated ? \"hass:music-note-off\" : \"hass:music-note\";\n    case \"vibration\":\n      return activated ? \"hass:crop-portrait\" : \"hass:vibrate\";\n    case \"window\":\n      return activated ? \"hass:window-closed\" : \"hass:window-open\";\n    default:\n      return activated ? \"hass:radiobox-blank\" : \"hass:checkbox-marked-circle\";\n  }\n}\n","/** Return an icon representing a cover state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport domainIcon from \"./domain_icon\";\n\nexport default function coverIcon(state: HassEntity): string {\n  const open = state.state !== \"closed\";\n  switch (state.attributes.device_class) {\n    case \"garage\":\n      return open ? \"hass:garage-open\" : \"hass:garage\";\n    default:\n      return domainIcon(\"cover\", state.state);\n  }\n}\n","/** Return an icon representing an input datetime state. */\nimport domainIcon from \"./domain_icon\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\nexport default function inputDateTimeIcon(state: HassEntity): string {\n  if (!state.attributes.has_date) {\n    return \"hass:clock\";\n  }\n  if (!state.attributes.has_time) {\n    return \"hass:calendar\";\n  }\n  return domainIcon(\"input_datetime\");\n}\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../resources/ha-style\";\n\nclass HaConfigSection extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex ha-style\">\n        .content {\n          padding: 28px 20px 0;\n          max-width: 1040px;\n          margin: 0 auto;\n        }\n\n        .header {\n          @apply --paper-font-display1;\n          opacity: var(--dark-primary-opacity);\n        }\n\n        .together {\n          margin-top: 32px;\n        }\n\n        .intro {\n          @apply --paper-font-subhead;\n          width: 100%;\n          max-width: 400px;\n          margin-right: 40px;\n          opacity: var(--dark-primary-opacity);\n        }\n\n        .panel {\n          margin-top: -24px;\n        }\n\n        .panel ::slotted(*) {\n          margin-top: 24px;\n          display: block;\n        }\n\n        .narrow.content {\n          max-width: 640px;\n        }\n        .narrow .together {\n          margin-top: 20px;\n        }\n        .narrow .header {\n          @apply --paper-font-headline;\n        }\n        .narrow .intro {\n          font-size: 14px;\n          padding-bottom: 20px;\n          margin-right: 0;\n          max-width: 500px;\n        }\n      </style>\n      <div class$=\"[[computeContentClasses(isWide)]]\">\n        <div class=\"header\"><slot name=\"header\"></slot></div>\n        <div class$=\"[[computeClasses(isWide)]]\">\n          <div class=\"intro\"><slot name=\"introduction\"></slot></div>\n          <div class=\"panel flex-auto\"><slot></slot></div>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      narrow: {\n        type: Boolean,\n      },\n\n      isWide: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  computeContentClasses(isWide) {\n    var classes = \"content \";\n\n    return isWide ? classes : classes + \"narrow\";\n  }\n\n  computeClasses(isWide) {\n    var classes = \"together layout \";\n\n    return classes + (isWide ? \"horizontal\" : \"vertical narrow\");\n  }\n}\n\ncustomElements.define(\"ha-config-section\", HaConfigSection);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {AppLayoutBehavior} from '../app-layout-behavior/app-layout-behavior.js';\n\n/**\napp-header-layout is a wrapper element that positions an app-header and other\ncontent. This element uses the document scroll by default, but it can also\ndefine its own scrolling region.\n\nUsing the document scroll:\n\n```html\n<app-header-layout>\n  <app-header slot=\"header\" fixed condenses effects=\"waterfall\">\n    <app-toolbar>\n      <div main-title>App name</div>\n    </app-toolbar>\n  </app-header>\n  <div>\n    main content\n  </div>\n</app-header-layout>\n```\n\nUsing an own scrolling region:\n\n```html\n<app-header-layout has-scrolling-region style=\"width: 300px; height: 400px;\">\n  <app-header slot=\"header\" fixed condenses effects=\"waterfall\">\n    <app-toolbar>\n      <div main-title>App name</div>\n    </app-toolbar>\n  </app-header>\n  <div>\n    main content\n  </div>\n</app-header-layout>\n```\n\nAdd the `fullbleed` attribute to app-header-layout to make it fit the size of\nits container:\n\n```html\n<app-header-layout fullbleed>\n ...\n</app-header-layout>\n```\n\n@group App Elements\n@element app-header-layout\n@demo app-header-layout/demo/simple.html Simple Demo\n@demo app-header-layout/demo/scrolling-region.html Scrolling Region\n@demo app-header-layout/demo/music.html Music Demo\n@demo app-header-layout/demo/footer.html Footer Demo\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        /**\n         * Force app-header-layout to have its own stacking context so that its parent can\n         * control the stacking of it relative to other elements (e.g. app-drawer-layout).\n         * This could be done using \\`isolation: isolate\\`, but that's not well supported\n         * across browsers.\n         */\n        position: relative;\n        z-index: 0;\n      }\n\n      #wrapper ::slotted([slot=header]) {\n        @apply --layout-fixed-top;\n        z-index: 1;\n      }\n\n      #wrapper.initializing ::slotted([slot=header]) {\n        position: relative;\n      }\n\n      :host([has-scrolling-region]) {\n        height: 100%;\n      }\n\n      :host([has-scrolling-region]) #wrapper ::slotted([slot=header]) {\n        position: absolute;\n      }\n\n      :host([has-scrolling-region]) #wrapper.initializing ::slotted([slot=header]) {\n        position: relative;\n      }\n\n      :host([has-scrolling-region]) #wrapper #contentContainer {\n        @apply --layout-fit;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n      }\n\n      :host([has-scrolling-region]) #wrapper.initializing #contentContainer {\n        position: relative;\n      }\n\n      :host([fullbleed]) {\n        @apply --layout-vertical;\n        @apply --layout-fit;\n      }\n\n      :host([fullbleed]) #wrapper,\n      :host([fullbleed]) #wrapper #contentContainer {\n        @apply --layout-vertical;\n        @apply --layout-flex;\n      }\n\n      #contentContainer {\n        /* Create a stacking context here so that all children appear below the header. */\n        position: relative;\n        z-index: 0;\n      }\n\n      @media print {\n        :host([has-scrolling-region]) #wrapper #contentContainer {\n          overflow-y: visible;\n        }\n      }\n\n    </style>\n\n    <div id=\"wrapper\" class=\"initializing\">\n      <slot id=\"headerSlot\" name=\"header\"></slot>\n\n      <div id=\"contentContainer\">\n        <slot></slot>\n      </div>\n    </div>\n`,\n\n  is: 'app-header-layout',\n  behaviors: [AppLayoutBehavior],\n\n  properties: {\n    /**\n     * If true, the current element will have its own scrolling region.\n     * Otherwise, it will use the document scroll to control the header.\n     */\n    hasScrollingRegion: {type: Boolean, value: false, reflectToAttribute: true}\n  },\n\n  observers: ['resetLayout(isAttached, hasScrollingRegion)'],\n\n  /**\n   * A reference to the app-header element.\n   *\n   * @property header\n   */\n  get header() {\n    return dom(this.$.headerSlot).getDistributedNodes()[0];\n  },\n\n  _updateLayoutStates: function() {\n    var header = this.header;\n    if (!this.isAttached || !header) {\n      return;\n    }\n    // Remove the initializing class, which staticly positions the header and\n    // the content until the height of the header can be read.\n    this.$.wrapper.classList.remove('initializing');\n    // Update scroll target.\n    header.scrollTarget = this.hasScrollingRegion ?\n        this.$.contentContainer :\n        this.ownerDocument.documentElement;\n    // Get header height here so that style reads are batched together before\n    // style writes (i.e. getBoundingClientRect() below).\n    var headerHeight = header.offsetHeight;\n    // Update the header position.\n    if (!this.hasScrollingRegion) {\n      requestAnimationFrame(function() {\n        var rect = this.getBoundingClientRect();\n        var rightOffset = document.documentElement.clientWidth - rect.right;\n        header.style.left = rect.left + 'px';\n        header.style.right = rightOffset + 'px';\n      }.bind(this));\n    } else {\n      header.style.left = '';\n      header.style.right = '';\n    }\n    // Update the content container position.\n    var containerStyle = this.$.contentContainer.style;\n    if (header.fixed && !header.condenses && this.hasScrollingRegion) {\n      // If the header size does not change and we're using a scrolling region,\n      // exclude the header area from the scrolling region so that the header\n      // doesn't overlap the scrollbar.\n      containerStyle.marginTop = headerHeight + 'px';\n      containerStyle.paddingTop = '';\n    } else {\n      containerStyle.paddingTop = headerHeight + 'px';\n      containerStyle.marginTop = '';\n    }\n  }\n});\n","interface OnChangeComponent {\n  props: {\n    index: number;\n    onChange(index: number, data: object);\n  };\n}\n\nexport function onChangeEvent(this: OnChangeComponent, prop, ev) {\n  const origData = this.props[prop];\n\n  if (ev.target.value === origData[ev.target.name]) {\n    return;\n  }\n\n  const data = { ...origData };\n\n  if (ev.target.value) {\n    data[ev.target.name] = ev.target.value;\n  } else {\n    delete data[ev.target.name];\n  }\n\n  this.props.onChange(this.props.index, data);\n}\n","/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n/**\nMaterial design:\n[Cards](https://www.google.com/design/spec/components/cards.html)\n\nShared styles that you can apply to an element to renders two shadows on top\nof each other,that create the effect of a lifted piece of paper.\n\nExample:\n\n    <custom-style>\n      <style is=\"custom-style\" include=\"paper-material-styles\"></style>\n    </custom-style>\n\n    <div class=\"paper-material\" elevation=\"1\">\n      ... content ...\n    </div>\n\n@group Paper Elements\n@demo demo/index.html\n*/\n\nimport '@polymer/polymer/polymer-legacy.js';\nimport '../shadow.js';\n\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\nconst template = html`\n<dom-module id=\"paper-material-styles\">\n  <template>\n    <style>\n      html {\n        --paper-material: {\n          display: block;\n          position: relative;\n        };\n        --paper-material-elevation-1: {\n          @apply --shadow-elevation-2dp;\n        };\n        --paper-material-elevation-2: {\n          @apply --shadow-elevation-4dp;\n        };\n        --paper-material-elevation-3: {\n          @apply --shadow-elevation-6dp;\n        };\n        --paper-material-elevation-4: {\n          @apply --shadow-elevation-8dp;\n        };\n        --paper-material-elevation-5: {\n          @apply --shadow-elevation-16dp;\n        };\n      }\n      .paper-material {\n        @apply --paper-material;\n      }\n      .paper-material[elevation=\"1\"] {\n        @apply --paper-material-elevation-1;\n      }\n      .paper-material[elevation=\"2\"] {\n        @apply --paper-material-elevation-2;\n      }\n      .paper-material[elevation=\"3\"] {\n        @apply --paper-material-elevation-3;\n      }\n      .paper-material[elevation=\"4\"] {\n        @apply --paper-material-elevation-4;\n      }\n      .paper-material[elevation=\"5\"] {\n        @apply --paper-material-elevation-5;\n      }\n\n      /* Duplicate the styles because of https://github.com/webcomponents/shadycss/issues/193 */\n      :host {\n        --paper-material: {\n          display: block;\n          position: relative;\n        };\n        --paper-material-elevation-1: {\n          @apply --shadow-elevation-2dp;\n        };\n        --paper-material-elevation-2: {\n          @apply --shadow-elevation-4dp;\n        };\n        --paper-material-elevation-3: {\n          @apply --shadow-elevation-6dp;\n        };\n        --paper-material-elevation-4: {\n          @apply --shadow-elevation-8dp;\n        };\n        --paper-material-elevation-5: {\n          @apply --shadow-elevation-16dp;\n        };\n      }\n      :host(.paper-material) {\n        @apply --paper-material;\n      }\n      :host(.paper-material[elevation=\"1\"]) {\n        @apply --paper-material-elevation-1;\n      }\n      :host(.paper-material[elevation=\"2\"]) {\n        @apply --paper-material-elevation-2;\n      }\n      :host(.paper-material[elevation=\"3\"]) {\n        @apply --paper-material-elevation-3;\n      }\n      :host(.paper-material[elevation=\"4\"]) {\n        @apply --paper-material-elevation-4;\n      }\n      :host(.paper-material[elevation=\"5\"]) {\n        @apply --paper-material-elevation-5;\n      }\n    </style>\n  </template>\n</dom-module>`;\ntemplate.setAttribute('style', 'display: none;');\ndocument.head.appendChild(template.content);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\n\nimport {IronControlState} from '@polymer/iron-behaviors/iron-control-state.js';\nimport {IronValidatableBehavior} from '@polymer/iron-validatable-behavior/iron-validatable-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\n`iron-autogrow-textarea` is an element containing a textarea that grows in\nheight as more lines of input are entered. Unless an explicit height or the\n`maxRows` property is set, it will never scroll.\n\nExample:\n\n    <iron-autogrow-textarea></iron-autogrow-textarea>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--iron-autogrow-textarea` | Mixin applied to the textarea | `{}`\n`--iron-autogrow-textarea-placeholder` | Mixin applied to the textarea placeholder | `{}`\n\n@group Iron Elements\n@hero hero.svg\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-block;\n        position: relative;\n        width: 400px;\n        border: 1px solid;\n        padding: 2px;\n        -moz-appearance: textarea;\n        -webkit-appearance: textarea;\n        overflow: hidden;\n      }\n\n      .mirror-text {\n        visibility: hidden;\n        word-wrap: break-word;\n        @apply --iron-autogrow-textarea;\n      }\n\n      .fit {\n        @apply --layout-fit;\n      }\n\n      textarea {\n        position: relative;\n        outline: none;\n        border: none;\n        resize: none;\n        background: inherit;\n        color: inherit;\n        /* see comments in template */\n        width: 100%;\n        height: 100%;\n        font-size: inherit;\n        font-family: inherit;\n        line-height: inherit;\n        text-align: inherit;\n        @apply --iron-autogrow-textarea;\n      }\n\n      textarea::-webkit-input-placeholder {\n        @apply --iron-autogrow-textarea-placeholder;\n      }\n\n      textarea:-moz-placeholder {\n        @apply --iron-autogrow-textarea-placeholder;\n      }\n\n      textarea::-moz-placeholder {\n        @apply --iron-autogrow-textarea-placeholder;\n      }\n\n      textarea:-ms-input-placeholder {\n        @apply --iron-autogrow-textarea-placeholder;\n      }\n    </style>\n\n    <!-- the mirror sizes the input/textarea so it grows with typing -->\n    <!-- use &#160; instead &nbsp; of to allow this element to be used in XHTML -->\n    <div id=\"mirror\" class=\"mirror-text\" aria-hidden=\"true\">&nbsp;</div>\n\n    <!-- size the input/textarea with a div, because the textarea has intrinsic size in ff -->\n    <div class=\"textarea-container fit\">\n      <textarea id=\"textarea\" name\\$=\"[[name]]\" aria-label\\$=\"[[label]]\" autocomplete\\$=\"[[autocomplete]]\" autofocus\\$=\"[[autofocus]]\" inputmode\\$=\"[[inputmode]]\" placeholder\\$=\"[[placeholder]]\" readonly\\$=\"[[readonly]]\" required\\$=\"[[required]]\" disabled\\$=\"[[disabled]]\" rows\\$=\"[[rows]]\" minlength\\$=\"[[minlength]]\" maxlength\\$=\"[[maxlength]]\"></textarea>\n    </div>\n`,\n\n  is: 'iron-autogrow-textarea',\n  behaviors: [IronValidatableBehavior, IronControlState],\n\n  properties: {\n    /**\n     * Use this property instead of `bind-value` for two-way data binding.\n     * @type {string|number}\n     */\n    value: {observer: '_valueChanged', type: String, notify: true},\n\n    /**\n     * This property is deprecated, and just mirrors `value`. Use `value`\n     * instead.\n     * @type {string|number}\n     */\n    bindValue: {observer: '_bindValueChanged', type: String, notify: true},\n\n    /**\n     * The initial number of rows.\n     *\n     * @attribute rows\n     * @type number\n     * @default 1\n     */\n    rows: {type: Number, value: 1, observer: '_updateCached'},\n\n    /**\n     * The maximum number of rows this element can grow to until it\n     * scrolls. 0 means no maximum.\n     *\n     * @attribute maxRows\n     * @type number\n     * @default 0\n     */\n    maxRows: {type: Number, value: 0, observer: '_updateCached'},\n\n    /**\n     * Bound to the textarea's `autocomplete` attribute.\n     */\n    autocomplete: {type: String, value: 'off'},\n\n    /**\n     * Bound to the textarea's `autofocus` attribute.\n     */\n    autofocus: {type: Boolean, value: false},\n\n    /**\n     * Bound to the textarea's `inputmode` attribute.\n     */\n    inputmode: {type: String},\n\n    /**\n     * Bound to the textarea's `placeholder` attribute.\n     */\n    placeholder: {type: String},\n\n    /**\n     * Bound to the textarea's `readonly` attribute.\n     */\n    readonly: {type: String},\n\n    /**\n     * Set to true to mark the textarea as required.\n     */\n    required: {type: Boolean},\n\n    /**\n     * The minimum length of the input value.\n     */\n    minlength: {type: Number},\n\n    /**\n     * The maximum length of the input value.\n     */\n    maxlength: {type: Number},\n\n    /**\n     * Bound to the textarea's `aria-label` attribute.\n     */\n    label: {type: String}\n\n  },\n\n  listeners: {'input': '_onInput'},\n\n  /**\n   * Returns the underlying textarea.\n   * @return {!HTMLTextAreaElement}\n   */\n  get textarea() {\n    return this.$.textarea;\n  },\n\n  /**\n   * Returns textarea's selection start.\n   * @return {number}\n   */\n  get selectionStart() {\n    return this.$.textarea.selectionStart;\n  },\n\n  /**\n   * Returns textarea's selection end.\n   * @return {number}\n   */\n  get selectionEnd() {\n    return this.$.textarea.selectionEnd;\n  },\n\n  /**\n   * Sets the textarea's selection start.\n   */\n  set selectionStart(value) {\n    this.$.textarea.selectionStart = value;\n  },\n\n  /**\n   * Sets the textarea's selection end.\n   */\n  set selectionEnd(value) {\n    this.$.textarea.selectionEnd = value;\n  },\n\n  attached: function() {\n    /* iOS has an arbitrary left margin of 3px that isn't present\n     * in any other browser, and means that the paper-textarea's cursor\n     * overlaps the label.\n     * See https://github.com/PolymerElements/paper-input/issues/468.\n     */\n    var IS_IOS = navigator.userAgent.match(/iP(?:[oa]d|hone)/);\n    if (IS_IOS) {\n      this.$.textarea.style.marginLeft = '-3px';\n    }\n  },\n\n  /**\n   * Returns true if `value` is valid. The validator provided in `validator`\n   * will be used first, if it exists; otherwise, the `textarea`'s validity\n   * is used.\n   * @return {boolean} True if the value is valid.\n   */\n  validate: function() {\n    // Use the nested input's native validity.\n    var valid = this.$.textarea.validity.valid;\n\n    // Only do extra checking if the browser thought this was valid.\n    if (valid) {\n      // Empty, required input is invalid\n      if (this.required && this.value === '') {\n        valid = false;\n      } else if (this.hasValidator()) {\n        valid = IronValidatableBehavior.validate.call(this, this.value);\n      }\n    }\n\n    this.invalid = !valid;\n    this.fire('iron-input-validate');\n    return valid;\n  },\n\n  _bindValueChanged: function(bindValue) {\n    this.value = bindValue;\n  },\n\n  _valueChanged: function(value) {\n    var textarea = this.textarea;\n    if (!textarea) {\n      return;\n    }\n\n    // If the bindValue changed manually, then we need to also update\n    // the underlying textarea's value. Otherwise this change was probably\n    // generated from the _onInput handler, and the two values are already\n    // the same.\n    if (textarea.value !== value) {\n      textarea.value = !(value || value === 0) ? '' : value;\n    }\n\n    this.bindValue = value;\n    this.$.mirror.innerHTML = this._valueForMirror();\n\n    // Manually notify because we don't want to notify until after setting\n    // value.\n    this.fire('bind-value-changed', {value: this.bindValue});\n  },\n\n  _onInput: function(event) {\n    var eventPath = dom(event).path;\n    this.value = eventPath ? eventPath[0].value : event.target.value;\n  },\n\n  _constrain: function(tokens) {\n    var _tokens;\n    tokens = tokens || [''];\n    // Enforce the min and max heights for a multiline input to avoid\n    // measurement\n    if (this.maxRows > 0 && tokens.length > this.maxRows) {\n      _tokens = tokens.slice(0, this.maxRows);\n    } else {\n      _tokens = tokens.slice(0);\n    }\n    while (this.rows > 0 && _tokens.length < this.rows) {\n      _tokens.push('');\n    }\n    // Use &#160; instead &nbsp; of to allow this element to be used in XHTML.\n    return _tokens.join('<br/>') + '&#160;';\n  },\n\n  _valueForMirror: function() {\n    var input = this.textarea;\n    if (!input) {\n      return;\n    }\n    this.tokens = (input && input.value) ? input.value.replace(/&/gm, '&amp;')\n                                               .replace(/\"/gm, '&quot;')\n                                               .replace(/'/gm, '&#39;')\n                                               .replace(/</gm, '&lt;')\n                                               .replace(/>/gm, '&gt;')\n                                               .split('\\n') :\n                                           [''];\n    return this._constrain(this.tokens);\n  },\n\n  _updateCached: function() {\n    this.$.mirror.innerHTML = this._constrain(this.tokens);\n  }\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-autogrow-textarea/iron-autogrow-textarea.js';\nimport './paper-input-char-counter.js';\nimport './paper-input-container.js';\nimport './paper-input-error.js';\n\nimport {IronFormElementBehavior} from '@polymer/iron-form-element-behavior/iron-form-element-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {PaperInputBehavior} from './paper-input-behavior.js';\n\n/*\n`<paper-textarea>` is a multi-line text field with Material Design styling.\n\n    <paper-textarea label=\"Textarea label\"></paper-textarea>\n\nSee `Polymer.PaperInputBehavior` for more API docs.\n\n### Validation\n\nCurrently only `required` and `maxlength` validation is supported.\n\n### Styling\n\nSee `Polymer.PaperInputContainer` for a list of custom properties used to\nstyle this element.\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      label {\n        pointer-events: none;\n      }\n    </style>\n\n    <paper-input-container no-label-float$=\"[[noLabelFloat]]\" always-float-label=\"[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]\" auto-validate$=\"[[autoValidate]]\" disabled$=\"[[disabled]]\" invalid=\"[[invalid]]\">\n\n      <label hidden$=\"[[!label]]\" aria-hidden=\"true\" for$=\"[[_inputId]]\" slot=\"label\">[[label]]</label>\n\n      <iron-autogrow-textarea class=\"paper-input-input\" slot=\"input\" id$=\"[[_inputId]]\" aria-labelledby$=\"[[_ariaLabelledBy]]\" aria-describedby$=\"[[_ariaDescribedBy]]\" bind-value=\"{{value}}\" invalid=\"{{invalid}}\" validator$=\"[[validator]]\" disabled$=\"[[disabled]]\" autocomplete$=\"[[autocomplete]]\" autofocus$=\"[[autofocus]]\" inputmode$=\"[[inputmode]]\" name$=\"[[name]]\" placeholder$=\"[[placeholder]]\" readonly$=\"[[readonly]]\" required$=\"[[required]]\" minlength$=\"[[minlength]]\" maxlength$=\"[[maxlength]]\" autocapitalize$=\"[[autocapitalize]]\" rows$=\"[[rows]]\" max-rows$=\"[[maxRows]]\" on-change=\"_onChange\"></iron-autogrow-textarea>\n\n      <template is=\"dom-if\" if=\"[[errorMessage]]\">\n        <paper-input-error aria-live=\"assertive\" slot=\"add-on\">[[errorMessage]]</paper-input-error>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[charCounter]]\">\n        <paper-input-char-counter slot=\"add-on\"></paper-input-char-counter>\n      </template>\n\n    </paper-input-container>\n`,\n\n  is: 'paper-textarea',\n\n  behaviors: [\n    PaperInputBehavior,\n    IronFormElementBehavior,\n  ],\n\n  properties: {\n    _ariaLabelledBy: {\n      observer: '_ariaLabelledByChanged',\n      type: String,\n    },\n\n    _ariaDescribedBy: {\n      observer: '_ariaDescribedByChanged',\n      type: String,\n    },\n\n    value: {\n      // Required for the correct TypeScript type-generation\n      type: String,\n    },\n\n    /**\n     * The initial number of rows.\n     *\n     * @attribute rows\n     * @type {number}\n     * @default 1\n     */\n    rows: {\n      type: Number,\n      value: 1,\n    },\n\n    /**\n     * The maximum number of rows this element can grow to until it\n     * scrolls. 0 means no maximum.\n     *\n     * @attribute maxRows\n     * @type {number}\n     * @default 0\n     */\n    maxRows: {\n      type: Number,\n      value: 0,\n    },\n  },\n\n  /**\n   * @return {number}\n   */\n  get selectionStart() {\n    return this.$.input.textarea.selectionStart;\n  },\n\n  set selectionStart(start) {\n    this.$.input.textarea.selectionStart = start;\n  },\n\n  /**\n   * @return {number}\n   */\n  get selectionEnd() {\n    return this.$.input.textarea.selectionEnd;\n  },\n\n  set selectionEnd(end) {\n    this.$.input.textarea.selectionEnd = end;\n  },\n\n  _ariaLabelledByChanged: function(ariaLabelledBy) {\n    this._focusableElement.setAttribute('aria-labelledby', ariaLabelledBy);\n  },\n\n  _ariaDescribedByChanged: function(ariaDescribedBy) {\n    this._focusableElement.setAttribute('aria-describedby', ariaDescribedBy);\n  },\n\n  get _focusableElement() {\n    return this.inputElement.textarea;\n  }\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {AppLayoutBehavior} from '../app-layout-behavior/app-layout-behavior.js';\nimport {AppScrollEffectsBehavior} from '../app-scroll-effects/app-scroll-effects-behavior.js';\n\n/**\napp-header is container element for app-toolbars at the top of the screen that\ncan have scroll effects. By default, an app-header moves away from the viewport\nwhen scrolling down and if using `reveals`, the header slides back when\nscrolling back up. For example:\n\n```html\n<app-header reveals>\n  <app-toolbar>\n    <div main-title>App name</div>\n  </app-toolbar>\n</app-header>\n```\n\napp-header can also condense when scrolling down. To achieve this behavior, the\nheader must have a larger height than the `sticky` element in the light DOM. For\nexample:\n\n```html\n<app-header style=\"height: 96px;\" condenses fixed>\n  <app-toolbar style=\"height: 64px;\">\n    <div main-title>App name</div>\n  </app-toolbar>\n</app-header>\n```\n\nIn this case the header is initially `96px` tall, and it shrinks to `64px` when\nscrolling down. That is what is meant by \"condensing\".\n\n### Sticky element\n\nThe element that is positioned fixed to top of the header's `scrollTarget` when\na threshold is reached, similar to `position: sticky` in CSS. This element\n**must** be an immediate child of app-header. By default, the `sticky` element\nis the first `app-toolbar that is an immediate child of app-header.\n\n```html\n<app-header condenses>\n  <app-toolbar> Sticky element </app-toolbar>\n</app-header>\n```\n\n#### Customizing the sticky element\n\n```html\n<app-header condenses>\n  <app-toolbar></app-toolbar>\n  <app-toolbar sticky> Sticky element </app-toolbar>\n</app-header>\n```\n\n### Scroll target\n\nThe app-header's `scrollTarget` property allows to customize the scrollable\nelement to which the header responds when the user scrolls. By default,\napp-header uses the document as the scroll target, but you can customize this\nproperty by setting the id of the element, e.g.\n\n```html\n<div id=\"scrollingRegion\" style=\"overflow-y: auto;\">\n  <app-header scroll-target=\"scrollingRegion\">\n  </app-header>\n</div>\n```\n\nIn this case, the `scrollTarget` property points to the outer div element.\nAlternatively, you can set this property programmatically:\n\n```js\nappHeader.scrollTarget = document.querySelector(\"#scrollingRegion\");\n```\n\n## Backgrounds\napp-header has two background layers that can be used for styling when the\nheader is condensed or when the scrollable element is scrolled to the top.\n\n## Scroll effects\n\nScroll effects are _optional_ visual effects applied in app-header based on\nscroll position. For example, The [Material Design scrolling\ntechniques](https://www.google.com/design/spec/patterns/scrolling-techniques.html)\nrecommends effects that can be installed via the `effects` property. e.g.\n\n```html\n<app-header effects=\"waterfall\">\n  <app-toolbar>App name</app-toolbar>\n</app-header>\n```\n\n#### Importing the effects\n\nTo use the scroll effects, you must explicitly import them in addition to\n`app-header`:\n\n```js\nimport '@polymer/app-layout/app-scroll-effects/app-scroll-effects.js';\n```\n\n#### List of effects\n\n* **blend-background**\nFades in/out two background elements by applying CSS opacity based on scroll\nposition. You can use this effect to smoothly change the background color or\nimage of the header. For example, using the mixin\n`--app-header-background-rear-layer` lets you assign a different background when\nthe header is condensed:\n\n```css\napp-header {\n  background-color: red;\n  --app-header-background-rear-layer: {\n    /* The header is blue when condensed *\\/\n    background-color: blue;\n  };\n}\n```\n\n* **fade-background**\nUpon scrolling past a threshold, this effect will trigger an opacity transition\nto fade in/out the backgrounds. Compared to the `blend-background` effect, this\neffect doesn't interpolate the opacity based on scroll position.\n\n\n* **parallax-background**\nA simple parallax effect that vertically translates the backgrounds based on a\nfraction of the scroll position. For example:\n\n```css\napp-header {\n  --app-header-background-front-layer: {\n    background-image: url(...);\n  };\n}\n```\n```html\n<app-header style=\"height: 300px;\" effects=\"parallax-background\">\n  <app-toolbar>App name</app-toolbar>\n</app-header>\n```\n\nThe fraction determines how far the background moves relative to the scroll\nposition. This value can be assigned via the `scalar` config value and it is\ntypically a value between 0 and 1 inclusive. If `scalar=0`, the background\ndoesn't move away from the header.\n\n* **resize-title**\nProgressively interpolates the size of the title from the element with the\n`main-title` attribute to the element with the `condensed-title` attribute as\nthe header condenses. For example:\n\n```html\n<app-header condenses reveals effects=\"resize-title\">\n  <app-toolbar>\n      <h4 condensed-title>App name</h4>\n  </app-toolbar>\n  <app-toolbar>\n      <h1 main-title>App name</h1>\n  </app-toolbar>\n</app-header>\n```\n\n* **resize-snapped-title**\nUpon scrolling past a threshold, this effect fades in/out the titles using\nopacity transitions. Similarly to `resize-title`, the `main-title` and\n`condensed-title` elements must be placed in the light DOM.\n\n* **waterfall**\nToggles the shadow property in app-header to create a sense of depth (as\nrecommended in the MD spec) between the header and the underneath content. You\ncan change the shadow by customizing the `--app-header-shadow` mixin. For\nexample:\n\n```css\napp-header {\n  --app-header-shadow: {\n    box-shadow: inset 0px 5px 2px -3px rgba(0, 0, 0, 0.2);\n  };\n}\n```\n\n```html\n<app-header condenses reveals effects=\"waterfall\">\n  <app-toolbar>\n      <h1 main-title>App name</h1>\n  </app-toolbar>\n</app-header>\n```\n\n* **material**\nInstalls the waterfall, resize-title, blend-background and parallax-background\neffects.\n\n### Content attributes\n\nAttribute | Description         | Default\n----------|---------------------|----------------------------------------\n`sticky` | Element that remains at the top when the header condenses. | The first app-toolbar in the light DOM.\n\n\n## Styling\n\nMixin | Description | Default\n------|-------------|----------\n`--app-header-background-front-layer` | Applies to the front layer of the background. | {}\n`--app-header-background-rear-layer` | Applies to the rear layer of the background. | {}\n`--app-header-shadow` | Applies to the shadow. | {}\n\n@group App Elements\n@element app-header\n@demo app-header/demo/blend-background-1.html Blend Background Image\n@demo app-header/demo/blend-background-2.html Blend 2 Background Images\n@demo app-header/demo/blend-background-3.html Blend Background Colors\n@demo app-header/demo/contacts.html Contacts Demo\n@demo app-header/demo/give.html Resize Snapped Title Demo\n@demo app-header/demo/music.html Reveals Demo\n@demo app-header/demo/no-effects.html Condenses and Reveals Demo\n@demo app-header/demo/notes.html Fixed with Dynamic Shadow Demo\n@demo app-header/demo/custom-sticky-element-1.html Custom Sticky Element Demo 1\n@demo app-header/demo/custom-sticky-element-2.html Custom Sticky Element Demo 2\n\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        position: relative;\n        display: block;\n        transition-timing-function: linear;\n        transition-property: -webkit-transform;\n        transition-property: transform;\n      }\n\n      :host::before {\n        position: absolute;\n        right: 0px;\n        bottom: -5px;\n        left: 0px;\n        width: 100%;\n        height: 5px;\n        content: \"\";\n        transition: opacity 0.4s;\n        pointer-events: none;\n        opacity: 0;\n        box-shadow: inset 0px 5px 6px -3px rgba(0, 0, 0, 0.4);\n        will-change: opacity;\n        @apply --app-header-shadow;\n      }\n\n      :host([shadow])::before {\n        opacity: 1;\n      }\n\n      #background {\n        @apply --layout-fit;\n        overflow: hidden;\n      }\n\n      #backgroundFrontLayer,\n      #backgroundRearLayer {\n        @apply --layout-fit;\n        height: 100%;\n        pointer-events: none;\n        background-size: cover;\n      }\n\n      #backgroundFrontLayer {\n        @apply --app-header-background-front-layer;\n      }\n\n      #backgroundRearLayer {\n        opacity: 0;\n        @apply --app-header-background-rear-layer;\n      }\n\n      #contentContainer {\n        position: relative;\n        width: 100%;\n        height: 100%;\n      }\n\n      :host([disabled]),\n      :host([disabled])::after,\n      :host([disabled]) #backgroundFrontLayer,\n      :host([disabled]) #backgroundRearLayer,\n      /* Silent scrolling should not run CSS transitions */\n      :host([silent-scroll]),\n      :host([silent-scroll])::after,\n      :host([silent-scroll]) #backgroundFrontLayer,\n      :host([silent-scroll]) #backgroundRearLayer {\n        transition: none !important;\n      }\n\n      :host([disabled]) ::slotted(app-toolbar:first-of-type),\n      :host([disabled]) ::slotted([sticky]),\n      /* Silent scrolling should not run CSS transitions */\n      :host([silent-scroll]) ::slotted(app-toolbar:first-of-type),\n      :host([silent-scroll]) ::slotted([sticky]) {\n        transition: none !important;\n      }\n\n    </style>\n    <div id=\"contentContainer\">\n      <slot id=\"slot\"></slot>\n    </div>\n`,\n\n  is: 'app-header',\n  behaviors: [AppScrollEffectsBehavior, AppLayoutBehavior],\n\n  properties: {\n    /**\n     * If true, the header will automatically collapse when scrolling down.\n     * That is, the `sticky` element remains visible when the header is fully\n     *condensed whereas the rest of the elements will collapse below `sticky`\n     *element.\n     *\n     * By default, the `sticky` element is the first toolbar in the light DOM:\n     *\n     *```html\n     * <app-header condenses>\n     *   <app-toolbar>This toolbar remains on top</app-toolbar>\n     *   <app-toolbar></app-toolbar>\n     *   <app-toolbar></app-toolbar>\n     * </app-header>\n     * ```\n     *\n     * Additionally, you can specify which toolbar or element remains visible in\n     *condensed mode by adding the `sticky` attribute to that element. For\n     *example: if we want the last toolbar to remain visible, we can add the\n     *`sticky` attribute to it.\n     *\n     *```html\n     * <app-header condenses>\n     *   <app-toolbar></app-toolbar>\n     *   <app-toolbar></app-toolbar>\n     *   <app-toolbar sticky>This toolbar remains on top</app-toolbar>\n     * </app-header>\n     * ```\n     *\n     * Note the `sticky` element must be a direct child of `app-header`.\n     */\n    condenses: {type: Boolean, value: false},\n\n    /**\n     * Mantains the header fixed at the top so it never moves away.\n     */\n    fixed: {type: Boolean, value: false},\n\n    /**\n     * Slides back the header when scrolling back up.\n     */\n    reveals: {type: Boolean, value: false},\n\n    /**\n     * Displays a shadow below the header.\n     */\n    shadow: {type: Boolean, reflectToAttribute: true, value: false}\n  },\n\n  observers: ['_configChanged(isAttached, condenses, fixed)'],\n\n  /**\n   * A cached offsetHeight of the current element.\n   *\n   * @type {number}\n   */\n  _height: 0,\n\n  /**\n   * The distance in pixels the header will be translated to when scrolling.\n   *\n   * @type {number}\n   */\n  _dHeight: 0,\n\n  /**\n   * The offsetTop of `_stickyEl`\n   *\n   * @type {number}\n   */\n  _stickyElTop: 0,\n\n  /**\n   * A reference to the element that remains visible when the header condenses.\n   *\n   * @type {HTMLElement}\n   */\n  _stickyElRef: null,\n\n  /**\n   * The header's top value used for the `transformY`\n   *\n   * @type {number}\n   */\n  _top: 0,\n\n  /**\n   * The current scroll progress.\n   *\n   * @type {number}\n   */\n  _progress: 0,\n\n  _wasScrollingDown: false,\n  _initScrollTop: 0,\n  _initTimestamp: 0,\n  _lastTimestamp: 0,\n  _lastScrollTop: 0,\n\n  /**\n   * The distance the header is allowed to move away.\n   *\n   * @type {number}\n   */\n  get _maxHeaderTop() {\n    return this.fixed ? this._dHeight : this._height + 5;\n  },\n\n  /**\n   * Returns a reference to the sticky element.\n   *\n   * @return {HTMLElement}?\n   */\n  get _stickyEl() {\n    if (this._stickyElRef) {\n      return this._stickyElRef;\n    }\n    var nodes = dom(this.$.slot).getDistributedNodes();\n    // Get the element with the sticky attribute on it or the first element in\n    // the light DOM.\n    for (var i = 0, node; node = /** @type {!HTMLElement} */ (nodes[i]); i++) {\n      if (node.nodeType === Node.ELEMENT_NODE) {\n        if (node.hasAttribute('sticky')) {\n          this._stickyElRef = node;\n          break;\n        } else if (!this._stickyElRef) {\n          this._stickyElRef = node;\n        }\n      }\n    }\n    return this._stickyElRef;\n  },\n\n  _configChanged: function() {\n    this.resetLayout();\n    this._notifyLayoutChanged();\n  },\n\n  _updateLayoutStates: function() {\n    if (this.offsetWidth === 0 && this.offsetHeight === 0) {\n      return;\n    }\n    var scrollTop = this._clampedScrollTop;\n    var firstSetup = this._height === 0 || scrollTop === 0;\n    var currentDisabled = this.disabled;\n    this._height = this.offsetHeight;\n    this._stickyElRef = null;\n    this.disabled = true;\n    // prepare for measurement\n    if (!firstSetup) {\n      this._updateScrollState(0, true);\n    }\n    if (this._mayMove()) {\n      this._dHeight =\n          this._stickyEl ? this._height - this._stickyEl.offsetHeight : 0;\n    } else {\n      this._dHeight = 0;\n    }\n    this._stickyElTop = this._stickyEl ? this._stickyEl.offsetTop : 0;\n    this._setUpEffect();\n    if (firstSetup) {\n      this._updateScrollState(scrollTop, true);\n    } else {\n      this._updateScrollState(this._lastScrollTop, true);\n      this._layoutIfDirty();\n    }\n    // restore no transition\n    this.disabled = currentDisabled;\n  },\n\n  /**\n   * Updates the scroll state.\n   *\n   * @param {number} scrollTop\n   * @param {boolean=} forceUpdate (default: false)\n   */\n  _updateScrollState: function(scrollTop, forceUpdate) {\n    if (this._height === 0) {\n      return;\n    }\n    var progress = 0;\n    var top = 0;\n    var lastTop = this._top;\n    var lastScrollTop = this._lastScrollTop;\n    var maxHeaderTop = this._maxHeaderTop;\n    var dScrollTop = scrollTop - this._lastScrollTop;\n    var absDScrollTop = Math.abs(dScrollTop);\n    var isScrollingDown = scrollTop > this._lastScrollTop;\n    var now = performance.now();\n\n    if (this._mayMove()) {\n      top = this._clamp(\n          this.reveals ? lastTop + dScrollTop : scrollTop, 0, maxHeaderTop);\n    }\n    if (scrollTop >= this._dHeight) {\n      top = this.condenses && !this.fixed ? Math.max(this._dHeight, top) : top;\n      this.style.transitionDuration = '0ms';\n    }\n    if (this.reveals && !this.disabled && absDScrollTop < 100) {\n      // set the initial scroll position\n      if (now - this._initTimestamp > 300 ||\n          this._wasScrollingDown !== isScrollingDown) {\n        this._initScrollTop = scrollTop;\n        this._initTimestamp = now;\n      }\n      if (scrollTop >= maxHeaderTop) {\n        // check if the header is allowed to snap\n        if (Math.abs(this._initScrollTop - scrollTop) > 30 ||\n            absDScrollTop > 10) {\n          if (isScrollingDown && scrollTop >= maxHeaderTop) {\n            top = maxHeaderTop;\n          } else if (!isScrollingDown && scrollTop >= this._dHeight) {\n            top = this.condenses && !this.fixed ? this._dHeight : 0;\n          }\n          var scrollVelocity = dScrollTop / (now - this._lastTimestamp);\n          this.style.transitionDuration =\n              this._clamp((top - lastTop) / scrollVelocity, 0, 300) + 'ms';\n        } else {\n          top = this._top;\n        }\n      }\n    }\n    if (this._dHeight === 0) {\n      progress = scrollTop > 0 ? 1 : 0;\n    } else {\n      progress = top / this._dHeight;\n    }\n    if (!forceUpdate) {\n      this._lastScrollTop = scrollTop;\n      this._top = top;\n      this._wasScrollingDown = isScrollingDown;\n      this._lastTimestamp = now;\n    }\n    if (forceUpdate || progress !== this._progress || lastTop !== top ||\n        scrollTop === 0) {\n      this._progress = progress;\n      this._runEffects(progress, top);\n      this._transformHeader(top);\n    }\n  },\n\n  /**\n   * Returns true if the current header is allowed to move as the user scrolls.\n   *\n   * @return {boolean}\n   */\n  _mayMove: function() {\n    return this.condenses || !this.fixed;\n  },\n\n  /**\n   * Returns true if the current header will condense based on the size of the\n   * header and the `consenses` property.\n   *\n   * @return {boolean}\n   */\n  willCondense: function() {\n    return this._dHeight > 0 && this.condenses;\n  },\n\n  /**\n   * Returns true if the current element is on the screen.\n   * That is, visible in the current viewport.\n   *\n   * @method isOnScreen\n   * @return {boolean}\n   */\n  isOnScreen: function() {\n    return this._height !== 0 && this._top < this._height;\n  },\n\n  /**\n   * Returns true if there's content below the current element.\n   *\n   * @method isContentBelow\n   * @return {boolean}\n   */\n  isContentBelow: function() {\n    return this._top === 0 ? this._clampedScrollTop > 0 :\n                             this._clampedScrollTop - this._maxHeaderTop >= 0;\n  },\n\n  /**\n   * Transforms the header.\n   *\n   * @param {number} y\n   */\n  _transformHeader: function(y) {\n    this.translate3d(0, (-y) + 'px', 0);\n    if (this._stickyEl) {\n      this.translate3d(\n          0,\n          this.condenses && y >= this._stickyElTop ?\n              (Math.min(y, this._dHeight) - this._stickyElTop) + 'px' :\n              0,\n          0,\n          this._stickyEl);\n    }\n  },\n\n  _clamp: function(v, min, max) {\n    return Math.min(max, Math.max(min, v));\n  },\n\n  _ensureBgContainers: function() {\n    if (!this._bgContainer) {\n      this._bgContainer = document.createElement('div');\n      this._bgContainer.id = 'background';\n      this._bgRear = document.createElement('div');\n      this._bgRear.id = 'backgroundRearLayer';\n      this._bgContainer.appendChild(this._bgRear);\n      this._bgFront = document.createElement('div');\n      this._bgFront.id = 'backgroundFrontLayer';\n      this._bgContainer.appendChild(this._bgFront);\n      dom(this.root).insertBefore(this._bgContainer, this.$.contentContainer);\n    }\n  },\n\n  _getDOMRef: function(id) {\n    switch (id) {\n      case 'backgroundFrontLayer':\n        this._ensureBgContainers();\n        return this._bgFront;\n      case 'backgroundRearLayer':\n        this._ensureBgContainers();\n        return this._bgRear;\n      case 'background':\n        this._ensureBgContainers();\n        return this._bgContainer;\n      case 'mainTitle':\n        return dom(this).querySelector('[main-title]');\n      case 'condensedTitle':\n        return dom(this).querySelector('[condensed-title]');\n    }\n    return null;\n  },\n\n  /**\n   * Returns an object containing the progress value of the scroll effects\n   * and the top position of the header.\n   *\n   * @method getScrollState\n   * @return {Object}\n   */\n  getScrollState: function() {\n    return {progress: this._progress, top: this._top};\n  }\n});\n","import '@vaadin/vaadin-lumo-styles/mixins/overlay.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-vaadin-overlay\" theme-for=\"vaadin-overlay\">\n  <template>\n    <style include=\"lumo-overlay\">\n      /* stylelint-disable no-empty-source */\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-overlay/theme/lumo/vaadin-overlay.js';\nimport '@vaadin/vaadin-lumo-styles/mixins/menu-overlay.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-combo-box-overlay\" theme-for=\"vaadin-combo-box-overlay\">\n  <template>\n    <style include=\"lumo-overlay lumo-menu-overlay-core\">\n      [part=\"content\"] {\n        padding: 0;\n      }\n\n      :host {\n        /* TODO: using a legacy mixin (unsupported) */\n        --iron-list-items-container: {\n          border-width: var(--lumo-space-xs);\n          border-style: solid;\n          border-color: transparent;\n        };\n      }\n\n      /* TODO: workaround ShadyCSS issue when using inside of the dom-if */\n      :host([opened]) {\n        --iron-list-items-container_-_border-width: var(--lumo-space-xs);\n        --iron-list-items-container_-_border-style: solid;\n        --iron-list-items-container_-_border-color: transparent;\n      }\n\n      /* Loading state */\n\n      /* When items are empty, the sinner needs some room */\n      :host(:not([closing])) [part~=\"content\"] {\n        min-height: calc(2 * var(--lumo-space-s) + var(--lumo-icon-size-s));\n      }\n\n      [part~=\"overlay\"] {\n        position: relative;\n      }\n\n      :host([loading]) [part~=\"loader\"] {\n        box-sizing: border-box;\n        width: var(--lumo-icon-size-s);\n        height: var(--lumo-icon-size-s);\n        position: absolute;\n        z-index: 1;\n        left: var(--lumo-space-s);\n        right: var(--lumo-space-s);\n        top: var(--lumo-space-s);\n        margin-left: auto;\n        margin-inline-start: auto;\n        margin-inline-end: 0;\n        border: 2px solid transparent;\n        border-color:\n          var(--lumo-primary-color-50pct)\n          var(--lumo-primary-color-50pct)\n          var(--lumo-primary-color)\n          var(--lumo-primary-color);\n        border-radius: calc(0.5 * var(--lumo-icon-size-s));\n        opacity: 0;\n        animation:\n          1s linear infinite lumo-combo-box-loader-rotate,\n          .3s .1s lumo-combo-box-loader-fade-in both;\n        pointer-events: none;\n      }\n\n      @keyframes lumo-combo-box-loader-fade-in {\n        0% {\n          opacity: 0;\n        }\n\n        100% {\n          opacity: 1;\n        }\n      }\n\n      @keyframes lumo-combo-box-loader-rotate {\n        0% {\n          transform: rotate(0deg);\n        }\n\n        100% {\n          transform: rotate(360deg);\n        }\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '@vaadin/vaadin-lumo-styles/font-icons.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"lumo-item\" theme-for=\"vaadin-item\">\n  <template>\n    <style>\n      :host {\n        display: flex;\n        align-items: center;\n        box-sizing: border-box;\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size-m);\n        line-height: var(--lumo-line-height-xs);\n        padding: 0.5em 1em;\n        min-height: var(--lumo-size-m);\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n        -webkit-tap-highlight-color: transparent;\n      }\n\n      /* Selectable items have a checkmark icon */\n      :host([tabindex])::before {\n        display: var(--_lumo-item-selected-icon-display, none);\n        content: var(--lumo-icons-checkmark);\n        font-family: lumo-icons;\n        font-size: var(--lumo-icon-size-m);\n        line-height: 1;\n        font-weight: normal;\n        width: 1em;\n        height: 1em;\n        margin: calc((1 - var(--lumo-line-height-xs)) * var(--lumo-font-size-m) / 2) 0;\n        color: var(--lumo-primary-text-color);\n        flex: none;\n        opacity: 0;\n        transition: transform 0.2s cubic-bezier(.12, .32, .54, 2), opacity 0.1s;\n      }\n\n      :host([selected])::before {\n        opacity: 1;\n      }\n\n      :host([active]:not([selected]))::before {\n        transform: scale(0.8);\n        opacity: 0;\n        transition-duration: 0s;\n      }\n\n      [part=\"content\"] {\n        flex: auto;\n      }\n\n      /* Disabled item */\n\n      :host([disabled]) {\n        color: var(--lumo-disabled-text-color);\n        cursor: default;\n        pointer-events: none;\n      }\n\n      /* Slotted icons */\n\n      :host ::slotted(iron-icon) {\n        width: var(--lumo-icon-size-m);\n        height: var(--lumo-icon-size-m);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * A mixin providing `focused`, `focus-ring`, `active`, `disabled` and `selected`.\n *\n * `focused`, `active` and `focus-ring` are set as only as attributes.\n * @polymerMixin\n */\nexport const ItemMixin = superClass => class VaadinItemMixin extends superClass {\n  static get properties() {\n    return {\n\n      /**\n       * Used for mixin detection because `instanceof` does not work with mixins.\n       * e.g. in VaadinListMixin it filters items by using the\n       * `element._hasVaadinItemMixin` condition.\n       */\n      _hasVaadinItemMixin: {\n        value: true\n      },\n\n      /**\n       * If true, the user cannot interact with this element.\n       */\n      disabled: {\n        type: Boolean,\n        value: false,\n        observer: '_disabledChanged',\n        reflectToAttribute: true\n      },\n\n      /**\n       * If true, the item is in selected state.\n       */\n      selected: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true,\n        observer: '_selectedChanged'\n      },\n\n      _value: String\n    };\n  }\n\n  constructor() {\n    super();\n\n    /**\n     * Submittable string value. The default value is the trimmed text content of the element.\n     * @type {string}\n     */\n    this.value;\n  }\n\n  get value() {\n    return this._value !== undefined ? this._value : this.textContent.trim();\n  }\n\n  set value(value) {\n    this._value = value;\n  }\n\n  ready() {\n    super.ready();\n\n    const attrValue = this.getAttribute('value');\n    if (attrValue !== null) {\n      this.value = attrValue;\n    }\n\n    this.addEventListener('focus', e => this._setFocused(true), true);\n    this.addEventListener('blur', e => this._setFocused(false), true);\n    this.addEventListener('mousedown', e => {\n      this._setActive(this._mousedown = true);\n      const mouseUpListener = () => {\n        this._setActive(this._mousedown = false);\n        document.removeEventListener('mouseup', mouseUpListener);\n      };\n      document.addEventListener('mouseup', mouseUpListener);\n    });\n    this.addEventListener('keydown', e => this._onKeydown(e));\n    this.addEventListener('keyup', e => this._onKeyup(e));\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    // in Firefox and Safari, blur does not fire on the element when it is removed,\n    // especially between keydown and keyup events, being active at the same time.\n    // reproducible in `<vaadin-dropdown-menu>` when closing overlay on select.\n    if (this.hasAttribute('active')) {\n      this._setFocused(false);\n    }\n  }\n\n  _selectedChanged(selected) {\n    this.setAttribute('aria-selected', selected);\n  }\n\n  _disabledChanged(disabled) {\n    if (disabled) {\n      this.selected = false;\n      this.setAttribute('aria-disabled', 'true');\n      this.blur();\n    } else {\n      this.removeAttribute('aria-disabled');\n    }\n  }\n\n  _setFocused(focused) {\n    if (focused) {\n      this.setAttribute('focused', '');\n      if (!this._mousedown) {\n        this.setAttribute('focus-ring', '');\n      }\n    } else {\n      this.removeAttribute('focused');\n      this.removeAttribute('focus-ring');\n      this._setActive(false);\n    }\n  }\n\n  _setActive(active) {\n    if (active) {\n      this.setAttribute('active', '');\n    } else {\n      this.removeAttribute('active');\n    }\n  }\n\n  _onKeydown(event) {\n    if (/^( |SpaceBar|Enter)$/.test(event.key) && !event.defaultPrevented) {\n      event.preventDefault();\n      this._setActive(true);\n    }\n  }\n\n  _onKeyup(event) {\n    if (this.hasAttribute('active')) {\n      this._setActive(false);\n      this.click();\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ItemMixin } from './vaadin-item-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * `<vaadin-item>` is a Web Component providing layout for items in tabs and menus.\n *\n * ```\n *   <vaadin-item>\n *     Item content\n *   </vaadin-item>\n * ```\n *\n * ### Selectable\n *\n * `<vaadin-item>` has the `selected` property and the corresponding state attribute.\n * Currently, the component sets the `selected` to false, when `disabled` property is set to true.\n * But other than that, the `<vaadin-item>` does not switch selection by itself.\n * In general, it is the wrapper component, like `<vaadin-list-box>`, which should update\n * the `selected` property on the items, e. g. on mousedown or when Enter / Spacebar is pressed.\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ---|---\n * `content` | The element that wraps the slot\n *\n * The following state attributes are available for styling:\n *\n * Attribute  | Description | Part name\n * -----------|-------------|------------\n * `disabled` | Set to a disabled item | :host\n * `focused` | Set when the element is focused | :host\n * `focus-ring` | Set when the element is keyboard focused | :host\n * `selected` | Set when the item is selected | :host\n * `active` | Set when mousedown or enter/spacebar pressed | :host\n *\n * @memberof Vaadin\n * @mixes Vaadin.ItemMixin\n * @mixes Vaadin.ThemableMixin\n */\nclass ItemElement extends ItemMixin(ThemableMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-block;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n    </style>\n    <div part=\"content\">\n      <slot></slot>\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-item';\n  }\n\n  static get version() {\n    return '2.1.0';\n  }\n}\n\ncustomElements.define(ItemElement.is, ItemElement);\n\nexport { ItemElement };\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-item/theme/lumo/vaadin-item.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-combo-box-item\" theme-for=\"vaadin-combo-box-item\">\n  <template>\n    <style include=\"lumo-item\">\n      /* TODO partly duplicated from vaadin-list-box styles. Should find a way to make it DRY */\n\n      :host {\n        cursor: default;\n        -webkit-tap-highlight-color: var(--lumo-primary-color-10pct);\n        padding-left: calc(var(--lumo-border-radius) / 4);\n        padding-right: calc(var(--lumo-space-l) + var(--lumo-border-radius) / 4);\n        transition: background-color 100ms;\n        border-radius: var(--lumo-border-radius);\n        overflow: hidden;\n        --_lumo-item-selected-icon-display: block;\n      }\n\n      /* ShadyCSS workaround (show the selected item checkmark) */\n      :host::before {\n        display: block;\n      }\n\n      :host(:hover) {\n        background-color: var(--lumo-primary-color-10pct);\n      }\n\n      :host([focused]:not([disabled])) {\n        box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      @media (pointer: coarse) {\n        :host(:hover) {\n          background-color: transparent;\n        }\n\n        :host([focused]:not([disabled])) {\n          box-shadow: none;\n        }\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/*\n * Placeholder object class representing items being loaded.\n *\n * @private\n */\nexport const ComboBoxPlaceholder = class ComboBoxPlaceholder {\n  toString() {\n    return '';\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@polymer/polymer/lib/utils/async.js';\n\nimport { flush } from '@polymer/polymer/lib/utils/flush.js';\nimport { templatize } from '@polymer/polymer/lib/utils/templatize.js';\nimport { IronA11yAnnouncer } from '@polymer/iron-a11y-announcer/iron-a11y-announcer.js';\nimport { IronA11yKeysBehavior } from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\nimport { FlattenedNodesObserver } from '@polymer/polymer/lib/utils/flattened-nodes-observer.js';\nimport { ComboBoxPlaceholder } from './vaadin-combo-box-placeholder.js';\n\n/**\n * @polymerMixin\n */\nexport const ComboBoxMixin = subclass => class VaadinComboBoxMixinElement extends subclass {\n\n  static get properties() {\n    return {\n      /**\n       * True if the dropdown is open, false otherwise.\n       */\n      opened: {\n        type: Boolean,\n        notify: true,\n        value: false,\n        reflectToAttribute: true,\n        observer: '_openedChanged'\n      },\n\n      /**\n       * Set to true to disable this element.\n       */\n      disabled: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * When present, it specifies that the element field is read-only.\n       */\n      readonly: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * Custom function for rendering the content of every item.\n       * Receives three arguments:\n       *\n       * - `root` The `<vaadin-combo-box-item>` internal container DOM element.\n       * - `comboBox` The reference to the `<vaadin-combo-box>` element.\n       * - `model` The object with the properties related with the rendered\n       *   item, contains:\n       *   - `model.index` The index of the rendered item.\n       *   - `model.item` The item.\n       */\n      renderer: Function,\n\n      /**\n       * A full set of items to filter the visible options from.\n       * The items can be of either `String` or `Object` type.\n       */\n      items: {\n        type: Array,\n        observer: '_itemsChanged'\n      },\n\n      /**\n       * If `true`, the user can input a value that is not present in the items list.\n       * `value` property will be set to the input value in this case.\n       * Also, when `value` is set programmatically, the input value will be set\n       * to reflect that value.\n       */\n      allowCustomValue: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * A subset of items, filtered based on the user input. Filtered items\n       * can be assigned directly to omit the internal filtering functionality.\n       * The items can be of either `String` or `Object` type.\n       */\n      filteredItems: {\n        type: Array\n      },\n\n      /**\n       * The `String` value for the selected item of the combo box. Provides\n       * the value for `iron-form`.\n       *\n       * When theres no item selected, the value is an empty string.\n       *\n       * Use `selectedItem` property to get the raw selected item from\n       * the `items` array.\n       */\n      value: {\n        type: String,\n        observer: '_valueChanged',\n        notify: true,\n        value: ''\n      },\n\n      /**\n       * Used to detect user value changes and fire `change` events.\n       */\n      _lastCommittedValue: String,\n\n      /*\n       * When set to `true`, \"loading\" attribute is added to host and the overlay element.\n       */\n      loading: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      _focusedIndex: {\n        type: Number,\n        value: -1\n      },\n\n      /**\n       * Filtering string the user has typed into the input field.\n       */\n      filter: {\n        type: String,\n        value: '',\n        notify: true\n      },\n\n      /**\n       * The selected item from the `items` array.\n       */\n      selectedItem: {\n        type: Object,\n        notify: true\n      },\n\n      /**\n       * Path for label of the item. If `items` is an array of objects, the\n       * `itemLabelPath` is used to fetch the displayed string label for each\n       * item.\n       *\n       * The item label is also used for matching items when processing user\n       * input, i.e., for filtering and selecting items.\n       *\n       * When using item templates, the property is still needed because it is used\n       * for filtering, and for displaying the selected item value in the input box.\n       */\n      itemLabelPath: {\n        type: String,\n        value: 'label',\n        observer: '_itemLabelPathChanged'\n      },\n\n      /**\n       * Path for the value of the item. If `items` is an array of objects, the\n       * `itemValuePath:` is used to fetch the string value for the selected\n       * item.\n       *\n       * The item value is used in the `value` property of the combo box,\n       * to provide the form value.\n       */\n      itemValuePath: {\n        type: String,\n        value: 'value'\n      },\n\n      /**\n       * Path for the id of the item. If `items` is an array of objects,\n       * the `itemIdPath` is used to compare and identify the same item\n       * in `selectedItem` and `filteredItems` (items given by the\n       * `dataProvider` callback).\n       */\n      itemIdPath: String,\n\n      /**\n       * The name of this element.\n       */\n      name: {\n        type: String\n      },\n\n      /**\n       * Set to true if the value is invalid.\n       */\n      invalid: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        value: false\n      },\n\n      _toggleElement: Object,\n      _clearElement: Object,\n\n      _inputElementValue: String,\n\n      _closeOnBlurIsPrevented: Boolean,\n\n      _previousDocumentPointerEvents: String,\n\n      _itemTemplate: Object\n    };\n  }\n\n  static get observers() {\n    return [\n      '_filterChanged(filter, itemValuePath, itemLabelPath)',\n      '_itemsOrPathsChanged(items.*, itemValuePath, itemLabelPath)',\n      '_filteredItemsChanged(filteredItems.*, itemValuePath, itemLabelPath)',\n      '_templateOrRendererChanged(_itemTemplate, renderer)',\n      '_loadingChanged(loading)',\n      '_selectedItemChanged(selectedItem, itemLabelPath)',\n      '_toggleElementChanged(_toggleElement)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n\n    this.addEventListener('focusout', e => {\n      // Fixes the problem with `focusout` happening when clicking on the scroll bar on Edge\n      const dropdown = this.$.overlay.$.dropdown;\n      if (dropdown && dropdown.$ && e.relatedTarget === dropdown.$.overlay) {\n        e.composedPath()[0].focus();\n        return;\n      }\n      if (!this._closeOnBlurIsPrevented) {\n        this.close();\n      }\n    });\n\n    this._lastCommittedValue = this.value;\n    IronA11yAnnouncer.requestAvailability();\n\n    // 2.0 does not support 'overlay.selection-changed' syntax in listeners\n    this.$.overlay.addEventListener('selection-changed', this._overlaySelectedItemChanged.bind(this));\n\n    this.addEventListener('vaadin-combo-box-dropdown-closed', this._onClosed.bind(this));\n    this.addEventListener('vaadin-combo-box-dropdown-opened', this._onOpened.bind(this));\n    this.addEventListener('keydown', this._onKeyDown.bind(this));\n    this.addEventListener('click', this._onClick.bind(this));\n\n    this.$.overlay.addEventListener('vaadin-overlay-touch-action', this._onOverlayTouchAction.bind(this));\n\n    this.addEventListener('touchend', e => {\n      if (!this._clearElement || e.composedPath()[0] !== this._clearElement) {\n        return;\n      }\n\n      e.preventDefault();\n      this._clear();\n    });\n\n    this._observer = new FlattenedNodesObserver(this, info => {\n      this._setTemplateFromNodes(info.addedNodes);\n    });\n  }\n\n\n  /**\n   * Manually invoke existing renderer.\n   */\n  render() {\n    if (this.$.overlay._selector) {\n      this.$.overlay._selector.querySelectorAll('vaadin-combo-box-item').forEach(item => item._render());\n    }\n  }\n\n  _setTemplateFromNodes(nodes) {\n    this._itemTemplate = nodes.filter(node => node.localName && node.localName === 'template')[0] || this._itemTemplate;\n  }\n\n  _removeNewRendererOrTemplate(template, oldTemplate, renderer, oldRenderer) {\n    if (template !== oldTemplate) {\n      this._itemTemplate = undefined;\n    } else if (renderer !== oldRenderer) {\n      this.renderer = undefined;\n    }\n  }\n\n  _templateOrRendererChanged(template, renderer) {\n    if (template && renderer) {\n      this._removeNewRendererOrTemplate(template, this._oldTemplate, renderer, this._oldRenderer);\n      throw new Error('You should only use either a renderer or a template for combo box items');\n    }\n\n    this._oldTemplate = template;\n    this._oldRenderer = renderer;\n  }\n\n  /**\n   * Opens the dropdown list.\n   */\n  open() {\n    // Prevent _open() being called when input is disabled or read-only\n    if (!this.disabled && !this.readonly) {\n      this.opened = true;\n    }\n  }\n\n  /**\n   * Closes the dropdown list.\n   */\n  close() {\n    this.opened = false;\n  }\n\n  _openedChanged(value, old) {\n    // Prevent _close() being called when opened is set to its default value (false).\n    if (old === undefined) {\n      return;\n    }\n\n    if (this.opened) {\n      this._openedWithFocusRing = this.hasAttribute('focus-ring') || (this.focusElement && this.focusElement.hasAttribute('focus-ring'));\n      // For touch devices, we don't want to popup virtual keyboard on touch devices unless input\n      // is explicitly focused by the user.\n      if (!this.$.overlay.touchDevice) {\n        // Check to see if there is a focused property and if it's already true.\n        if (!this.focused) {\n          this.focus();\n        }\n      }\n    } else {\n      if (this._openedWithFocusRing && this.hasAttribute('focused')) {\n        this.focusElement.setAttribute('focus-ring', '');\n      }\n      this._onClosed();\n    }\n  }\n\n  _onOverlayTouchAction(event) {\n    // On touch devices, blur the input on touch start inside the overlay, in order to hide\n    // the virtual keyboard. But don't close the overlay on this blur.\n    this._closeOnBlurIsPrevented = true;\n    this.inputElement.blur();\n    this._closeOnBlurIsPrevented = false;\n  }\n\n  _onClick(e) {\n    this._closeOnBlurIsPrevented = true;\n\n    const path = e.composedPath();\n    if (path.indexOf(this._clearElement) !== -1) {\n      this._clear();\n      this.focus();\n    } else if (path.indexOf(this.inputElement) !== -1) {\n      if (path.indexOf(this._toggleElement) > -1 && this.opened) {\n        this.close();\n      } else {\n        this.open();\n      }\n    }\n\n    this._closeOnBlurIsPrevented = false;\n  }\n\n  /**\n   * Keyboard navigation\n   */\n\n  _onKeyDown(e) {\n    if (this._isEventKey(e, 'down')) {\n      this._closeOnBlurIsPrevented = true;\n      this._onArrowDown();\n      this._closeOnBlurIsPrevented = false;\n\n      // prevent caret from moving\n      e.preventDefault();\n    } else if (this._isEventKey(e, 'up')) {\n      this._closeOnBlurIsPrevented = true;\n      this._onArrowUp();\n      this._closeOnBlurIsPrevented = false;\n\n      // prevent caret from moving\n      e.preventDefault();\n    } else if (this._isEventKey(e, 'enter')) {\n      this._onEnter(e);\n    } else if (this._isEventKey(e, 'esc')) {\n      this._onEscape(e);\n    }\n  }\n\n  _isEventKey(e, k) {\n    return IronA11yKeysBehavior.keyboardEventMatchesKeys(e, k);\n  }\n\n  _getItemLabel(item) {\n    return this.$.overlay.getItemLabel(item);\n  }\n\n  _getItemValue(item) {\n    let value = item && this.itemValuePath ? this.get(this.itemValuePath, item) : undefined;\n    if (value === undefined) {\n      value = item ? item.toString() : '';\n    }\n    return value;\n  }\n\n  _onArrowDown() {\n    if (this.opened) {\n      if (this.$.overlay._items) {\n        this._focusedIndex = Math.min(this.$.overlay._items.length - 1, this._focusedIndex + 1);\n        this._prefillFocusedItemLabel();\n      }\n    } else {\n      this.open();\n    }\n  }\n\n  _onArrowUp() {\n    if (this.opened) {\n      if (this._focusedIndex > -1) {\n        this._focusedIndex = Math.max(0, this._focusedIndex - 1);\n      } else {\n        if (this.$.overlay._items) {\n          this._focusedIndex = this.$.overlay._items.length - 1;\n        }\n      }\n\n      this._prefillFocusedItemLabel();\n    } else {\n      this.open();\n    }\n  }\n\n  _prefillFocusedItemLabel() {\n    if (this._focusedIndex > -1) {\n      // Reset the input value asyncronously to prevent partial value changes\n      // announce. Makes OSX VoiceOver to announce the complete value instead.\n      this._inputElementValue = '';\n      // 1ms delay needed for OSX VoiceOver to realise input value was reset\n      setTimeout(() => {\n        this._inputElementValue = this._getItemLabel(this.$.overlay._focusedItem);\n        this._markAllSelectionRange();\n      }, 1);\n    }\n  }\n\n  _setSelectionRange(start, end) {\n    // vaadin-text-field does not implement setSelectionRange, hence we need the native input\n    const input = this._nativeInput || this.inputElement;\n\n    // Setting selection range focuses and/or moves the caret in some browsers,\n    // and there's no need to modify the selection range if the input isn't focused anyway.\n    // This affects Safari. When the overlay is open, and then hiting tab, browser should focus\n    // the next focusable element instead of the combo-box itself.\n    // Checking the focused property here is enough instead of checking the activeElement.\n    if (this.hasAttribute('focused') && input && input.setSelectionRange) {\n      try {\n        input.setSelectionRange(start, end);\n      } catch (ignore) {\n        // IE11 randomly fails when running tests in Sauce.\n      }\n    }\n  }\n\n  _markAllSelectionRange() {\n    if (this._inputElementValue !== undefined) {\n      this._setSelectionRange(0, this._inputElementValue.length);\n    }\n  }\n\n  _clearSelectionRange() {\n    if (this._inputElementValue !== undefined) {\n      const pos = this._inputElementValue ? this._inputElementValue.length : 0;\n      this._setSelectionRange(pos, pos);\n    }\n  }\n\n  _onEnter(e) {\n    // should close on enter when custom values are allowed, input field is cleared, or when an existing\n    // item is focused with keyboard.\n    if (this.opened && (this.allowCustomValue || this._inputElementValue === '' || this._focusedIndex > -1)) {\n      this.close();\n\n      // Do not submit the surrounding form.\n      e.preventDefault();\n    }\n  }\n\n  _onEscape(e) {\n    if (this.opened) {\n      this._stopPropagation(e);\n\n      if (this._focusedIndex > -1) {\n        this._focusedIndex = -1;\n        this._revertInputValue();\n      } else {\n        this.cancel();\n      }\n    }\n  }\n\n  _toggleElementChanged(toggleElement) {\n    if (toggleElement) {\n      // Don't blur the input on toggle mousedown\n      toggleElement.addEventListener('mousedown', e => e.preventDefault());\n    }\n  }\n\n  /**\n   * Clears the current value.\n   */\n  _clear() {\n    this.selectedItem = null;\n\n    if (this.allowCustomValue) {\n      this.value = '';\n    }\n\n    if (!this.opened) {\n      this._detectAndDispatchChange();\n    }\n  }\n\n  /**\n   * Reverts back to original value.\n   */\n  cancel() {\n    this._revertInputValueToValue();\n    // In the next _detectAndDispatchChange() call, the change detection should not pass\n    this._lastCommittedValue = this.value;\n    this.close();\n  }\n\n  _onOpened() {\n    // Pre P2 iron-list used a debouncer to render. Now that we synchronously render items,\n    // we need to flush the DOM to make sure it doesn't get flushed in the middle of _render call\n    // because that will cause problems to say the least.\n    flush();\n\n    // With iron-list v1.3.9, calling `notifyResize()` no longer renders\n    // the items synchronously. It is required to have the items rendered\n    // before we update the overlay and the list positions and sizes.\n    this.$.overlay.ensureItemsRendered();\n    this.$.overlay._selector.toggleScrollListener(true);\n\n    // Ensure metrics are up-to-date\n    this.$.overlay.updateViewportBoundaries();\n    // Force iron-list to create reusable nodes. Otherwise it will only start\n    // doing that in scroll listener, which is especially slow in Edge.\n    this.$.overlay._selector._increasePoolIfNeeded();\n    setTimeout(() => this._resizeDropdown(), 1);\n    // Defer scroll position adjustment to prevent freeze in Edge\n    window.requestAnimationFrame(() => this.$.overlay.adjustScrollPosition());\n\n\n    // _detectAndDispatchChange() should not consider value changes done before opening\n    this._lastCommittedValue = this.value;\n  }\n\n  _onClosed() {\n\n    // Happens when the overlay is closed by clicking outside\n    if (this.opened) {\n      this.close();\n    }\n\n    if (this.$.overlay._items && this._focusedIndex > -1) {\n      const focusedItem = this.$.overlay._items[this._focusedIndex];\n      if (this.selectedItem !== focusedItem) {\n        this.selectedItem = focusedItem;\n      }\n      // make sure input field is updated in case value doesn't change (i.e. FOO -> foo)\n      this._inputElementValue = this._getItemLabel(this.selectedItem);\n    } else if (this._inputElementValue === '' || this._inputElementValue === undefined) {\n      this.selectedItem = null;\n\n      if (this.allowCustomValue) {\n        this.value = '';\n      }\n    } else {\n      if (this.allowCustomValue) {\n        const e = new CustomEvent('custom-value-set', {detail: this._inputElementValue, composed: true, cancelable: true, bubbles: true});\n        this.dispatchEvent(e);\n        if (!e.defaultPrevented) {\n          const customValue = this._inputElementValue;\n          this._selectItemForValue(customValue);\n          this.value = customValue;\n        }\n      } else {\n        this._inputElementValue = this.selectedItem ? this._getItemLabel(this.selectedItem) : '';\n      }\n    }\n\n    this._detectAndDispatchChange();\n\n    this._clearSelectionRange();\n\n    if (!this.dataProvider) {\n      this.filter = '';\n    }\n  }\n\n  get _propertyForValue() {\n    return 'value';\n  }\n\n  /**\n   *  Filtering and items handling\n   */\n  _inputValueChanged(e) {\n    // Handle only input events from our inputElement.\n    if (e.composedPath().indexOf(this.inputElement) !== -1) {\n      this._inputElementValue = this.inputElement[this._propertyForValue];\n      this._filterFromInput();\n    }\n  }\n\n  _filterFromInput(e) {\n    if (!this.opened) {\n      this.open();\n    }\n\n    if (this.filter === this._inputElementValue) {\n      // Filter and input value might get out of sync, while keyboard navigating for example.\n      // Afterwards, input value might be changed to the same value as used in filtering.\n      // In situation like these, we need to make sure all the filter changes handlers are run.\n      this._filterChanged(this.filter, this.itemValuePath, this.itemLabelPath);\n    } else {\n      this.filter = this._inputElementValue;\n    }\n  }\n\n  _itemLabelPathChanged(itemLabelPath, oldItemLabelPath) {\n    if (typeof itemLabelPath !== 'string') {\n      console.error('You should set itemLabelPath to a valid string');\n    }\n  }\n\n  _filterChanged(filter, itemValuePath, itemLabelPath) {\n    if (filter === undefined) {\n      return;\n    }\n    if (this.items) {\n      this.filteredItems = this._filterItems(this.items, filter);\n    } else {\n      // With certain use cases (e. g., external filtering), `items` are\n      // undefined. Filtering is unnecessary per se, but the filteredItems\n      // observer should still be invoked to update focused item.\n      this._filteredItemsChanged({path: 'filteredItems', value: this.filteredItems}, itemValuePath, itemLabelPath);\n    }\n  }\n\n  _loadingChanged(loading) {\n    if (loading) {\n      this._focusedIndex = -1;\n    }\n  }\n\n  _revertInputValue() {\n    if (this.filter !== '') {\n      this._inputElementValue = this.filter;\n    } else {\n      this._revertInputValueToValue();\n    }\n    this._clearSelectionRange();\n  }\n\n  _revertInputValueToValue() {\n    if (this.allowCustomValue && !this.selectedItem) {\n      this._inputElementValue = this.value;\n    } else {\n      this._inputElementValue = this._getItemLabel(this.selectedItem);\n    }\n  }\n\n  _resizeDropdown() {\n    this.$.overlay.$.dropdown.notifyResize();\n  }\n\n  _updateHasValue(hasValue) {\n    if (hasValue) {\n      this.setAttribute('has-value', '');\n    } else {\n      this.removeAttribute('has-value');\n    }\n  }\n\n  _selectedItemChanged(selectedItem, itemLabelPath) {\n    if (selectedItem === null || selectedItem === undefined) {\n      if (this.filteredItems) {\n        if (!this.allowCustomValue) {\n          this.value = '';\n        }\n\n        this._updateHasValue(this.value !== '');\n        this._inputElementValue = this.value;\n      }\n    } else {\n      const value = this._getItemValue(selectedItem);\n      if (this.value !== value) {\n        this.value = value;\n      }\n\n      this._updateHasValue(true);\n      this._inputElementValue = this._getItemLabel(selectedItem);\n\n      // Could not be defined in 1.x because ready is called after all prop-setters\n      if (this.inputElement) {\n        this.inputElement[this._propertyForValue] = this._inputElementValue;\n      }\n    }\n\n    this.$.overlay._selectedItem = selectedItem;\n    if (this.filteredItems && this.$.overlay._items) {\n      this._focusedIndex = this.filteredItems.indexOf(selectedItem);\n    }\n  }\n\n  _valueChanged(value, oldVal) {\n    if (value === '' && oldVal === undefined) { // initializing, no need to do anything (#554)\n      return;\n    }\n\n    if (this._isValidValue(value)) {\n      let item;\n      if (this._getItemValue(this.selectedItem) !== value) {\n        this._selectItemForValue(value);\n      } else {\n        item = this.selectedItem;\n      }\n\n      if (!item && this.allowCustomValue) {\n        this._inputElementValue = value;\n      }\n\n      this._updateHasValue(this.value !== '');\n    } else {\n      this.selectedItem = null;\n    }\n    // In the next _detectAndDispatchChange() call, the change detection should pass\n    this._lastCommittedValue = undefined;\n  }\n\n  _detectAndDispatchChange() {\n    if (this.value !== this._lastCommittedValue) {\n      this.dispatchEvent(new CustomEvent('change', {bubbles: true}));\n      this._lastCommittedValue = this.value;\n    }\n  }\n\n  _itemsChanged(items, oldItems) {\n    this._ensureItemsOrDataProvider(() => {\n      this.items = oldItems;\n    });\n  }\n\n  _itemsOrPathsChanged(e, itemValuePath, itemLabelPath) {\n    if (e.value === undefined) {\n      return;\n    }\n    if (e.path === 'items' || e.path === 'items.splices') {\n      this.filteredItems = this.items ? this.items.slice(0) : this.items;\n\n      const valueIndex = this._indexOfValue(this.value, this.items);\n      this._focusedIndex = valueIndex;\n\n      const item = valueIndex > -1 && this.items[valueIndex];\n      if (item) {\n        this.selectedItem = item;\n      }\n    }\n  }\n\n  _filteredItemsChanged(e, itemValuePath, itemLabelPath) {\n    if (e.value === undefined) {\n      return;\n    }\n    if (e.path === 'filteredItems' || e.path === 'filteredItems.splices') {\n      this._setOverlayItems(this.filteredItems);\n\n      this._focusedIndex = this.opened ?\n        this.$.overlay.indexOfLabel(this.filter) :\n        this._indexOfValue(this.value, this.filteredItems);\n\n      if (this.opened) {\n        this._repositionOverlay();\n      }\n    }\n  }\n\n  _filterItems(arr, filter) {\n    if (!arr) {\n      return arr;\n    }\n\n    return arr.filter(item => {\n      filter = filter ? filter.toString().toLowerCase() : '';\n      // Check if item contains input value.\n      return this._getItemLabel(item).toString().toLowerCase().indexOf(filter) > -1;\n    });\n  }\n\n  _selectItemForValue(value) {\n    const valueIndex = this._indexOfValue(value, this.filteredItems);\n    const previouslySelectedItem = this.selectedItem;\n\n    this.selectedItem = valueIndex >= 0\n      ? this.filteredItems[valueIndex]\n      : (this.dataProvider && this.selectedItem === undefined)\n        ? undefined\n        : null;\n\n    if (this.selectedItem === null && previouslySelectedItem === null) {\n      this._selectedItemChanged(this.selectedItem);\n    }\n  }\n\n  _setOverlayItems(items) {\n    this.$.overlay.set('_items', items);\n\n    if (this.opened) {\n      this._resizeDropdown();\n    }\n  }\n\n  _repositionOverlay() {\n    // async needed to reposition correctly after filtering\n    // (especially when aligned on top of input)\n    setTimeout(() => {\n      this._resizeDropdown();\n      this.$.overlay.updateViewportBoundaries();\n      this.$.overlay.ensureItemsRendered();\n      this.$.overlay._selector.notifyResize();\n      flush();\n    }, 1);\n  }\n\n  _indexOfValue(value, items) {\n    if (items && this._isValidValue(value)) {\n      for (let i = 0; i < items.length; i++) {\n        if (this._getItemValue(items[i]) === value) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  /**\n   * Checks if the value is supported as an item value in this control.\n   *\n   * @return {boolean}\n   */\n  _isValidValue(value) {\n    return value !== undefined && value !== null;\n  }\n\n  _overlaySelectedItemChanged(e) {\n    // stop this private event from leaking outside.\n    e.stopPropagation();\n\n    if (e.detail.item instanceof ComboBoxPlaceholder) {\n      // Placeholder items should not be selectable.\n      return;\n    }\n\n    if (this.opened) {\n      this.close();\n    }\n\n    if (this.selectedItem !== e.detail.item) {\n      this.selectedItem = e.detail.item;\n      this._detectAndDispatchChange();\n    }\n  }\n\n\n  /**\n   * Returns true if `value` is valid, and sets the `invalid` flag appropriately.\n   *\n   * @return {boolean} True if the value is valid and sets the `invalid` flag appropriately\n   */\n  validate() {\n    return !(this.invalid = !this.checkValidity());\n  }\n\n  /**\n   * Returns true if the current input value satisfies all constraints (if any)\n   *\n   * You can override the `checkValidity` method for custom validations.\n   */\n  checkValidity() {\n    if (this.inputElement.validate) {\n      return this.inputElement.validate();\n    }\n  }\n\n  get _instanceProps() {\n    return {\n      item: true,\n      index: true,\n      selected: true,\n      focused: true\n    };\n  }\n\n  _ensureTemplatized() {\n    if (!this._TemplateClass) {\n      const tpl = this._itemTemplate || this._getRootTemplate();\n      if (tpl) {\n        this._TemplateClass = templatize(tpl, this, {\n          instanceProps: this._instanceProps,\n          forwardHostProp: function(prop, value) {\n            const items = this.$.overlay._selector.querySelectorAll('vaadin-combo-box-item');\n            Array.prototype.forEach.call(items, item => {\n              if (item._itemTemplateInstance) {\n                item._itemTemplateInstance.set(prop, value);\n                item._itemTemplateInstance.notifyPath(prop, value, true);\n              }\n            });\n          }\n        });\n      }\n    }\n  }\n\n  _getRootTemplate() {\n    return Array.prototype.filter.call(this.children, elem => elem.tagName === 'TEMPLATE')[0];\n  }\n\n  _preventInputBlur() {\n    if (this._toggleElement) {\n      this._toggleElement.addEventListener('click', this._preventDefault);\n    }\n    if (this._clearElement) {\n      this._clearElement.addEventListener('click', this._preventDefault);\n    }\n  }\n\n  _restoreInputBlur() {\n    if (this._toggleElement) {\n      this._toggleElement.removeEventListener('click', this._preventDefault);\n    }\n    if (this._clearElement) {\n      this._clearElement.removeEventListener('click', this._preventDefault);\n    }\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n  }\n\n  _stopPropagation(e) {\n    e.stopPropagation();\n  }\n\n  /**\n   * Fired when the value changes.\n   *\n   * @event value-changed\n   * @param {Object} detail\n   *  @param {String} detail.value the combobox value\n   */\n\n  /**\n   * Fired when selected item changes.\n   *\n   * @event selected-item-changed\n   * @param {Object} detail\n   *  @param {Object|String} detail.value the selected item. Type is the same as the type of `items`.\n   */\n\n  /**\n   * Fired when the user sets a custom value.\n   * @event custom-value-set\n   * @param {String} detail the custom value\n   */\n\n  /**\n   * Fired when value changes.\n   * To comply with https://developer.mozilla.org/en-US/docs/Web/Events/change\n   * @event change\n   */\n};\n","/**\n@license\nCopyright (c) 2018 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { ComboBoxPlaceholder } from './vaadin-combo-box-placeholder.js';\n\n/**\n * @polymerMixin\n */\nexport const ComboBoxDataProviderMixin = superClass => class DataProviderMixin extends superClass {\n\n  static get properties() {\n    return {\n\n      /**\n       * Number of items fetched at a time from the dataprovider.\n       */\n      pageSize: {\n        type: Number,\n        value: 50,\n        observer: '_pageSizeChanged'\n      },\n\n      /**\n       * Total number of items.\n       */\n      size: {\n        type: Number,\n        observer: '_sizeChanged'\n      },\n\n      /**\n       * Function that provides items lazily. Receives arguments `params`, `callback`\n       *\n       * `params.page` Requested page index\n       *\n       * `params.pageSize` Current page size\n       *\n       * `params.filter` Currently applied filter\n       *\n       * `callback(items, size)` Callback function with arguments:\n       *   - `items` Current page of items\n       *   - `size` Total number of items.\n       */\n      dataProvider: {\n        type: Object,\n        observer: '_dataProviderChanged'\n      },\n\n      _pendingRequests: {\n        value: () => {\n          return {};\n        }\n      },\n\n      __placeHolder: {\n        value: new ComboBoxPlaceholder()\n      }\n\n    };\n  }\n\n  static get observers() {\n    return [\n      '_dataProviderFilterChanged(filter, dataProvider)',\n      '_dataProviderClearFilter(dataProvider, opened, value)',\n      '_warnDataProviderValue(dataProvider, value)',\n      '_ensureFirstPage(opened)',\n    ];\n  }\n\n  _dataProviderClearFilter(dataProvider, opened, value) {\n    // Can't depend on filter in this obsever as we don't want\n    // to clear the filter whenever it's set\n    if (dataProvider && this.filter) {\n      this.size = undefined;\n      this._pendingRequests = {};\n      this.filter = '';\n      this.clearCache();\n    }\n  }\n\n  ready() {\n    super.ready();\n    this.clearCache();\n    this.$.overlay.addEventListener('index-requested', e => {\n      const index = e.detail.index;\n      if (index !== undefined) {\n        const page = this._getPageForIndex(index);\n        if (this._shouldLoadPage(page)) {\n          this._loadPage(page);\n        }\n      }\n    });\n  }\n\n  _dataProviderFilterChanged() {\n    if (this.dataProvider && this.opened) {\n      this.size = undefined;\n      this._pendingRequests = {};\n      this.clearCache();\n    }\n  }\n\n  _ensureFirstPage(opened) {\n    if (opened && this._shouldLoadPage(0)) {\n      this._loadPage(0);\n    }\n  }\n\n  _shouldLoadPage(page) {\n    if (!this.filteredItems || this._forceNextRequest) {\n      this._forceNextRequest = false;\n      return true;\n    }\n\n    const loadedItem = this.filteredItems[page * this.pageSize];\n    if (loadedItem !== undefined) {\n      return loadedItem instanceof ComboBoxPlaceholder;\n    } else {\n      return this.size === undefined;\n    }\n  }\n\n  _loadPage(page) {\n    // make sure same page isn't requested multiple times.\n    if (!this._pendingRequests[page] && this.dataProvider) {\n      this.loading = true;\n\n      const params = {\n        page,\n        pageSize: this.pageSize,\n        filter: this.filter\n      };\n\n      const callback = (items, size) => {\n        if (this._pendingRequests[page] === callback) {\n          if (!this.filteredItems) {\n            const filteredItems = [];\n            filteredItems.splice(params.page * params.pageSize, items.length, ...items);\n            this.filteredItems = filteredItems;\n          } else {\n            this.splice('filteredItems', params.page * params.pageSize, items.length, ...items);\n          }\n          // Update selectedItem from filteredItems if value is set\n          if (this._isValidValue(this.value) && this._getItemValue(this.selectedItem) !== this.value) {\n            this._selectItemForValue(this.value);\n          }\n          this.size = size;\n\n          delete this._pendingRequests[page];\n\n          if (Object.keys(this._pendingRequests).length === 0) {\n            this.loading = false;\n          }\n        }\n      };\n      this._pendingRequests[page] = callback;\n      this.dataProvider(params, callback);\n    }\n  }\n\n  _getPageForIndex(index) {\n    return Math.floor(index / this.pageSize);\n  }\n\n  /**\n   * Clears the cached pages and reloads data from dataprovider when needed.\n   */\n  clearCache() {\n    if (!this.dataProvider) {\n      return;\n    }\n    this._pendingRequests = {};\n    const filteredItems = [];\n    for (let i = 0; i < (this.size || 0); i++) {\n      filteredItems.push(this.__placeHolder);\n    }\n    this.filteredItems = filteredItems;\n    if (this.opened) {\n      this._loadPage(0);\n    } else {\n      this._forceNextRequest = true;\n    }\n  }\n\n  _sizeChanged(size = 0) {\n    const filteredItems = (this.filteredItems || []).slice(0, size);\n    for (let i = 0; i < size; i++) {\n      filteredItems[i] = filteredItems[i] !== undefined ? filteredItems[i] : this.__placeHolder;\n    }\n    this.filteredItems = filteredItems;\n  }\n\n  _pageSizeChanged(pageSize, oldPageSize) {\n    if (Math.floor(pageSize) !== pageSize || pageSize === 0) {\n      this.pageSize = oldPageSize;\n      throw new Error('`pageSize` value must be an integer > 0');\n    }\n    this.clearCache();\n  }\n\n  _dataProviderChanged(dataProvider, oldDataProvider) {\n    this._ensureItemsOrDataProvider(() => {\n      this.dataProvider = oldDataProvider;\n    });\n  }\n\n  _ensureItemsOrDataProvider(restoreOldValueCallback) {\n    if (this.items !== undefined && this.dataProvider !== undefined) {\n      restoreOldValueCallback();\n      throw new Error('Using `items` and `dataProvider` together is not supported');\n    }\n  }\n\n  _warnDataProviderValue(dataProvider, value) {\n    if (dataProvider && value !== '' && (this.selectedItem === undefined || this.selectedItem === null)) {\n      const valueIndex = this._indexOfValue(value, this.filteredItems);\n      if (valueIndex < 0 || !this._getItemLabel(this.filteredItems[valueIndex])) {\n        /* eslint-disable no-console */\n        console.warn(\n          'Warning: unable to determine the label for the provided `value`. ' +\n          'Nothing to display in the text field. This usually happens when ' +\n          'setting an initial `value` before any items are returned from ' +\n          'the `dataProvider` callback. Consider setting `selectedItem` ' +\n          'instead of `value`'\n        );\n        /* eslint-enable no-console */\n      }\n    }\n  }\n\n};\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\n\nimport {IronResizableBehavior} from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport {IronScrollTargetBehavior} from '@polymer/iron-scroll-target-behavior/iron-scroll-target-behavior.js';\nimport {OptionalMutableDataBehavior} from '@polymer/polymer/lib/legacy/mutable-data-behavior.js';\nimport {Polymer as Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {Templatizer} from '@polymer/polymer/lib/legacy/templatizer-behavior.js';\nimport {animationFrame, idlePeriod, microTask} from '@polymer/polymer/lib/utils/async.js';\nimport {Debouncer} from '@polymer/polymer/lib/utils/debounce.js';\nimport {enqueueDebouncer, flush} from '@polymer/polymer/lib/utils/flush.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\nimport {matches, translate} from '@polymer/polymer/lib/utils/path.js';\nimport {TemplateInstanceBase} from '@polymer/polymer/lib/utils/templatize.js';\n\nvar IOS = navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\\d+)/);\nvar IOS_TOUCH_SCROLLING = IOS && IOS[1] >= 8;\nvar DEFAULT_PHYSICAL_COUNT = 3;\nvar HIDDEN_Y = '-10000px';\nvar SECRET_TABINDEX = -100;\n\n/**\n\n`iron-list` displays a virtual, 'infinite' list. The template inside\nthe iron-list element represents the DOM to create for each list item.\nThe `items` property specifies an array of list item data.\n\nFor performance reasons, not every item in the list is rendered at once;\ninstead a small subset of actual template elements *(enough to fill the\nviewport)* are rendered and reused as the user scrolls. As such, it is important\nthat all state of the list template is bound to the model driving it, since the\nview may be reused with a new model at any time. Particularly, any state that\nmay change as the result of a user interaction with the list item must be bound\nto the model to avoid view state inconsistency.\n\n### Sizing iron-list\n\n`iron-list` must either be explicitly sized, or delegate scrolling to an\nexplicitly sized parent. By \"explicitly sized\", we mean it either has an\nexplicit CSS `height` property set via a class or inline style, or else is sized\nby other layout means (e.g. the `flex` or `fit` classes).\n\n#### Flexbox - [jsbin](https://jsbin.com/vejoni/edit?html,output)\n\n```html\n<template is=\"x-list\">\n  <style>\n    :host {\n      display: block;\n      height: 100vh;\n      display: flex;\n      flex-direction: column;\n    }\n\n    iron-list {\n      flex: 1 1 auto;\n    }\n  </style>\n  <app-toolbar>App name</app-toolbar>\n  <iron-list items=\"[[items]]\">\n    <template>\n      <div>\n        ...\n      </div>\n    </template>\n  </iron-list>\n</template>\n```\n#### Explicit size - [jsbin](https://jsbin.com/vopucus/edit?html,output)\n```html\n<template is=\"x-list\">\n  <style>\n    :host {\n      display: block;\n    }\n\n    iron-list {\n      height: 100vh; /* don't use % values unless the parent element is sized.\n*\\/\n    }\n  </style>\n  <iron-list items=\"[[items]]\">\n    <template>\n      <div>\n        ...\n      </div>\n    </template>\n  </iron-list>\n</template>\n```\n#### Main document scrolling -\n[jsbin](https://jsbin.com/wevirow/edit?html,output)\n```html\n<head>\n  <style>\n    body {\n      height: 100vh;\n      margin: 0;\n      display: flex;\n      flex-direction: column;\n    }\n\n    app-toolbar {\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n    }\n\n    iron-list {\n      /* add padding since the app-toolbar is fixed at the top *\\/\n      padding-top: 64px;\n    }\n  </style>\n</head>\n<body>\n  <app-toolbar>App name</app-toolbar>\n  <iron-list scroll-target=\"document\">\n    <template>\n      <div>\n        ...\n      </div>\n    </template>\n  </iron-list>\n</body>\n```\n\n`iron-list` must be given a `<template>` which contains exactly one element. In\nthe examples above we used a `<div>`, but you can provide any element (including\ncustom elements).\n\n### Template model\n\nList item templates should bind to template models of the following structure:\n\n```js\n{\n  index: 0,        // index in the item array\n  selected: false, // true if the current item is selected\n  tabIndex: -1,    // a dynamically generated tabIndex for focus management\n  item: {}         // user data corresponding to items[index]\n}\n```\n\nAlternatively, you can change the property name used as data index by changing\nthe `indexAs` property. The `as` property defines the name of the variable to\nadd to the binding scope for the array.\n\nFor example, given the following `data` array:\n\n##### data.json\n\n```js\n[\n  {\"name\": \"Bob\"},\n  {\"name\": \"Tim\"},\n  {\"name\": \"Mike\"}\n]\n```\n\nThe following code would render the list (note the name property is bound from\nthe model object provided to the template scope):\n\n```html\n<iron-ajax url=\"data.json\" last-response=\"{{data}}\" auto></iron-ajax>\n<iron-list items=\"[[data]]\" as=\"item\">\n  <template>\n    <div>\n      Name: [[item.name]]\n    </div>\n  </template>\n</iron-list>\n```\n\n### Grid layout\n\n`iron-list` supports a grid layout in addition to linear layout by setting\nthe `grid` attribute.  In this case, the list template item must have both fixed\nwidth and height (e.g. via CSS). Based on this, the number of items\nper row are determined automatically based on the size of the list viewport.\n\n### Accessibility\n\n`iron-list` automatically manages the focus state for the items. It also\nprovides a `tabIndex` property within the template scope that can be used for\nkeyboard navigation. For example, users can press the up and down keys to move\nto previous and next items in the list:\n\n```html\n<iron-list items=\"[[data]]\" as=\"item\">\n  <template>\n    <div tabindex$=\"[[tabIndex]]\">\n      Name: [[item.name]]\n    </div>\n  </template>\n</iron-list>\n```\n\n### Styling\n\nYou can use the `--iron-list-items-container` mixin to style the container of\nitems:\n\n```css\niron-list {\n --iron-list-items-container: {\n    margin: auto;\n  };\n}\n```\n\n### Resizing\n\n`iron-list` lays out the items when it receives a notification via the\n`iron-resize` event. This event is fired by any element that implements\n`IronResizableBehavior`.\n\nBy default, elements such as `iron-pages`, `paper-tabs` or `paper-dialog` will\ntrigger this event automatically. If you hide the list manually (e.g. you use\n`display: none`) you might want to implement `IronResizableBehavior` or fire\nthis event manually right after the list became visible again. For example:\n\n```js\ndocument.querySelector('iron-list').fire('iron-resize');\n```\n\n### When should `<iron-list>` be used?\n\n`iron-list` should be used when a page has significantly more DOM nodes than the\nones visible on the screen. e.g. the page has 500 nodes, but only 20 are visible\nat a time. This is why we refer to it as a `virtual` list. In this case, a\n`dom-repeat` will still create 500 nodes which could slow down the web app, but\n`iron-list` will only create 20.\n\nHowever, having an `iron-list` does not mean that you can load all the data at\nonce. Say you have a million records in the database, you want to split the data\ninto pages so you can bring in a page at the time. The page could contain 500\nitems, and iron-list will only render 20.\n\n@group Iron Element\n@element iron-list\n@demo demo/index.html\n\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n\n      @media only screen and (-webkit-max-device-pixel-ratio: 1) {\n        :host {\n          will-change: transform;\n        }\n      }\n\n      #items {\n        @apply --iron-list-items-container;\n        position: relative;\n      }\n\n      :host(:not([grid])) #items > ::slotted(*) {\n        width: 100%;\n      }\n\n      #items > ::slotted(*) {\n        box-sizing: border-box;\n        margin: 0;\n        position: absolute;\n        top: 0;\n        will-change: transform;\n      }\n    </style>\n\n    <array-selector id=\"selector\" items=\"{{items}}\" selected=\"{{selectedItems}}\" selected-item=\"{{selectedItem}}\"></array-selector>\n\n    <div id=\"items\">\n      <slot></slot>\n    </div>\n`,\n\n  is: 'iron-list',\n\n  properties: {\n\n    /**\n     * An array containing items determining how many instances of the template\n     * to stamp and that that each template instance should bind to.\n     */\n    items: {type: Array},\n\n    /**\n     * The name of the variable to add to the binding scope for the array\n     * element associated with a given template instance.\n     */\n    as: {type: String, value: 'item'},\n\n    /**\n     * The name of the variable to add to the binding scope with the index\n     * for the row.\n     */\n    indexAs: {type: String, value: 'index'},\n\n    /**\n     * The name of the variable to add to the binding scope to indicate\n     * if the row is selected.\n     */\n    selectedAs: {type: String, value: 'selected'},\n\n    /**\n     * When true, the list is rendered as a grid. Grid items must have\n     * fixed width and height set via CSS. e.g.\n     *\n     * ```html\n     * <iron-list grid>\n     *   <template>\n     *      <div style=\"width: 100px; height: 100px;\"> 100x100 </div>\n     *   </template>\n     * </iron-list>\n     * ```\n     */\n    grid: {\n      type: Boolean,\n      value: false,\n      reflectToAttribute: true,\n      observer: '_gridChanged'\n    },\n\n    /**\n     * When true, tapping a row will select the item, placing its data model\n     * in the set of selected items retrievable via the selection property.\n     *\n     * Note that tapping focusable elements within the list item will not\n     * result in selection, since they are presumed to have their * own action.\n     */\n    selectionEnabled: {type: Boolean, value: false},\n\n    /**\n     * When `multiSelection` is false, this is the currently selected item, or\n     * `null` if no item is selected.\n     */\n    selectedItem: {type: Object, notify: true},\n\n    /**\n     * When `multiSelection` is true, this is an array that contains the\n     * selected items.\n     */\n    selectedItems: {type: Object, notify: true},\n\n    /**\n     * When `true`, multiple items may be selected at once (in this case,\n     * `selected` is an array of currently selected items).  When `false`,\n     * only one item may be selected at a time.\n     */\n    multiSelection: {type: Boolean, value: false},\n\n    /**\n     * The offset top from the scrolling element to the iron-list element.\n     * This value can be computed using the position returned by\n     * `getBoundingClientRect()` although it's preferred to use a constant value\n     * when possible.\n     *\n     * This property is useful when an external scrolling element is used and\n     * there's some offset between the scrolling element and the list. For\n     * example: a header is placed above the list.\n     */\n    scrollOffset: {type: Number, value: 0}\n  },\n\n  observers: [\n    '_itemsChanged(items.*)',\n    '_selectionEnabledChanged(selectionEnabled)',\n    '_multiSelectionChanged(multiSelection)',\n    '_setOverflow(scrollTarget, scrollOffset)'\n  ],\n\n  behaviors: [\n    Templatizer,\n    IronResizableBehavior,\n    IronScrollTargetBehavior,\n    OptionalMutableDataBehavior\n  ],\n\n  /**\n   * The ratio of hidden tiles that should remain in the scroll direction.\n   * Recommended value ~0.5, so it will distribute tiles evenly in both\n   * directions.\n   */\n  _ratio: 0.5,\n\n  /**\n   * The padding-top value for the list.\n   */\n  _scrollerPaddingTop: 0,\n\n  /**\n   * This value is the same as `scrollTop`.\n   */\n  _scrollPosition: 0,\n\n  /**\n   * The sum of the heights of all the tiles in the DOM.\n   */\n  _physicalSize: 0,\n\n  /**\n   * The average `offsetHeight` of the tiles observed till now.\n   */\n  _physicalAverage: 0,\n\n  /**\n   * The number of tiles which `offsetHeight` > 0 observed until now.\n   */\n  _physicalAverageCount: 0,\n\n  /**\n   * The Y position of the item rendered in the `_physicalStart`\n   * tile relative to the scrolling list.\n   */\n  _physicalTop: 0,\n\n  /**\n   * The number of items in the list.\n   */\n  _virtualCount: 0,\n\n  /**\n   * The estimated scroll height based on `_physicalAverage`\n   */\n  _estScrollHeight: 0,\n\n  /**\n   * The scroll height of the dom node\n   */\n  _scrollHeight: 0,\n\n  /**\n   * The height of the list. This is referred as the viewport in the context of\n   * list.\n   */\n  _viewportHeight: 0,\n\n  /**\n   * The width of the list. This is referred as the viewport in the context of\n   * list.\n   */\n  _viewportWidth: 0,\n\n  /**\n   * An array of DOM nodes that are currently in the tree\n   * @type {?Array<!TemplateInstanceBase>}\n   */\n  _physicalItems: null,\n\n  /**\n   * An array of heights for each item in `_physicalItems`\n   * @type {?Array<number>}\n   */\n  _physicalSizes: null,\n\n  /**\n   * A cached value for the first visible index.\n   * See `firstVisibleIndex`\n   * @type {?number}\n   */\n  _firstVisibleIndexVal: null,\n\n  /**\n   * A cached value for the last visible index.\n   * See `lastVisibleIndex`\n   * @type {?number}\n   */\n  _lastVisibleIndexVal: null,\n\n  /**\n   * The max number of pages to render. One page is equivalent to the height of\n   * the list.\n   */\n  _maxPages: 2,\n\n  /**\n   * The currently focused physical item.\n   */\n  _focusedItem: null,\n\n  /**\n   * The virtual index of the focused item.\n   */\n  _focusedVirtualIndex: -1,\n\n  /**\n   * The physical index of the focused item.\n   */\n  _focusedPhysicalIndex: -1,\n\n  /**\n   * The the item that is focused if it is moved offscreen.\n   * @private {?TemplatizerNode}\n   */\n  _offscreenFocusedItem: null,\n\n  /**\n   * The item that backfills the `_offscreenFocusedItem` in the physical items\n   * list when that item is moved offscreen.\n   */\n  _focusBackfillItem: null,\n\n  /**\n   * The maximum items per row\n   */\n  _itemsPerRow: 1,\n\n  /**\n   * The width of each grid item\n   */\n  _itemWidth: 0,\n\n  /**\n   * The height of the row in grid layout.\n   */\n  _rowHeight: 0,\n\n  /**\n   * The cost of stamping a template in ms.\n   */\n  _templateCost: 0,\n\n  /**\n   * Needed to pass event.model property to declarative event handlers -\n   * see polymer/polymer#4339.\n   */\n  _parentModel: true,\n\n  /**\n   * The bottom of the physical content.\n   */\n  get _physicalBottom() {\n    return this._physicalTop + this._physicalSize;\n  },\n\n  /**\n   * The bottom of the scroll.\n   */\n  get _scrollBottom() {\n    return this._scrollPosition + this._viewportHeight;\n  },\n\n  /**\n   * The n-th item rendered in the last physical item.\n   */\n  get _virtualEnd() {\n    return this._virtualStart + this._physicalCount - 1;\n  },\n\n  /**\n   * The height of the physical content that isn't on the screen.\n   */\n  get _hiddenContentSize() {\n    var size =\n        this.grid ? this._physicalRows * this._rowHeight : this._physicalSize;\n    return size - this._viewportHeight;\n  },\n\n  /**\n   * The parent node for the _userTemplate.\n   */\n  get _itemsParent() {\n    return dom(dom(this._userTemplate).parentNode);\n  },\n\n  /**\n   * The maximum scroll top value.\n   */\n  get _maxScrollTop() {\n    return this._estScrollHeight - this._viewportHeight + this._scrollOffset;\n  },\n\n  /**\n   * The largest n-th value for an item such that it can be rendered in\n   * `_physicalStart`.\n   */\n  get _maxVirtualStart() {\n    var virtualCount = this._convertIndexToCompleteRow(this._virtualCount);\n    return Math.max(0, virtualCount - this._physicalCount);\n  },\n\n  set _virtualStart(val) {\n    val = this._clamp(val, 0, this._maxVirtualStart);\n    if (this.grid) {\n      val = val - (val % this._itemsPerRow);\n    }\n    this._virtualStartVal = val;\n  },\n\n  get _virtualStart() {\n    return this._virtualStartVal || 0;\n  },\n\n  /**\n   * The k-th tile that is at the top of the scrolling list.\n   */\n  set _physicalStart(val) {\n    val = val % this._physicalCount;\n    if (val < 0) {\n      val = this._physicalCount + val;\n    }\n    if (this.grid) {\n      val = val - (val % this._itemsPerRow);\n    }\n    this._physicalStartVal = val;\n  },\n\n  get _physicalStart() {\n    return this._physicalStartVal || 0;\n  },\n\n  /**\n   * The k-th tile that is at the bottom of the scrolling list.\n   */\n  get _physicalEnd() {\n    return (this._physicalStart + this._physicalCount - 1) %\n        this._physicalCount;\n  },\n\n  set _physicalCount(val) {\n    this._physicalCountVal = val;\n  },\n\n  get _physicalCount() {\n    return this._physicalCountVal || 0;\n  },\n\n  /**\n   * An optimal physical size such that we will have enough physical items\n   * to fill up the viewport and recycle when the user scrolls.\n   *\n   * This default value assumes that we will at least have the equivalent\n   * to a viewport of physical items above and below the user's viewport.\n   */\n  get _optPhysicalSize() {\n    return this._viewportHeight === 0 ? Infinity :\n                                        this._viewportHeight * this._maxPages;\n  },\n\n  /**\n   * True if the current list is visible.\n   */\n  get _isVisible() {\n    return Boolean(this.offsetWidth || this.offsetHeight);\n  },\n\n  /**\n   * Gets the index of the first visible item in the viewport.\n   *\n   * @type {number}\n   */\n  get firstVisibleIndex() {\n    var idx = this._firstVisibleIndexVal;\n    if (idx == null) {\n      var physicalOffset = this._physicalTop + this._scrollOffset;\n\n      idx = this._iterateItems(function(pidx, vidx) {\n        physicalOffset += this._getPhysicalSizeIncrement(pidx);\n\n        if (physicalOffset > this._scrollPosition) {\n          return this.grid ? vidx - (vidx % this._itemsPerRow) : vidx;\n        }\n        // Handle a partially rendered final row in grid mode\n        if (this.grid && this._virtualCount - 1 === vidx) {\n          return vidx - (vidx % this._itemsPerRow);\n        }\n      }) ||\n          0;\n      this._firstVisibleIndexVal = idx;\n    }\n    return idx;\n  },\n\n  /**\n   * Gets the index of the last visible item in the viewport.\n   *\n   * @type {number}\n   */\n  get lastVisibleIndex() {\n    var idx = this._lastVisibleIndexVal;\n    if (idx == null) {\n      if (this.grid) {\n        idx = Math.min(\n            this._virtualCount,\n            this.firstVisibleIndex + this._estRowsInView * this._itemsPerRow -\n                1);\n      } else {\n        var physicalOffset = this._physicalTop + this._scrollOffset;\n        this._iterateItems(function(pidx, vidx) {\n          if (physicalOffset < this._scrollBottom) {\n            idx = vidx;\n          }\n          physicalOffset += this._getPhysicalSizeIncrement(pidx);\n        });\n      }\n      this._lastVisibleIndexVal = idx;\n    }\n    return idx;\n  },\n\n  get _defaultScrollTarget() {\n    return this;\n  },\n\n  get _virtualRowCount() {\n    return Math.ceil(this._virtualCount / this._itemsPerRow);\n  },\n\n  get _estRowsInView() {\n    return Math.ceil(this._viewportHeight / this._rowHeight);\n  },\n\n  get _physicalRows() {\n    return Math.ceil(this._physicalCount / this._itemsPerRow);\n  },\n\n  get _scrollOffset() {\n    return this._scrollerPaddingTop + this.scrollOffset;\n  },\n\n  ready: function() {\n    this.addEventListener('focus', this._didFocus.bind(this), true);\n  },\n\n  attached: function() {\n    this._debounce('_render', this._render, animationFrame);\n    // `iron-resize` is fired when the list is attached if the event is added\n    // before attached causing unnecessary work.\n    this.listen(this, 'iron-resize', '_resizeHandler');\n    this.listen(this, 'keydown', '_keydownHandler');\n  },\n\n  detached: function() {\n    this.unlisten(this, 'iron-resize', '_resizeHandler');\n    this.unlisten(this, 'keydown', '_keydownHandler');\n  },\n\n  /**\n   * Set the overflow property if this element has its own scrolling region\n   */\n  _setOverflow: function(scrollTarget) {\n    this.style.webkitOverflowScrolling = scrollTarget === this ? 'touch' : '';\n    this.style.overflowY = scrollTarget === this ? 'auto' : '';\n    // Clear cache.\n    this._lastVisibleIndexVal = null;\n    this._firstVisibleIndexVal = null;\n    this._debounce('_render', this._render, animationFrame);\n  },\n\n  /**\n   * Invoke this method if you dynamically update the viewport's\n   * size or CSS padding.\n   *\n   * @method updateViewportBoundaries\n   */\n  updateViewportBoundaries: function() {\n    var styles = window.getComputedStyle(this);\n    this._scrollerPaddingTop =\n        this.scrollTarget === this ? 0 : parseInt(styles['padding-top'], 10);\n    this._isRTL = Boolean(styles.direction === 'rtl');\n    this._viewportWidth = this.$.items.offsetWidth;\n    this._viewportHeight = this._scrollTargetHeight;\n    this.grid && this._updateGridMetrics();\n  },\n\n  /**\n   * Recycles the physical items when needed.\n   */\n  _scrollHandler: function() {\n    var scrollTop = Math.max(0, Math.min(this._maxScrollTop, this._scrollTop));\n    var delta = scrollTop - this._scrollPosition;\n    var isScrollingDown = delta >= 0;\n    // Track the current scroll position.\n    this._scrollPosition = scrollTop;\n    // Clear indexes for first and last visible indexes.\n    this._firstVisibleIndexVal = null;\n    this._lastVisibleIndexVal = null;\n    // Random access.\n    if (Math.abs(delta) > this._physicalSize && this._physicalSize > 0) {\n      delta = delta - this._scrollOffset;\n      var idxAdjustment =\n          Math.round(delta / this._physicalAverage) * this._itemsPerRow;\n      this._virtualStart = this._virtualStart + idxAdjustment;\n      this._physicalStart = this._physicalStart + idxAdjustment;\n      // Estimate new physical offset.\n      this._physicalTop = Math.floor(this._virtualStart / this._itemsPerRow) *\n          this._physicalAverage;\n      this._update();\n    } else if (this._physicalCount > 0) {\n      var reusables = this._getReusables(isScrollingDown);\n      if (isScrollingDown) {\n        this._physicalTop = reusables.physicalTop;\n        this._virtualStart = this._virtualStart + reusables.indexes.length;\n        this._physicalStart = this._physicalStart + reusables.indexes.length;\n      } else {\n        this._virtualStart = this._virtualStart - reusables.indexes.length;\n        this._physicalStart = this._physicalStart - reusables.indexes.length;\n      }\n      this._update(\n          reusables.indexes, isScrollingDown ? null : reusables.indexes);\n      this._debounce(\n          '_increasePoolIfNeeded',\n          this._increasePoolIfNeeded.bind(this, 0),\n          microTask);\n    }\n  },\n\n  /**\n   * Returns an object that contains the indexes of the physical items\n   * that might be reused and the physicalTop.\n   *\n   * @param {boolean} fromTop If the potential reusable items are above the scrolling region.\n   */\n  _getReusables: function(fromTop) {\n    var ith, lastIth, offsetContent, physicalItemHeight;\n    var idxs = [];\n    var protectedOffsetContent = this._hiddenContentSize * this._ratio;\n    var virtualStart = this._virtualStart;\n    var virtualEnd = this._virtualEnd;\n    var physicalCount = this._physicalCount;\n    var top = this._physicalTop + this._scrollOffset;\n    var bottom = this._physicalBottom + this._scrollOffset;\n    var scrollTop = this._scrollTop;\n    var scrollBottom = this._scrollBottom;\n\n    if (fromTop) {\n      ith = this._physicalStart;\n      lastIth = this._physicalEnd;\n      offsetContent = scrollTop - top;\n    } else {\n      ith = this._physicalEnd;\n      lastIth = this._physicalStart;\n      offsetContent = bottom - scrollBottom;\n    }\n    while (true) {\n      physicalItemHeight = this._getPhysicalSizeIncrement(ith);\n      offsetContent = offsetContent - physicalItemHeight;\n      if (idxs.length >= physicalCount ||\n          offsetContent <= protectedOffsetContent) {\n        break;\n      }\n      if (fromTop) {\n        // Check that index is within the valid range.\n        if (virtualEnd + idxs.length + 1 >= this._virtualCount) {\n          break;\n        }\n        // Check that the index is not visible.\n        if (top + physicalItemHeight >= scrollTop - this._scrollOffset) {\n          break;\n        }\n        idxs.push(ith);\n        top = top + physicalItemHeight;\n        ith = (ith + 1) % physicalCount;\n      } else {\n        // Check that index is within the valid range.\n        if (virtualStart - idxs.length <= 0) {\n          break;\n        }\n        // Check that the index is not visible.\n        if (top + this._physicalSize - physicalItemHeight <= scrollBottom) {\n          break;\n        }\n        idxs.push(ith);\n        top = top - physicalItemHeight;\n        ith = (ith === 0) ? physicalCount - 1 : ith - 1;\n      }\n    }\n    return {indexes: idxs, physicalTop: top - this._scrollOffset};\n  },\n\n  /**\n   * Update the list of items, starting from the `_virtualStart` item.\n   * @param {!Array<number>=} itemSet\n   * @param {!Array<number>=} movingUp\n   */\n  _update: function(itemSet, movingUp) {\n    if ((itemSet && itemSet.length === 0) || this._physicalCount === 0) {\n      return;\n    }\n    this._manageFocus();\n    this._assignModels(itemSet);\n    this._updateMetrics(itemSet);\n    // Adjust offset after measuring.\n    if (movingUp) {\n      while (movingUp.length) {\n        var idx = movingUp.pop();\n        this._physicalTop -= this._getPhysicalSizeIncrement(idx);\n      }\n    }\n    this._positionItems();\n    this._updateScrollerSize();\n  },\n\n  /**\n   * Creates a pool of DOM elements and attaches them to the local dom.\n   *\n   * @param {number} size Size of the pool\n   */\n  _createPool: function(size) {\n    this._ensureTemplatized();\n    var i, inst;\n    var physicalItems = new Array(size);\n    for (i = 0; i < size; i++) {\n      inst = this.stamp(null);\n      // TODO(blasten):\n      // First element child is item; Safari doesn't support children[0]\n      // on a doc fragment. Test this to see if it still matters.\n      physicalItems[i] = inst.root.querySelector('*');\n      this._itemsParent.appendChild(inst.root);\n    }\n    return physicalItems;\n  },\n\n  _isClientFull: function() {\n    return this._scrollBottom != 0 &&\n        this._physicalBottom - 1 >= this._scrollBottom &&\n        this._physicalTop <= this._scrollPosition;\n  },\n\n  /**\n   * Increases the pool size.\n   */\n  _increasePoolIfNeeded: function(count) {\n    var nextPhysicalCount = this._clamp(\n        this._physicalCount + count,\n        DEFAULT_PHYSICAL_COUNT,\n        this._virtualCount - this._virtualStart);\n    nextPhysicalCount = this._convertIndexToCompleteRow(nextPhysicalCount);\n    if (this.grid) {\n      var correction = nextPhysicalCount % this._itemsPerRow;\n      if (correction && nextPhysicalCount - correction <= this._physicalCount) {\n        nextPhysicalCount += this._itemsPerRow;\n      }\n      nextPhysicalCount -= correction;\n    }\n    var delta = nextPhysicalCount - this._physicalCount;\n    var nextIncrease = Math.round(this._physicalCount * 0.5);\n\n    if (delta < 0) {\n      return;\n    }\n    if (delta > 0) {\n      var ts = window.performance.now();\n      // Concat arrays in place.\n      [].push.apply(this._physicalItems, this._createPool(delta));\n      // Push 0s into physicalSizes. Can't use Array.fill because IE11 doesn't\n      // support it.\n      for (var i = 0; i < delta; i++) {\n        this._physicalSizes.push(0);\n      }\n      this._physicalCount = this._physicalCount + delta;\n      // Update the physical start if it needs to preserve the model of the\n      // focused item. In this situation, the focused item is currently rendered\n      // and its model would have changed after increasing the pool if the\n      // physical start remained unchanged.\n      if (this._physicalStart > this._physicalEnd &&\n          this._isIndexRendered(this._focusedVirtualIndex) &&\n          this._getPhysicalIndex(this._focusedVirtualIndex) <\n              this._physicalEnd) {\n        this._physicalStart = this._physicalStart + delta;\n      }\n      this._update();\n      this._templateCost = (window.performance.now() - ts) / delta;\n      nextIncrease = Math.round(this._physicalCount * 0.5);\n    }\n    // The upper bounds is not fixed when dealing with a grid that doesn't\n    // fill it's last row with the exact number of items per row.\n    if (this._virtualEnd >= this._virtualCount - 1 || nextIncrease === 0) {\n      // Do nothing.\n    } else if (!this._isClientFull()) {\n      this._debounce(\n          '_increasePoolIfNeeded',\n          this._increasePoolIfNeeded.bind(this, nextIncrease),\n          microTask);\n    } else if (this._physicalSize < this._optPhysicalSize) {\n      // Yield and increase the pool during idle time until the physical size is\n      // optimal.\n      this._debounce(\n          '_increasePoolIfNeeded',\n          this._increasePoolIfNeeded.bind(\n              this,\n              this._clamp(\n                  Math.round(50 / this._templateCost), 1, nextIncrease)),\n          idlePeriod);\n    }\n  },\n\n  /**\n   * Renders the a new list.\n   */\n  _render: function() {\n    if (!this.isAttached || !this._isVisible) {\n      return;\n    }\n    if (this._physicalCount !== 0) {\n      var reusables = this._getReusables(true);\n      this._physicalTop = reusables.physicalTop;\n      this._virtualStart = this._virtualStart + reusables.indexes.length;\n      this._physicalStart = this._physicalStart + reusables.indexes.length;\n      this._update(reusables.indexes);\n      this._update();\n      this._increasePoolIfNeeded(0);\n    } else if (this._virtualCount > 0) {\n      // Initial render\n      this.updateViewportBoundaries();\n      this._increasePoolIfNeeded(DEFAULT_PHYSICAL_COUNT);\n    }\n  },\n\n  /**\n   * Templetizes the user template.\n   */\n  _ensureTemplatized: function() {\n    if (this.ctor) {\n      return;\n    }\n    this._userTemplate = this.queryEffectiveChildren('template');\n    if (!this._userTemplate) {\n      console.warn('iron-list requires a template to be provided in light-dom');\n    }\n    var instanceProps = {};\n    instanceProps.__key__ = true;\n    instanceProps[this.as] = true;\n    instanceProps[this.indexAs] = true;\n    instanceProps[this.selectedAs] = true;\n    instanceProps.tabIndex = true;\n    this._instanceProps = instanceProps;\n    this.templatize(this._userTemplate, this.mutableData);\n  },\n\n  _gridChanged: function(newGrid, oldGrid) {\n    if (typeof oldGrid === 'undefined')\n      return;\n    this.notifyResize();\n    flush();\n    newGrid && this._updateGridMetrics();\n  },\n\n  /**\n   * Called when the items have changed. That is, reassignments\n   * to `items`, splices or updates to a single item.\n   */\n  _itemsChanged: function(change) {\n    if (change.path === 'items') {\n      this._virtualStart = 0;\n      this._physicalTop = 0;\n      this._virtualCount = this.items ? this.items.length : 0;\n      this._physicalIndexForKey = {};\n      this._firstVisibleIndexVal = null;\n      this._lastVisibleIndexVal = null;\n      this._physicalCount = this._physicalCount || 0;\n      this._physicalItems = this._physicalItems || [];\n      this._physicalSizes = this._physicalSizes || [];\n      this._physicalStart = 0;\n      if (this._scrollTop > this._scrollOffset) {\n        this._resetScrollPosition(0);\n      }\n      this._removeFocusedItem();\n      this._debounce('_render', this._render, animationFrame);\n    } else if (change.path === 'items.splices') {\n      this._adjustVirtualIndex(change.value.indexSplices);\n      this._virtualCount = this.items ? this.items.length : 0;\n      // Only blur if at least one item is added or removed.\n      var itemAddedOrRemoved = change.value.indexSplices.some(function(splice) {\n        return splice.addedCount > 0 || splice.removed.length > 0;\n      });\n      if (itemAddedOrRemoved) {\n        // Only blur activeElement if it is a descendant of the list (#505,\n        // #507).\n        var activeElement = this._getActiveElement();\n        if (this.contains(activeElement)) {\n          activeElement.blur();\n        }\n      }\n      // Render only if the affected index is rendered.\n      var affectedIndexRendered =\n          change.value.indexSplices.some(function(splice) {\n            return splice.index + splice.addedCount >= this._virtualStart &&\n                splice.index <= this._virtualEnd;\n          }, this);\n      if (!this._isClientFull() || affectedIndexRendered) {\n        this._debounce('_render', this._render, animationFrame);\n      }\n    } else if (change.path !== 'items.length') {\n      this._forwardItemPath(change.path, change.value);\n    }\n  },\n\n  _forwardItemPath: function(path, value) {\n    path = path.slice(6);  // 'items.'.length == 6\n    var dot = path.indexOf('.');\n    if (dot === -1) {\n      dot = path.length;\n    }\n    var isIndexRendered;\n    var pidx;\n    var inst;\n    var offscreenInstance = this.modelForElement(this._offscreenFocusedItem);\n    var vidx = parseInt(path.substring(0, dot), 10);\n    isIndexRendered = this._isIndexRendered(vidx);\n    if (isIndexRendered) {\n      pidx = this._getPhysicalIndex(vidx);\n      inst = this.modelForElement(this._physicalItems[pidx]);\n    } else if (offscreenInstance) {\n      inst = offscreenInstance;\n    }\n\n    if (!inst || inst[this.indexAs] !== vidx) {\n      return;\n    }\n    path = path.substring(dot + 1);\n    path = this.as + (path ? '.' + path : '');\n    inst._setPendingPropertyOrPath(path, value, false, true);\n    inst._flushProperties && inst._flushProperties(true);\n    // TODO(blasten): V1 doesn't do this and it's a bug\n    if (isIndexRendered) {\n      this._updateMetrics([pidx]);\n      this._positionItems();\n      this._updateScrollerSize();\n    }\n  },\n\n  /**\n   * @param {!Array<!Object>} splices\n   */\n  _adjustVirtualIndex: function(splices) {\n    splices.forEach(function(splice) {\n      // deselect removed items\n      splice.removed.forEach(this._removeItem, this);\n      // We only need to care about changes happening above the current position\n      if (splice.index < this._virtualStart) {\n        var delta = Math.max(\n            splice.addedCount - splice.removed.length,\n            splice.index - this._virtualStart);\n        this._virtualStart = this._virtualStart + delta;\n        if (this._focusedVirtualIndex >= 0) {\n          this._focusedVirtualIndex = this._focusedVirtualIndex + delta;\n        }\n      }\n    }, this);\n  },\n\n  _removeItem: function(item) {\n    this.$.selector.deselect(item);\n    // remove the current focused item\n    if (this._focusedItem &&\n        this.modelForElement(this._focusedItem)[this.as] === item) {\n      this._removeFocusedItem();\n    }\n  },\n\n  /**\n   * Executes a provided function per every physical index in `itemSet`\n   * `itemSet` default value is equivalent to the entire set of physical\n   * indexes.\n   *\n   * @param {!function(number, number)} fn\n   * @param {!Array<number>=} itemSet\n   */\n  _iterateItems: function(fn, itemSet) {\n    var pidx, vidx, rtn, i;\n\n    if (arguments.length === 2 && itemSet) {\n      for (i = 0; i < itemSet.length; i++) {\n        pidx = itemSet[i];\n        vidx = this._computeVidx(pidx);\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n    } else {\n      pidx = this._physicalStart;\n      vidx = this._virtualStart;\n      for (; pidx < this._physicalCount; pidx++, vidx++) {\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n      for (pidx = 0; pidx < this._physicalStart; pidx++, vidx++) {\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n    }\n  },\n\n  /**\n   * Returns the virtual index for a given physical index\n   *\n   * @param {number} pidx Physical index\n   * @return {number}\n   */\n  _computeVidx: function(pidx) {\n    if (pidx >= this._physicalStart) {\n      return this._virtualStart + (pidx - this._physicalStart);\n    }\n    return this._virtualStart + (this._physicalCount - this._physicalStart) +\n        pidx;\n  },\n\n  /**\n   * Assigns the data models to a given set of items.\n   * @param {!Array<number>=} itemSet\n   */\n  _assignModels: function(itemSet) {\n    this._iterateItems(function(pidx, vidx) {\n      var el = this._physicalItems[pidx];\n      var item = this.items && this.items[vidx];\n      if (item != null) {\n        var inst = this.modelForElement(el);\n        inst.__key__ = null;\n        this._forwardProperty(inst, this.as, item);\n        this._forwardProperty(\n            inst, this.selectedAs, this.$.selector.isSelected(item));\n        this._forwardProperty(inst, this.indexAs, vidx);\n        this._forwardProperty(\n            inst, 'tabIndex', this._focusedVirtualIndex === vidx ? 0 : -1);\n        this._physicalIndexForKey[inst.__key__] = pidx;\n        inst._flushProperties && inst._flushProperties(true);\n        el.removeAttribute('hidden');\n      } else {\n        el.setAttribute('hidden', '');\n      }\n    }, itemSet);\n  },\n\n  /**\n   * Updates the height for a given set of items.\n   *\n   * @param {!Array<number>=} itemSet\n   */\n  _updateMetrics: function(itemSet) {\n    // Make sure we distributed all the physical items\n    // so we can measure them.\n    flush();\n\n    var newPhysicalSize = 0;\n    var oldPhysicalSize = 0;\n    var prevAvgCount = this._physicalAverageCount;\n    var prevPhysicalAvg = this._physicalAverage;\n\n    this._iterateItems(function(pidx, vidx) {\n      oldPhysicalSize += this._physicalSizes[pidx];\n      this._physicalSizes[pidx] = this._physicalItems[pidx].offsetHeight;\n      newPhysicalSize += this._physicalSizes[pidx];\n      this._physicalAverageCount += this._physicalSizes[pidx] ? 1 : 0;\n    }, itemSet);\n\n    if (this.grid) {\n      this._updateGridMetrics();\n      this._physicalSize =\n          Math.ceil(this._physicalCount / this._itemsPerRow) * this._rowHeight;\n    } else {\n      oldPhysicalSize = (this._itemsPerRow === 1) ?\n          oldPhysicalSize :\n          Math.ceil(this._physicalCount / this._itemsPerRow) * this._rowHeight;\n      this._physicalSize =\n          this._physicalSize + newPhysicalSize - oldPhysicalSize;\n      this._itemsPerRow = 1;\n    }\n    // Update the average if it measured something.\n    if (this._physicalAverageCount !== prevAvgCount) {\n      this._physicalAverage = Math.round(\n          ((prevPhysicalAvg * prevAvgCount) + newPhysicalSize) /\n          this._physicalAverageCount);\n    }\n  },\n\n  _updateGridMetrics: function() {\n    this._itemWidth = this._physicalCount > 0 ?\n        this._physicalItems[0].getBoundingClientRect().width :\n        200;\n    this._rowHeight =\n        this._physicalCount > 0 ? this._physicalItems[0].offsetHeight : 200;\n    this._itemsPerRow = this._itemWidth ?\n        Math.floor(this._viewportWidth / this._itemWidth) :\n        this._itemsPerRow;\n  },\n\n  /**\n   * Updates the position of the physical items.\n   */\n  _positionItems: function() {\n    this._adjustScrollPosition();\n\n    var y = this._physicalTop;\n\n    if (this.grid) {\n      var totalItemWidth = this._itemsPerRow * this._itemWidth;\n      var rowOffset = (this._viewportWidth - totalItemWidth) / 2;\n\n      this._iterateItems(function(pidx, vidx) {\n        var modulus = vidx % this._itemsPerRow;\n        var x = Math.floor((modulus * this._itemWidth) + rowOffset);\n        if (this._isRTL) {\n          x = x * -1;\n        }\n        this.translate3d(x + 'px', y + 'px', 0, this._physicalItems[pidx]);\n        if (this._shouldRenderNextRow(vidx)) {\n          y += this._rowHeight;\n        }\n      });\n    } else {\n      this._iterateItems(function(pidx, vidx) {\n        this.translate3d(0, y + 'px', 0, this._physicalItems[pidx]);\n        y += this._physicalSizes[pidx];\n      });\n    }\n  },\n\n  _getPhysicalSizeIncrement: function(pidx) {\n    if (!this.grid) {\n      return this._physicalSizes[pidx];\n    }\n    if (this._computeVidx(pidx) % this._itemsPerRow !== this._itemsPerRow - 1) {\n      return 0;\n    }\n    return this._rowHeight;\n  },\n\n  /**\n   * Returns, based on the current index,\n   * whether or not the next index will need\n   * to be rendered on a new row.\n   *\n   * @param {number} vidx Virtual index\n   * @return {boolean}\n   */\n  _shouldRenderNextRow: function(vidx) {\n    return vidx % this._itemsPerRow === this._itemsPerRow - 1;\n  },\n\n  /**\n   * Adjusts the scroll position when it was overestimated.\n   */\n  _adjustScrollPosition: function() {\n    var deltaHeight = this._virtualStart === 0 ?\n        this._physicalTop :\n        Math.min(this._scrollPosition + this._physicalTop, 0);\n    // Note: the delta can be positive or negative.\n    if (deltaHeight !== 0) {\n      this._physicalTop = this._physicalTop - deltaHeight;\n      var scrollTop = this._scrollTop;\n      // juking scroll position during interial scrolling on iOS is no bueno\n      if (!IOS_TOUCH_SCROLLING && scrollTop > 0) {\n        this._resetScrollPosition(scrollTop - deltaHeight);\n      }\n    }\n  },\n\n  /**\n   * Sets the position of the scroll.\n   */\n  _resetScrollPosition: function(pos) {\n    if (this.scrollTarget && pos >= 0) {\n      this._scrollTop = pos;\n      this._scrollPosition = this._scrollTop;\n    }\n  },\n\n  /**\n   * Sets the scroll height, that's the height of the content,\n   *\n   * @param {boolean=} forceUpdate If true, updates the height no matter what.\n   */\n  _updateScrollerSize: function(forceUpdate) {\n    if (this.grid) {\n      this._estScrollHeight = this._virtualRowCount * this._rowHeight;\n    } else {\n      this._estScrollHeight =\n          (this._physicalBottom +\n           Math.max(\n               this._virtualCount - this._physicalCount - this._virtualStart,\n               0) *\n               this._physicalAverage);\n    }\n    forceUpdate = forceUpdate || this._scrollHeight === 0;\n    forceUpdate = forceUpdate ||\n        this._scrollPosition >= this._estScrollHeight - this._physicalSize;\n    forceUpdate = forceUpdate ||\n        this.grid && this.$.items.style.height < this._estScrollHeight;\n    // Amortize height adjustment, so it won't trigger large repaints too often.\n    if (forceUpdate ||\n        Math.abs(this._estScrollHeight - this._scrollHeight) >=\n            this._viewportHeight) {\n      this.$.items.style.height = this._estScrollHeight + 'px';\n      this._scrollHeight = this._estScrollHeight;\n    }\n  },\n\n  /**\n   * Scroll to a specific item in the virtual list regardless\n   * of the physical items in the DOM tree.\n   *\n   * @method scrollToItem\n   * @param {(Object)} item The item to be scrolled to\n   */\n  scrollToItem: function(item) {\n    return this.scrollToIndex(this.items.indexOf(item));\n  },\n\n  /**\n   * Scroll to a specific index in the virtual list regardless\n   * of the physical items in the DOM tree.\n   *\n   * @method scrollToIndex\n   * @param {number} idx The index of the item\n   */\n  scrollToIndex: function(idx) {\n    if (typeof idx !== 'number' || idx < 0 || idx > this.items.length - 1) {\n      return;\n    }\n    flush();\n    // Items should have been rendered prior scrolling to an index.\n    if (this._physicalCount === 0) {\n      return;\n    }\n    idx = this._clamp(idx, 0, this._virtualCount - 1);\n    // Update the virtual start only when needed.\n    if (!this._isIndexRendered(idx) || idx >= this._maxVirtualStart) {\n      this._virtualStart =\n          this.grid ? (idx - this._itemsPerRow * 2) : (idx - 1);\n    }\n    this._manageFocus();\n    this._assignModels();\n    this._updateMetrics();\n    // Estimate new physical offset.\n    this._physicalTop = Math.floor(this._virtualStart / this._itemsPerRow) *\n        this._physicalAverage;\n\n    var currentTopItem = this._physicalStart;\n    var currentVirtualItem = this._virtualStart;\n    var targetOffsetTop = 0;\n    var hiddenContentSize = this._hiddenContentSize;\n    // scroll to the item as much as we can.\n    while (currentVirtualItem < idx && targetOffsetTop <= hiddenContentSize) {\n      targetOffsetTop =\n          targetOffsetTop + this._getPhysicalSizeIncrement(currentTopItem);\n      currentTopItem = (currentTopItem + 1) % this._physicalCount;\n      currentVirtualItem++;\n    }\n    this._updateScrollerSize(true);\n    this._positionItems();\n    this._resetScrollPosition(\n        this._physicalTop + this._scrollOffset + targetOffsetTop);\n    this._increasePoolIfNeeded(0);\n    // clear cached visible index.\n    this._firstVisibleIndexVal = null;\n    this._lastVisibleIndexVal = null;\n  },\n\n  /**\n   * Reset the physical average and the average count.\n   */\n  _resetAverage: function() {\n    this._physicalAverage = 0;\n    this._physicalAverageCount = 0;\n  },\n\n  /**\n   * A handler for the `iron-resize` event triggered by `IronResizableBehavior`\n   * when the element is resized.\n   */\n  _resizeHandler: function() {\n    this._debounce('_render', function() {\n      // clear cached visible index.\n      this._firstVisibleIndexVal = null;\n      this._lastVisibleIndexVal = null;\n      if (this._isVisible) {\n        this.updateViewportBoundaries();\n        // Reinstall the scroll event listener.\n        this.toggleScrollListener(true);\n        this._resetAverage();\n        this._render();\n      } else {\n        // Uninstall the scroll event listener.\n        this.toggleScrollListener(false);\n      }\n    }, animationFrame);\n  },\n\n  /**\n   * Selects the given item.\n   *\n   * @method selectItem\n   * @param {Object} item The item instance.\n   */\n  selectItem: function(item) {\n    return this.selectIndex(this.items.indexOf(item));\n  },\n\n  /**\n   * Selects the item at the given index in the items array.\n   *\n   * @method selectIndex\n   * @param {number} index The index of the item in the items array.\n   */\n  selectIndex: function(index) {\n    if (index < 0 || index >= this._virtualCount) {\n      return;\n    }\n    if (!this.multiSelection && this.selectedItem) {\n      this.clearSelection();\n    }\n    if (this._isIndexRendered(index)) {\n      var model = this.modelForElement(\n          this._physicalItems[this._getPhysicalIndex(index)]);\n      if (model) {\n        model[this.selectedAs] = true;\n      }\n      this.updateSizeForIndex(index);\n    }\n    this.$.selector.selectIndex(index);\n  },\n\n  /**\n   * Deselects the given item.\n   *\n   * @method deselect\n   * @param {Object} item The item instance.\n   */\n  deselectItem: function(item) {\n    return this.deselectIndex(this.items.indexOf(item));\n  },\n\n  /**\n   * Deselects the item at the given index in the items array.\n   *\n   * @method deselectIndex\n   * @param {number} index The index of the item in the items array.\n   */\n  deselectIndex: function(index) {\n    if (index < 0 || index >= this._virtualCount) {\n      return;\n    }\n    if (this._isIndexRendered(index)) {\n      var model = this.modelForElement(\n          this._physicalItems[this._getPhysicalIndex(index)]);\n      model[this.selectedAs] = false;\n      this.updateSizeForIndex(index);\n    }\n    this.$.selector.deselectIndex(index);\n  },\n\n  /**\n   * Selects or deselects a given item depending on whether the item\n   * has already been selected.\n   *\n   * @method toggleSelectionForItem\n   * @param {Object} item The item object.\n   */\n  toggleSelectionForItem: function(item) {\n    return this.toggleSelectionForIndex(this.items.indexOf(item));\n  },\n\n  /**\n   * Selects or deselects the item at the given index in the items array\n   * depending on whether the item has already been selected.\n   *\n   * @method toggleSelectionForIndex\n   * @param {number} index The index of the item in the items array.\n   */\n  toggleSelectionForIndex: function(index) {\n    var isSelected = this.$.selector.isIndexSelected ?\n        this.$.selector.isIndexSelected(index) :\n        this.$.selector.isSelected(this.items[index]);\n    isSelected ? this.deselectIndex(index) : this.selectIndex(index);\n  },\n\n  /**\n   * Clears the current selection in the list.\n   *\n   * @method clearSelection\n   */\n  clearSelection: function() {\n    this._iterateItems(function(pidx, vidx) {\n      this.modelForElement(this._physicalItems[pidx])[this.selectedAs] = false;\n    });\n    this.$.selector.clearSelection();\n  },\n\n  /**\n   * Add an event listener to `tap` if `selectionEnabled` is true,\n   * it will remove the listener otherwise.\n   */\n  _selectionEnabledChanged: function(selectionEnabled) {\n    var handler = selectionEnabled ? this.listen : this.unlisten;\n    handler.call(this, this, 'tap', '_selectionHandler');\n  },\n\n  /**\n   * Select an item from an event object.\n   */\n  _selectionHandler: function(e) {\n    var model = this.modelForElement(e.target);\n    if (!model) {\n      return;\n    }\n    var modelTabIndex, activeElTabIndex;\n    var target = dom(e).path[0];\n    var activeEl = this._getActiveElement();\n    var physicalItem =\n        this._physicalItems[this._getPhysicalIndex(model[this.indexAs])];\n    // Safari does not focus certain form controls via mouse\n    // https://bugs.webkit.org/show_bug.cgi?id=118043\n    if (target.localName === 'input' || target.localName === 'button' ||\n        target.localName === 'select') {\n      return;\n    }\n    // Set a temporary tabindex\n    modelTabIndex = model.tabIndex;\n    model.tabIndex = SECRET_TABINDEX;\n    activeElTabIndex = activeEl ? activeEl.tabIndex : -1;\n    model.tabIndex = modelTabIndex;\n    // Only select the item if the tap wasn't on a focusable child\n    // or the element bound to `tabIndex`\n    if (activeEl && physicalItem !== activeEl &&\n        physicalItem.contains(activeEl) &&\n        activeElTabIndex !== SECRET_TABINDEX) {\n      return;\n    }\n    this.toggleSelectionForItem(model[this.as]);\n  },\n\n  _multiSelectionChanged: function(multiSelection) {\n    this.clearSelection();\n    this.$.selector.multi = multiSelection;\n  },\n\n  /**\n   * Updates the size of a given list item.\n   *\n   * @method updateSizeForItem\n   * @param {Object} item The item instance.\n   */\n  updateSizeForItem: function(item) {\n    return this.updateSizeForIndex(this.items.indexOf(item));\n  },\n\n  /**\n   * Updates the size of the item at the given index in the items array.\n   *\n   * @method updateSizeForIndex\n   * @param {number} index The index of the item in the items array.\n   */\n  updateSizeForIndex: function(index) {\n    if (!this._isIndexRendered(index)) {\n      return null;\n    }\n    this._updateMetrics([this._getPhysicalIndex(index)]);\n    this._positionItems();\n    return null;\n  },\n\n  /**\n   * Creates a temporary backfill item in the rendered pool of physical items\n   * to replace the main focused item. The focused item has tabIndex = 0\n   * and might be currently focused by the user.\n   *\n   * This dynamic replacement helps to preserve the focus state.\n   */\n  _manageFocus: function() {\n    var fidx = this._focusedVirtualIndex;\n\n    if (fidx >= 0 && fidx < this._virtualCount) {\n      // if it's a valid index, check if that index is rendered\n      // in a physical item.\n      if (this._isIndexRendered(fidx)) {\n        this._restoreFocusedItem();\n      } else {\n        this._createFocusBackfillItem();\n      }\n    } else if (this._virtualCount > 0 && this._physicalCount > 0) {\n      // otherwise, assign the initial focused index.\n      this._focusedPhysicalIndex = this._physicalStart;\n      this._focusedVirtualIndex = this._virtualStart;\n      this._focusedItem = this._physicalItems[this._physicalStart];\n    }\n  },\n\n  /**\n   * Converts a random index to the index of the item that completes it's row.\n   * Allows for better order and fill computation when grid == true.\n   */\n  _convertIndexToCompleteRow: function(idx) {\n    // when grid == false _itemPerRow can be unset.\n    this._itemsPerRow = this._itemsPerRow || 1;\n    return this.grid ? Math.ceil(idx / this._itemsPerRow) * this._itemsPerRow :\n                       idx;\n  },\n\n  _isIndexRendered: function(idx) {\n    return idx >= this._virtualStart && idx <= this._virtualEnd;\n  },\n\n  _isIndexVisible: function(idx) {\n    return idx >= this.firstVisibleIndex && idx <= this.lastVisibleIndex;\n  },\n\n  _getPhysicalIndex: function(vidx) {\n    return (this._physicalStart + (vidx - this._virtualStart)) %\n        this._physicalCount;\n  },\n\n  focusItem: function(idx) {\n    this._focusPhysicalItem(idx);\n  },\n\n  _focusPhysicalItem: function(idx) {\n    if (idx < 0 || idx >= this._virtualCount) {\n      return;\n    }\n    this._restoreFocusedItem();\n    // scroll to index to make sure it's rendered\n    if (!this._isIndexRendered(idx)) {\n      this.scrollToIndex(idx);\n    }\n    var physicalItem = this._physicalItems[this._getPhysicalIndex(idx)];\n    var model = this.modelForElement(physicalItem);\n    var focusable;\n    // set a secret tab index\n    model.tabIndex = SECRET_TABINDEX;\n    // check if focusable element is the physical item\n    if (physicalItem.tabIndex === SECRET_TABINDEX) {\n      focusable = physicalItem;\n    }\n    // search for the element which tabindex is bound to the secret tab index\n    if (!focusable) {\n      focusable = dom(physicalItem)\n                      .querySelector('[tabindex=\"' + SECRET_TABINDEX + '\"]');\n    }\n    // restore the tab index\n    model.tabIndex = 0;\n    // focus the focusable element\n    this._focusedVirtualIndex = idx;\n    focusable && focusable.focus();\n  },\n\n  _removeFocusedItem: function() {\n    if (this._offscreenFocusedItem) {\n      this._itemsParent.removeChild(this._offscreenFocusedItem);\n    }\n    this._offscreenFocusedItem = null;\n    this._focusBackfillItem = null;\n    this._focusedItem = null;\n    this._focusedVirtualIndex = -1;\n    this._focusedPhysicalIndex = -1;\n  },\n\n  _createFocusBackfillItem: function() {\n    var fpidx = this._focusedPhysicalIndex;\n\n    if (this._offscreenFocusedItem || this._focusedVirtualIndex < 0) {\n      return;\n    }\n    if (!this._focusBackfillItem) {\n      // Create a physical item.\n      var inst = this.stamp(null);\n      this._focusBackfillItem = inst.root.querySelector('*');\n      this._itemsParent.appendChild(inst.root);\n    }\n    // Set the offcreen focused physical item.\n    this._offscreenFocusedItem = this._physicalItems[fpidx];\n    this.modelForElement(this._offscreenFocusedItem).tabIndex = 0;\n    this._physicalItems[fpidx] = this._focusBackfillItem;\n    this._focusedPhysicalIndex = fpidx;\n    // Hide the focused physical.\n    this.translate3d(0, HIDDEN_Y, 0, this._offscreenFocusedItem);\n  },\n\n  _restoreFocusedItem: function() {\n    if (!this._offscreenFocusedItem || this._focusedVirtualIndex < 0) {\n      return;\n    }\n    // Assign models to the focused index.\n    this._assignModels();\n    // Get the new physical index for the focused index.\n    var fpidx = this._focusedPhysicalIndex =\n        this._getPhysicalIndex(this._focusedVirtualIndex);\n\n    var onScreenItem = this._physicalItems[fpidx];\n    if (!onScreenItem) {\n      return;\n    }\n    var onScreenInstance = this.modelForElement(onScreenItem);\n    var offScreenInstance = this.modelForElement(this._offscreenFocusedItem);\n    // Restores the physical item only when it has the same model\n    // as the offscreen one. Use key for comparison since users can set\n    // a new item via set('items.idx').\n    if (onScreenInstance[this.as] === offScreenInstance[this.as]) {\n      // Flip the focus backfill.\n      this._focusBackfillItem = onScreenItem;\n      onScreenInstance.tabIndex = -1;\n      // Restore the focused physical item.\n      this._physicalItems[fpidx] = this._offscreenFocusedItem;\n      // Hide the physical item that backfills.\n      this.translate3d(0, HIDDEN_Y, 0, this._focusBackfillItem);\n    } else {\n      this._removeFocusedItem();\n      this._focusBackfillItem = null;\n    }\n    this._offscreenFocusedItem = null;\n  },\n\n  _didFocus: function(e) {\n    var targetModel = this.modelForElement(e.target);\n    var focusedModel = this.modelForElement(this._focusedItem);\n    var hasOffscreenFocusedItem = this._offscreenFocusedItem !== null;\n    var fidx = this._focusedVirtualIndex;\n    if (!targetModel) {\n      return;\n    }\n    if (focusedModel === targetModel) {\n      // If the user focused the same item, then bring it into view if it's not\n      // visible.\n      if (!this._isIndexVisible(fidx)) {\n        this.scrollToIndex(fidx);\n      }\n    } else {\n      this._restoreFocusedItem();\n      // Restore tabIndex for the currently focused item.\n      if (focusedModel) {\n        focusedModel.tabIndex = -1;\n      }\n      // Set the tabIndex for the next focused item.\n      targetModel.tabIndex = 0;\n      fidx = targetModel[this.indexAs];\n      this._focusedVirtualIndex = fidx;\n      this._focusedPhysicalIndex = this._getPhysicalIndex(fidx);\n      this._focusedItem = this._physicalItems[this._focusedPhysicalIndex];\n      if (hasOffscreenFocusedItem && !this._offscreenFocusedItem) {\n        this._update();\n      }\n    }\n  },\n\n  _keydownHandler: function(e) {\n    switch (e.keyCode) {\n      case /* ARROW_DOWN */ 40:\n        if (this._focusedVirtualIndex < this._virtualCount - 1)\n          e.preventDefault();\n        this._focusPhysicalItem(\n            this._focusedVirtualIndex + (this.grid ? this._itemsPerRow : 1));\n        break;\n      case /* ARROW_RIGHT */ 39:\n        if (this.grid)\n          this._focusPhysicalItem(\n              this._focusedVirtualIndex + (this._isRTL ? -1 : 1));\n        break;\n      case /* ARROW_UP */ 38:\n        if (this._focusedVirtualIndex > 0)\n          e.preventDefault();\n        this._focusPhysicalItem(\n            this._focusedVirtualIndex - (this.grid ? this._itemsPerRow : 1));\n        break;\n      case /* ARROW_LEFT */ 37:\n        if (this.grid)\n          this._focusPhysicalItem(\n              this._focusedVirtualIndex + (this._isRTL ? 1 : -1));\n        break;\n      case /* ENTER */ 13:\n        this._focusPhysicalItem(this._focusedVirtualIndex);\n        if (this.selectionEnabled)\n          this._selectionHandler(e);\n        break;\n    }\n  },\n\n  _clamp: function(v, min, max) {\n    return Math.min(max, Math.max(min, v));\n  },\n\n  _debounce: function(name, cb, asyncModule) {\n    this._debouncers = this._debouncers || {};\n    this._debouncers[name] =\n        Debouncer.debounce(this._debouncers[name], asyncModule, cb.bind(this));\n    enqueueDebouncer(this._debouncers[name]);\n  },\n\n  _forwardProperty: function(inst, name, value) {\n    inst._setPendingProperty(name, value);\n  },\n\n  /* Templatizer bindings for v2 */\n  _forwardHostPropV2: function(prop, value) {\n    (this._physicalItems || [])\n        .concat([this._offscreenFocusedItem, this._focusBackfillItem])\n        .forEach(function(item) {\n          if (item) {\n            this.modelForElement(item).forwardHostProp(prop, value);\n          }\n        }, this);\n  },\n\n  _notifyInstancePropV2: function(inst, prop, value) {\n    if (matches(this.as, prop)) {\n      var idx = inst[this.indexAs];\n      if (prop == this.as) {\n        this.items[idx] = value;\n      }\n      this.notifyPath(translate(this.as, 'items.' + idx, prop), value);\n    }\n  },\n\n  /* Templatizer bindings for v1 */\n  _getStampedChildren: function() {\n    return this._physicalItems;\n  },\n\n  _forwardInstancePath: function(inst, path, value) {\n    if (path.indexOf(this.as + '.') === 0) {\n      this.notifyPath(\n          'items.' + inst.__key__ + '.' + path.slice(this.as.length + 1),\n          value);\n    }\n  },\n\n  _forwardParentPath: function(path, value) {\n    (this._physicalItems || [])\n        .concat([this._offscreenFocusedItem, this._focusBackfillItem])\n        .forEach(function(item) {\n          if (item) {\n            this.modelForElement(item).notifyPath(path, value, true);\n          }\n        }, this);\n  },\n\n  _forwardParentProp: function(prop, value) {\n    (this._physicalItems || [])\n        .concat([this._offscreenFocusedItem, this._focusBackfillItem])\n        .forEach(function(item) {\n          if (item) {\n            this.modelForElement(item)[prop] = value;\n          }\n        }, this);\n  },\n\n  /* Gets the activeElement of the shadow root/host that contains the list. */\n  _getActiveElement: function() {\n    var itemsHost = this._itemsParent.node.domHost;\n    return dom(itemsHost ? itemsHost.root : document).activeElement;\n  }\n});\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * The default element used for items in the vaadin-combo-box.\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ---|---\n * `content` | The element that wraps the item label or template content\n *\n * The following state attributes are exposed for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `selected` | Set when the item is selected | :host\n * `focused` | Set when the item is focused | :host\n *\n * See [ThemableMixin  how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @memberof Vaadin\n * @mixes Vaadin.ThemableMixin\n * @private\n */\nclass ComboBoxItemElement extends ThemableMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n      }\n\n      :host([hidden]) {\n         display: none;\n      }\n    </style>\n    <div part=\"content\" id=\"content\"></div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-combo-box-item';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * The index of the item\n       */\n      index: Number,\n\n      /**\n       * The item to render\n       * @type {(String|Object)}\n       */\n      item: Object,\n\n      /**\n       * The text label corresponding to the item\n       */\n      label: String,\n\n      /**\n       * True when item is selected\n       */\n      selected: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * True when item is focused\n       */\n      focused: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * The template instance corresponding to the item\n       */\n      _itemTemplateInstance: Object,\n\n      /**\n       * Custom function for rendering the content of the `<vaadin-combo-box-item>` propagated from the combo box element.\n       */\n      renderer: Function,\n\n      /**\n       * Saved instance of a custom renderer function.\n       */\n      _oldRenderer: Function\n    };\n  }\n\n  static get observers() {\n    return [\n      '_rendererOrItemChanged(renderer, index, item.*)',\n      '_updateLabel(label, _itemTemplateInstance)',\n      '_updateTemplateInstanceVariable(\"index\", index, _itemTemplateInstance)',\n      '_updateTemplateInstanceVariable(\"item\", item, _itemTemplateInstance)',\n      '_updateTemplateInstanceVariable(\"selected\", selected, _itemTemplateInstance)',\n      '_updateTemplateInstanceVariable(\"focused\", focused, _itemTemplateInstance)'\n    ];\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (!this._itemTemplateInstance) {\n      // 2.0 has __dataHost. Might want to consider assigning combobox reference directly to item.\n      const overlay = this.getRootNode().host.getRootNode().host;\n      const dropdown = overlay.__dataHost;\n      const comboBoxOverlay = dropdown.getRootNode().host;\n      this._comboBox = comboBoxOverlay.getRootNode().host;\n      this._comboBox._ensureTemplatized();\n      if (this._comboBox._TemplateClass) {\n        this._itemTemplateInstance = new this._comboBox._TemplateClass({});\n        this.$.content.textContent = '';\n        this.$.content.appendChild(this._itemTemplateInstance.root);\n      }\n    }\n  }\n\n  _render() {\n    if (!this.renderer) {\n      return;\n    }\n\n    const model = {\n      index: this.index,\n      item: this.item\n    };\n\n    this.renderer(this.$.content, this._comboBox, model);\n  }\n\n  _rendererOrItemChanged(renderer, index, item) {\n    if (item === undefined || index === undefined) {\n      return;\n    }\n\n    if (this._oldRenderer !== renderer) {\n      this.$.content.innerHTML = '';\n    }\n\n    if (renderer) {\n      this._oldRenderer = renderer;\n      this._render();\n    }\n  }\n\n  _updateLabel(label, _itemTemplateInstance) {\n    if (_itemTemplateInstance === undefined && this.$.content && !this.renderer) {\n      // Only set label to textContent no template\n      this.$.content.textContent = label;\n    }\n  }\n\n  _updateTemplateInstanceVariable(variable, value, _itemTemplateInstance) {\n    if (variable === undefined || value === undefined || _itemTemplateInstance === undefined) {\n      return;\n    }\n    _itemTemplateInstance[variable] = value;\n  }\n}\n\ncustomElements.define(ComboBoxItemElement.is, ComboBoxItemElement);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { DisableUpgradeMixin } from '@polymer/polymer/lib/mixins/disable-upgrade-mixin.js';\nimport { OverlayElement } from '@vaadin/vaadin-overlay/src/vaadin-overlay.js';\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\n/**\n * The overlay element.\n *\n * ### Styling\n *\n * See [`<vaadin-overlay>` documentation](https://github.com/vaadin/vaadin-overlay/blob/master/src/vaadin-overlay.html)\n * for `<vaadin-combo-box-overlay>` parts.\n *\n * See [ThemableMixin  how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @memberof Vaadin\n * @private\n */\nclass ComboBoxOverlayElement extends OverlayElement {\n  static get is() {\n    return 'vaadin-combo-box-overlay';\n  }\n\n  ready() {\n    super.ready();\n    const loader = document.createElement('div');\n    loader.setAttribute('part', 'loader');\n    const content = this.shadowRoot.querySelector(['[part~=\"content\"]']);\n    content.parentNode.insertBefore(loader, content);\n  }\n}\n\ncustomElements.define(ComboBoxOverlayElement.is, ComboBoxOverlayElement);\n\n/**\n * Element for internal use only.\n *\n * @memberof Vaadin\n * @private\n */\nclass ComboBoxDropdownElement extends DisableUpgradeMixin(\n  mixinBehaviors(IronResizableBehavior, PolymerElement)) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n      }\n\n      :host > #overlay {\n        display: none;\n      }\n    </style>\n    <vaadin-combo-box-overlay id=\"overlay\" hidden\\$=\"[[hidden]]\" opened=\"[[opened]]\" template=\"{{template}}\" style=\"align-items: stretch; margin: 0;\" theme\\$=\"[[theme]]\">\n      <slot></slot>\n    </vaadin-combo-box-overlay>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-combo-box-dropdown';\n  }\n\n  static get properties() {\n    return {\n      opened: {\n        type: Boolean,\n        observer: '_openedChanged'\n      },\n\n      template: {\n        type: Object,\n        notify: true\n      },\n\n      /**\n       * The element to position/align the dropdown by.\n       */\n      positionTarget: {\n        type: Object\n      },\n\n      /**\n       * If `true`, overlay is aligned above the `positionTarget`\n       */\n      alignedAbove: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Used to propagate the `theme` attribute from the host element.\n       */\n      theme: String\n    };\n  }\n\n  constructor() {\n    super();\n    this._boundSetPosition = this._setPosition.bind(this);\n    this._boundOutsideClickListener = this._outsideClickListener.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.addEventListener('iron-resize', this._boundSetPosition);\n  }\n\n  ready() {\n    super.ready();\n\n    // Preventing the default modal behaviour of the overlay on input clicking\n    this.$.overlay.addEventListener('vaadin-overlay-outside-click', e => {\n      e.preventDefault();\n    });\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeEventListener('iron-resize', this._boundSetPosition);\n\n    // Making sure the overlay is closed and removed from DOM after detaching the dropdown.\n    this.opened = false;\n  }\n\n  notifyResize() {\n    super.notifyResize();\n\n    if (this.positionTarget && this.opened) {\n      this._setPosition();\n      // Schedule another position update (to cover virtual keyboard opening for example)\n      requestAnimationFrame(this._setPosition.bind(this));\n    }\n  }\n\n  /**\n   * Fired after the `vaadin-combo-box-dropdown` opens.\n   *\n   * @event vaadin-combo-box-dropdown-opened\n   */\n  /**\n   * Fired after the `vaadin-combo-box-dropdown` closes.\n   *\n   * @event vaadin-combo-box-dropdown-closed\n   */\n\n  _openedChanged(opened, oldValue) {\n    if (!!opened === !!oldValue) {\n      return;\n    }\n\n    if (opened) {\n      this.$.overlay.style.position = this._isPositionFixed(this.positionTarget) ? 'fixed' : 'absolute';\n      this._setPosition();\n\n      window.addEventListener('scroll', this._boundSetPosition, true);\n      document.addEventListener('click', this._boundOutsideClickListener, true);\n      this.dispatchEvent(new CustomEvent('vaadin-combo-box-dropdown-opened', {bubbles: true, composed: true}));\n    } else {\n      window.removeEventListener('scroll', this._boundSetPosition, true);\n      document.removeEventListener('click', this._boundOutsideClickListener, true);\n      this.dispatchEvent(new CustomEvent('vaadin-combo-box-dropdown-closed', {bubbles: true, composed: true}));\n    }\n  }\n\n\n  // We need to listen on 'click' event and capture it and close the overlay before\n  // propagating the event to the listener in the button. Otherwise, if the clicked button would call\n  // open(), this would happen: https://www.youtube.com/watch?v=Z86V_ICUCD4\n  _outsideClickListener(event) {\n    const eventPath = event.composedPath();\n    if (eventPath.indexOf(this.positionTarget) < 0 && eventPath.indexOf(this.$.overlay) < 0) {\n      this.opened = false;\n    }\n  }\n\n  _isPositionFixed(element) {\n    const offsetParent = this._getOffsetParent(element);\n\n    return window.getComputedStyle(element).position === 'fixed' ||\n      (offsetParent && this._isPositionFixed(offsetParent));\n  }\n\n  _getOffsetParent(element) {\n    if (element.assignedSlot) {\n      return element.assignedSlot.parentElement;\n    } else if (element.parentElement) {\n      return element.offsetParent;\n    }\n\n    const parent = element.parentNode;\n\n    if (parent && parent.nodeType === 11 && parent.host) {\n      return parent.host; // parent is #shadowRoot\n    }\n  }\n\n  _verticalOffset(overlayRect, targetRect) {\n    return this.alignedAbove ? -overlayRect.height : targetRect.height;\n  }\n\n  _shouldAlignAbove(targetRect) {\n    const spaceBelow = (\n      window.innerHeight -\n      targetRect.bottom -\n      Math.min(document.body.scrollTop, 0)\n    ) / window.innerHeight;\n\n    return spaceBelow < 0.30;\n  }\n\n  _setPosition(e) {\n    if (e && e.target) {\n      const target = e.target === document ? document.body : e.target;\n      const parent = this.$.overlay.parentElement;\n      if (!(target.contains(this.$.overlay) || target.contains(this.positionTarget)) || parent !== document.body) {\n        return;\n      }\n    }\n\n    const targetRect = this.positionTarget.getBoundingClientRect();\n    this.alignedAbove = this._shouldAlignAbove(targetRect);\n\n    const overlayRect = this.$.overlay.getBoundingClientRect();\n    this._translateX = targetRect.left - overlayRect.left + (this._translateX || 0);\n    this._translateY = targetRect.top - overlayRect.top + (this._translateY || 0) +\n      this._verticalOffset(overlayRect, targetRect);\n\n    const _devicePixelRatio = window.devicePixelRatio || 1;\n    this._translateX = Math.round(this._translateX * _devicePixelRatio) / _devicePixelRatio;\n    this._translateY = Math.round(this._translateY * _devicePixelRatio) / _devicePixelRatio;\n    this.$.overlay.style.transform = `translate3d(${this._translateX}px, ${this._translateY}px, 0)`;\n\n    this.$.overlay.style.width = this.positionTarget.clientWidth + 'px';\n    this.$.overlay.style.justifyContent = this.alignedAbove ? 'flex-end' : 'flex-start';\n\n    // TODO: fire only when position actually changes changes\n    this.dispatchEvent(new CustomEvent('position-changed'));\n  }\n}\n\ncustomElements.define(ComboBoxDropdownElement.is, ComboBoxDropdownElement);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '@polymer/iron-list/iron-list.js';\nimport './vaadin-combo-box-item.js';\nimport './vaadin-combo-box-dropdown.js';\nimport { ComboBoxPlaceholder } from './vaadin-combo-box-placeholder.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst TOUCH_DEVICE = (() => {\n  try {\n    document.createEvent('TouchEvent');\n    return true;\n  } catch (e) {\n    return false;\n  }\n})();\n\n/**\n * Element for internal use only.\n *\n * @memberof Vaadin\n * @private\n */\nclass ComboBoxDropdownWrapperElement extends (class extends PolymerElement {}) {\n  static get template() {\n    return html`\n    <vaadin-combo-box-dropdown id=\"dropdown\" hidden=\"[[_hidden(_items.*, loading)]]\" position-target=\"[[positionTarget]]\" on-template-changed=\"_templateChanged\" on-position-changed=\"_setOverlayHeight\" disable-upgrade=\"\" theme=\"[[theme]]\">\n      <template>\n        <style>\n          #scroller {\n            overflow: auto;\n\n            /* Fixes item background from getting on top of scrollbars on Safari */\n            transform: translate3d(0, 0, 0);\n\n            /* Enable momentum scrolling on iOS (iron-list v1.2+ no longer does it for us) */\n            -webkit-overflow-scrolling: touch;\n\n            /* Fixes scrollbar disappearing when 'Show scroll bars: Always' enabled in Safari */\n            box-shadow: 0 0 0 white;\n          }\n        </style>\n        <div id=\"scroller\" on-click=\"_stopPropagation\">\n          <iron-list id=\"selector\" role=\"listbox\" items=\"[[_getItems(opened, _items)]]\" scroll-target=\"[[_scroller]]\">\n            <template>\n              <vaadin-combo-box-item on-click=\"_onItemClick\" index=\"[[__requestItemByIndex(item, index)]]\" item=\"[[item]]\" label=\"[[getItemLabel(item, _itemLabelPath)]]\" selected=\"[[_isItemSelected(item, _selectedItem, _itemIdPath)]]\" renderer=\"[[renderer]]\" role\\$=\"[[_getAriaRole(index)]]\" aria-selected\\$=\"[[_getAriaSelected(_focusedIndex,index)]]\" focused=\"[[_isItemFocused(_focusedIndex,index)]]\" tabindex=\"-1\" theme\\$=\"[[theme]]\">\n              </vaadin-combo-box-item>\n            </template>\n          </iron-list>\n        </div>\n      </template>\n    </vaadin-combo-box-dropdown>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-combo-box-dropdown-wrapper';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * True if the device supports touch events.\n       */\n      touchDevice: {\n        type: Boolean,\n        value: TOUCH_DEVICE\n      },\n\n      opened: Boolean,\n\n      /**\n       * The element to position/align the dropdown by.\n       */\n      positionTarget: {\n        type: Object\n      },\n\n      /**\n       * Custom function for rendering the content of the `<vaadin-combo-box-item>` propagated from the combo box element.\n       */\n      renderer: Function,\n\n      /**\n       * `true` when new items are being loaded.\n       */\n      loading: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true,\n        observer: '_setOverlayHeight'\n      },\n\n      /**\n       * Used to propagate the `theme` attribute from the host element.\n       */\n      theme: String,\n\n      _selectedItem: {\n        type: Object\n      },\n\n      _items: {\n        type: Object\n      },\n\n      _focusedIndex: {\n        type: Number,\n        value: -1,\n        observer: '_focusedIndexChanged'\n      },\n\n      _focusedItem: {\n        type: String,\n        computed: '_getFocusedItem(_focusedIndex)'\n      },\n\n      _itemLabelPath: {\n        type: String,\n        value: 'label'\n      },\n\n      _itemValuePath: {\n        type: String,\n        value: 'value'\n      },\n\n      _selector: Object,\n\n      _itemIdPath: String\n    };\n  }\n\n  static get observers() {\n    return ['_selectorChanged(_selector)', '_loadingChanged(loading)', '_openedChanged(opened, _items, loading)'];\n  }\n\n  _fireTouchAction(sourceEvent) {\n    this.dispatchEvent(new CustomEvent('vaadin-overlay-touch-action', {\n      detail: {sourceEvent: sourceEvent}\n    }));\n  }\n\n  _getItems(opened, items) {\n    return opened ? items : [];\n  }\n\n  _openedChanged(opened, items, loading) {\n    if (this.$.dropdown.hasAttribute('disable-upgrade')) {\n      if (!opened) {\n        return;\n      } else {\n        this._initDropdown();\n      }\n    }\n    // Do not attach if no items\n    // Do not dettach if opened but user types an invalid search\n    this.$.dropdown.opened = !!(opened && (loading || this.$.dropdown.opened || items && items.length));\n  }\n\n  _initDropdown() {\n    this.$.dropdown.removeAttribute('disable-upgrade');\n\n    this._templateChanged();\n    this._loadingChanged(this.loading);\n\n    this.$.dropdown.$.overlay.addEventListener('touchend', e => this._fireTouchAction(e));\n    this.$.dropdown.$.overlay.addEventListener('touchmove', e => this._fireTouchAction(e));\n\n    // Prevent blurring the input when clicking inside the overlay.\n    this.$.dropdown.$.overlay.addEventListener('mousedown', e => e.preventDefault());\n\n    // IE11: when scrolling with mouse, the focus goes to the scroller.\n    // This causes the overlay closing due to defocusing the input field.\n    // Prevent focusing the scroller by setting `unselectable=\"on\"`.\n    if (/Trident/.test(navigator.userAgent)) {\n      this._scroller.setAttribute('unselectable', 'on');\n    }\n  }\n\n  _templateChanged(e) {\n    if (this.$.dropdown.hasAttribute('disable-upgrade')) {\n      return;\n    }\n\n    this._selector = this.$.dropdown.$.overlay.content.querySelector('#selector');\n    this._scroller = this.$.dropdown.$.overlay.content.querySelector('#scroller');\n  }\n\n  _loadingChanged(loading) {\n    if (this.$.dropdown.hasAttribute('disable-upgrade')) {\n      return;\n    }\n\n    if (loading) {\n      this.$.dropdown.$.overlay.setAttribute('loading', '');\n    } else {\n      this.$.dropdown.$.overlay.removeAttribute('loading');\n    }\n  }\n\n  _selectorChanged(selector) {\n    this._patchWheelOverScrolling();\n  }\n\n  _setOverlayHeight() {\n    if (!this.opened || !this.positionTarget || !this._selector) {\n      return;\n    }\n\n    const targetRect = this.positionTarget.getBoundingClientRect();\n\n    this._scroller.style.maxHeight = (window.ShadyCSS ?\n      window.ShadyCSS.getComputedStyleValue(this, '--vaadin-combo-box-overlay-max-height') :\n      getComputedStyle(this).getPropertyValue('--vaadin-combo-box-overlay-max-height')) || '65vh';\n\n    const maxHeight = this._maxOverlayHeight(targetRect);\n\n    // overlay max height is restrained by the #scroller max height which is set to 65vh in CSS.\n    this.$.dropdown.$.overlay.style.maxHeight = maxHeight;\n\n    // we need to set height for iron-list to make its `firstVisibleIndex` work correctly.\n    this._selector.style.maxHeight = maxHeight;\n\n    this.updateViewportBoundaries();\n  }\n\n  _maxOverlayHeight(targetRect) {\n    const margin = 8;\n    const minHeight = 116; // Height of two items in combo-box\n    const bottom = Math.min(window.innerHeight, document.body.scrollHeight - document.body.scrollTop);\n\n    if (this.$.dropdown.alignedAbove) {\n      return Math.max(targetRect.top - margin + Math.min(document.body.scrollTop, 0), minHeight) + 'px';\n    } else {\n      return Math.max(bottom - targetRect.bottom - margin, minHeight) + 'px';\n    }\n  }\n\n  _getFocusedItem(focusedIndex) {\n    if (focusedIndex >= 0) {\n      return this._items[focusedIndex];\n    }\n  }\n\n  _isItemSelected(item, selectedItem, itemIdPath) {\n    if (item instanceof ComboBoxPlaceholder) {\n      return false;\n    } else if (itemIdPath && item !== undefined && selectedItem !== undefined) {\n      return this.get(itemIdPath, item) === this.get(itemIdPath, selectedItem);\n    } else {\n      return item === selectedItem;\n    }\n  }\n\n  _onItemClick(e) {\n    if (e.detail && e.detail.sourceEvent && e.detail.sourceEvent.stopPropagation) {\n      this._stopPropagation(e.detail.sourceEvent);\n    }\n\n    this.dispatchEvent(new CustomEvent('selection-changed', {detail: {item: e.model.item}}));\n  }\n\n  /**\n   * Gets the index of the item with the provided label.\n   * @return {Number}\n   */\n  indexOfLabel(label) {\n    if (this._items && label) {\n      for (let i = 0; i < this._items.length; i++) {\n        if (this.getItemLabel(this._items[i]).toString().toLowerCase() ===\n          label.toString().toLowerCase()) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  /**\n   * If dataProvider is used, dispatch a request for the items index if\n   * the item is a placeholder object.\n   *\n   * @return {Number}\n   */\n  __requestItemByIndex(item, index) {\n    if ((item instanceof ComboBoxPlaceholder) && index !== undefined) {\n      this.dispatchEvent(new CustomEvent('index-requested', {detail: {index}}));\n    }\n\n    return index;\n  }\n\n  /**\n   * Gets the label string for the item based on the `_itemLabelPath`.\n   * @return {String}\n   */\n  getItemLabel(item, itemLabelPath) {\n    itemLabelPath = itemLabelPath || this._itemLabelPath;\n    let label = item && itemLabelPath ? this.get(itemLabelPath, item) : undefined;\n    if (label === undefined || label === null) {\n      label = item ? item.toString() : '';\n    }\n    return label;\n  }\n\n  _isItemFocused(focusedIndex, itemIndex) {\n    return focusedIndex == itemIndex;\n  }\n\n  _getAriaSelected(focusedIndex, itemIndex) {\n    return this._isItemFocused(focusedIndex, itemIndex).toString();\n  }\n\n  _getAriaRole(itemIndex) {\n    return itemIndex !== undefined ? 'option' : false;\n  }\n\n  _focusedIndexChanged(index) {\n    if (index >= 0) {\n      this._scrollIntoView(index);\n    }\n  }\n\n  _scrollIntoView(index) {\n    const visibleItemsCount = this._visibleItemsCount();\n    if (visibleItemsCount === undefined) {\n      // Scroller is not visible. Moving is unnecessary.\n      return;\n    }\n\n    let targetIndex = index;\n\n    if (index > this._selector.lastVisibleIndex - 1) {\n      // Index is below the bottom, scrolling down. Make the item appear at the bottom.\n      targetIndex = index - visibleItemsCount + 1;\n    } else if (index > this._selector.firstVisibleIndex) {\n      // The item is already visible, scrolling is unnecessary per se. But we need to trigger iron-list to set\n      // the correct scrollTop on the scrollTarget. Scrolling to firstVisibleIndex.\n      targetIndex = this._selector.firstVisibleIndex;\n    }\n    this._selector.scrollToIndex(Math.max(0, targetIndex));\n\n    // Sometimes the item is partly below the bottom edge, detect and adjust.\n    const pidx = this._selector._getPhysicalIndex(index),\n      physicalItem = this._selector._physicalItems[pidx];\n    if (!physicalItem) {\n      return;\n    }\n    const physicalItemRect = physicalItem.getBoundingClientRect(),\n      scrollerRect = this._scroller.getBoundingClientRect(),\n      scrollTopAdjust = physicalItemRect.bottom - scrollerRect.bottom + this._viewportTotalPaddingBottom;\n    if (scrollTopAdjust > 0) {\n      this._scroller.scrollTop += scrollTopAdjust;\n    }\n  }\n\n  ensureItemsRendered() {\n    this._selector._render();\n  }\n\n  adjustScrollPosition() {\n    if (this.opened && this._items) {\n      this._scrollIntoView(this._focusedIndex);\n    }\n  }\n\n  /**\n   * We want to prevent the kinetic scrolling energy from being transferred from the overlay contents over to the parent.\n   * Further improvement ideas: after the contents have been scrolled to the top or bottom and scrolling has stopped, it could allow\n   * scrolling the parent similarly to touch scrolling.\n   */\n  _patchWheelOverScrolling() {\n    const selector = this._selector;\n    selector.addEventListener('wheel', e => {\n      const scroller = selector._scroller || selector.scrollTarget;\n      const scrolledToTop = scroller.scrollTop === 0;\n      const scrolledToBottom = (scroller.scrollHeight - scroller.scrollTop - scroller.clientHeight) <= 1;\n\n      if (scrolledToTop && e.deltaY < 0) {\n        e.preventDefault();\n      } else if (scrolledToBottom && e.deltaY > 0) {\n        e.preventDefault();\n      }\n    });\n  }\n\n  updateViewportBoundaries() {\n    this._cachedViewportTotalPaddingBottom = undefined;\n    this._selector.updateViewportBoundaries();\n  }\n\n  get _viewportTotalPaddingBottom() {\n    if (this._cachedViewportTotalPaddingBottom === undefined) {\n      const itemsStyle = window.getComputedStyle(this._selector.$.items);\n      this._cachedViewportTotalPaddingBottom = [\n        itemsStyle.paddingBottom,\n        itemsStyle.borderBottomWidth\n      ].map(v => {\n        return parseInt(v, 10);\n      }).reduce((sum, v) => {\n        return sum + v;\n      });\n    }\n\n    return this._cachedViewportTotalPaddingBottom;\n  }\n\n  _visibleItemsCount() {\n    if (!this._selector) {\n      return;\n    }\n\n    // Ensure items are rendered\n    this._selector.flushDebouncer('_debounceTemplate');\n    // Ensure items are positioned\n    this._selector.scrollToIndex(this._selector.firstVisibleIndex);\n    // Ensure viewport boundaries are up-to-date\n    this.updateViewportBoundaries();\n    return this._selector.lastVisibleIndex - this._selector.firstVisibleIndex + 1;\n  }\n\n  _selectItem(item) {\n    item = (typeof item === 'number') ? this._items[item] : item;\n    if (this._selector.selectedItem !== item) {\n      this._selector.selectItem(item);\n    }\n  }\n\n  _preventDefault(e) {\n    if (e.cancelable) {\n      e.preventDefault();\n    }\n  }\n\n  _stopPropagation(e) {\n    e.stopPropagation();\n  }\n\n  _hidden(itemsChange) {\n    return !this.loading && (!this._items || !this._items.length);\n  }\n}\n\ncustomElements.define(ComboBoxDropdownWrapperElement.is, ComboBoxDropdownWrapperElement);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ThemePropertyMixin } from '@vaadin/vaadin-themable-mixin/vaadin-theme-property-mixin.js';\nimport { ComboBoxMixin } from './vaadin-combo-box-mixin.js';\nimport { ComboBoxDataProviderMixin } from './vaadin-combo-box-data-provider-mixin.js';\nimport './vaadin-combo-box-dropdown-wrapper.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { dashToCamelCase } from '@polymer/polymer/lib/utils/case-map.js';\n/**\n * `<vaadin-combo-box-light>` is a customizable version of the `<vaadin-combo-box>` providing\n * only the dropdown functionality and leaving the input field definition to the user.\n *\n * The element has the same API as `<vaadin-combo-box>`.\n *\n * To create a custom input field, you need to add a child element which has a two-way\n * data-bindable property representing the input value. The property name is expected\n * to be `value` by default. See the example below for a simplest possible example\n * using a `<vaadin-text-field>` element.\n *\n * ```html\n * <vaadin-combo-box-light>\n *   <vaadin-text-field>\n *   </vaadin-text-field>\n * </vaadin-combo-box-light>\n * ```\n *\n * If you are using other custom input fields like `<iron-input>`, you\n * need to define the name of the bindable property with the `attrForValue` attribute.\n *\n * ```html\n * <vaadin-combo-box-light attr-for-value=\"bind-value\">\n *   <iron-input>\n *     <input>\n *   </iron-input>\n * </vaadin-combo-box-light>\n * ```\n *\n * In the next example you can see how to create a custom input field based\n * on a `<paper-input>` decorated with a custom `<iron-icon>` and\n * two `<paper-button>`s to act as the clear and toggle controls.\n *\n * ```html\n * <vaadin-combo-box-light>\n *   <paper-input label=\"Elements\" class=\"input\">\n *     <iron-icon icon=\"toll\" slot=\"prefix\"></iron-icon>\n *     <paper-button slot=\"suffix\" class=\"clear-button\">Clear</paper-button>\n *     <paper-button slot=\"suffix\" class=\"toggle-button\">Toggle</paper-button>\n *   </paper-input>\n * </vaadin-combo-box-light>\n * ```\n * @memberof Vaadin\n * @mixes Vaadin.ComboBoxDataProviderMixin\n * @mixes Vaadin.ComboBoxMixin\n * @mixes Vaadin.ThemableMixin\n * @mixes Vaadin.ThemePropertyMixin\n */\nclass ComboBoxLightElement extends\n  ThemePropertyMixin(\n    ThemableMixin(\n      ComboBoxDataProviderMixin(\n        ComboBoxMixin(PolymerElement)))) {\n  static get template() {\n    return html`\n    <slot></slot>\n\n    <vaadin-combo-box-dropdown-wrapper id=\"overlay\" opened=\"[[opened]]\" position-target=\"[[inputElement]]\" renderer=\"[[renderer]]\" _focused-index=\"[[_focusedIndex]]\" _item-id-path=\"[[itemIdPath]]\" _item-label-path=\"[[itemLabelPath]]\" loading=\"[[loading]]\" theme=\"[[theme]]\">\n    </vaadin-combo-box-dropdown-wrapper>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-combo-box-light';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Name of the two-way data-bindable property representing the\n       * value of the custom input field.\n       */\n      attrForValue: {\n        type: String,\n        value: 'value'\n      },\n\n      inputElement: {\n        type: Element,\n        readOnly: true\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    this._boundInputValueChanged = this._inputValueChanged.bind(this);\n  }\n\n  ready() {\n    super.ready();\n    this._toggleElement = this.querySelector('.toggle-button');\n    this._clearElement = this.querySelector('.clear-button');\n  }\n\n  get focused() {\n    return this.getRootNode().activeElement === this.inputElement;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    const cssSelector = 'vaadin-text-field,iron-input,paper-input,.paper-input-input,.input';\n    this._setInputElement(this.querySelector(cssSelector));\n    this._revertInputValue();\n    this.inputElement.addEventListener('input', this._boundInputValueChanged);\n    this._preventInputBlur();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.inputElement.removeEventListener('input', this._boundInputValueChanged);\n    this._restoreInputBlur();\n  }\n\n  get _propertyForValue() {\n    return dashToCamelCase(this.attrForValue);\n  }\n\n  get _inputElementValue() {\n    return this.inputElement && this.inputElement[this._propertyForValue];\n  }\n\n  set _inputElementValue(value) {\n    if (this.inputElement) {\n      this.inputElement[this._propertyForValue] = value;\n    }\n  }\n}\n\ncustomElements.define(ComboBoxLightElement.is, ComboBoxLightElement);\n\nexport { ComboBoxLightElement };\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\nimport '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/paper-menu-button/paper-menu-button.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport './paper-dropdown-menu-icons.js';\nimport './paper-dropdown-menu-shared-styles.js';\n\nimport {IronButtonState} from '@polymer/iron-behaviors/iron-button-state.js';\nimport {IronControlState} from '@polymer/iron-behaviors/iron-control-state.js';\nimport {IronFormElementBehavior} from '@polymer/iron-form-element-behavior/iron-form-element-behavior.js';\nimport {IronValidatableBehavior} from '@polymer/iron-validatable-behavior/iron-validatable-behavior.js';\nimport {PaperRippleBehavior} from '@polymer/paper-behaviors/paper-ripple-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport * as gestures from '@polymer/polymer/lib/utils/gestures.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\nMaterial design: [Dropdown\nmenus](https://www.google.com/design/spec/components/buttons.html#buttons-dropdown-buttons)\n\nThis is a faster, lighter version of `paper-dropdown-menu`, that does not\nuse a `<paper-input>` internally. Use this element if you're concerned about\nthe performance of this element, i.e., if you plan on using many dropdowns on\nthe same page. Note that this element has a slightly different styling API\nthan `paper-dropdown-menu`.\n\n`paper-dropdown-menu-light` is similar to a native browser select element.\n`paper-dropdown-menu-light` works with selectable content. The currently\nselected item is displayed in the control. If no item is selected, the `label`\nis displayed instead.\n\nExample:\n\n    <paper-dropdown-menu-light label=\"Your favourite pastry\">\n      <paper-listbox slot=\"dropdown-content\">\n        <paper-item>Croissant</paper-item>\n        <paper-item>Donut</paper-item>\n        <paper-item>Financier</paper-item>\n        <paper-item>Madeleine</paper-item>\n      </paper-listbox>\n    </paper-dropdown-menu-light>\n\nThis example renders a dropdown menu with 4 options.\n\nThe child element with the slot `dropdown-content` is used as the dropdown\nmenu. This can be a [`paper-listbox`](paper-listbox), or any other or\nelement that acts like an [`iron-selector`](iron-selector).\n\nSpecifically, the menu child must fire an\n[`iron-select`](iron-selector#event-iron-select) event when one of its\nchildren is selected, and an\n[`iron-deselect`](iron-selector#event-iron-deselect) event when a child is\ndeselected. The selected or deselected item must be passed as the event's\n`detail.item` property.\n\nApplications can listen for the `iron-select` and `iron-deselect` events\nto react when options are selected and deselected.\n\n### Styling\n\nThe following custom properties and mixins are also available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-dropdown-menu` | A mixin that is applied to the element host | `{}`\n`--paper-dropdown-menu-disabled` | A mixin that is applied to the element host when disabled | `{}`\n`--paper-dropdown-menu-ripple` | A mixin that is applied to the internal ripple | `{}`\n`--paper-dropdown-menu-button` | A mixin that is applied to the internal menu button | `{}`\n`--paper-dropdown-menu-icon` | A mixin that is applied to the internal icon | `{}`\n`--paper-dropdown-menu-disabled-opacity` | The opacity of the dropdown when disabled  | `0.33`\n`--paper-dropdown-menu-color` | The color of the input/label/underline when the dropdown is unfocused | `--primary-text-color`\n`--paper-dropdown-menu-focus-color` | The color of the label/underline when the dropdown is focused  | `--primary-color`\n`--paper-dropdown-error-color` | The color of the label/underline when the dropdown is invalid  | `--error-color`\n`--paper-dropdown-menu-label` | Mixin applied to the label | `{}`\n`--paper-dropdown-menu-input` | Mixin appled to the input | `{}`\n\nNote that in this element, the underline is just the bottom border of the\n\"input\". To style it:\n\n    <style is=custom-style>\n      paper-dropdown-menu-light.custom {\n        --paper-dropdown-menu-input: {\n          border-bottom: 2px dashed lavender;\n        };\n    </style>\n\n@group Paper Elements\n@element paper-dropdown-menu-light\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style include=\"paper-dropdown-menu-shared-styles\">\n      :host(:focus) {\n        outline: none;\n      }\n\n      :host {\n        width: 200px;  /* Default size of an <input> */\n      }\n\n      /**\n       * All of these styles below are for styling the fake-input display\n       */\n      [slot=\"dropdown-trigger\"] {\n        box-sizing: border-box;\n        position: relative;\n        width: 100%;\n        padding: 16px 0 8px 0;\n      }\n\n      :host([disabled]) [slot=\"dropdown-trigger\"] {\n        pointer-events: none;\n        opacity: var(--paper-dropdown-menu-disabled-opacity, 0.33);\n      }\n\n      :host([no-label-float]) [slot=\"dropdown-trigger\"] {\n        padding-top: 8px;   /* If there's no label, we need less space up top. */\n      }\n\n      #input {\n        @apply --paper-font-subhead;\n        @apply --paper-font-common-nowrap;\n        line-height: 1.5;\n        border-bottom: 1px solid var(--paper-dropdown-menu-color, var(--secondary-text-color));\n        color: var(--paper-dropdown-menu-color, var(--primary-text-color));\n        width: 100%;\n        box-sizing: border-box;\n        padding: 12px 20px 0 0;   /* Right padding so that text doesn't overlap the icon */\n        outline: none;\n        @apply --paper-dropdown-menu-input;\n      }\n\n      #input:dir(rtl) {\n        padding-right: 0px;\n        padding-left: 20px;\n      }\n\n      :host([disabled]) #input {\n        border-bottom: 1px dashed var(--paper-dropdown-menu-color, var(--secondary-text-color));\n      }\n\n      :host([invalid]) #input {\n        border-bottom: 2px solid var(--paper-dropdown-error-color, var(--error-color));\n      }\n\n      :host([no-label-float]) #input {\n        padding-top: 0;   /* If there's no label, we need less space up top. */\n      }\n\n      label {\n        @apply --paper-font-subhead;\n        @apply --paper-font-common-nowrap;\n        display: block;\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        /**\n         * The container has a 16px top padding, and there's 12px of padding\n         * between the input and the label (from the input's padding-top)\n         */\n        top: 28px;\n        box-sizing: border-box;\n        width: 100%;\n        padding-right: 20px;    /* Right padding so that text doesn't overlap the icon */\n        text-align: left;\n        transition-duration: .2s;\n        transition-timing-function: cubic-bezier(.4,0,.2,1);\n        color: var(--paper-dropdown-menu-color, var(--secondary-text-color));\n        @apply --paper-dropdown-menu-label;\n      }\n\n      label:dir(rtl) {\n        padding-right: 0px;\n        padding-left: 20px;\n      }\n\n      :host([no-label-float]) label {\n        top: 8px;\n        /* Since the label doesn't need to float, remove the animation duration\n        which slows down visibility changes (i.e. when a selection is made) */\n        transition-duration: 0s;\n      }\n\n      label.label-is-floating {\n        font-size: 12px;\n        top: 8px;\n      }\n\n      label.label-is-hidden {\n        visibility: hidden;\n      }\n\n      :host([focused]) label.label-is-floating {\n        color: var(--paper-dropdown-menu-focus-color, var(--primary-color));\n      }\n\n      :host([invalid]) label.label-is-floating {\n        color: var(--paper-dropdown-error-color, var(--error-color));\n      }\n\n      /**\n       * Sets up the focused underline. It's initially hidden, and becomes\n       * visible when it's focused.\n       */\n      label:after {\n        background-color: var(--paper-dropdown-menu-focus-color, var(--primary-color));\n        bottom: 7px;    /* The container has an 8px bottom padding */\n        content: '';\n        height: 2px;\n        left: 45%;\n        position: absolute;\n        transition-duration: .2s;\n        transition-timing-function: cubic-bezier(.4,0,.2,1);\n        visibility: hidden;\n        width: 8px;\n        z-index: 10;\n      }\n\n      :host([invalid]) label:after {\n        background-color: var(--paper-dropdown-error-color, var(--error-color));\n      }\n\n      :host([no-label-float]) label:after {\n        bottom: 7px;    /* The container has a 8px bottom padding */\n      }\n\n      :host([focused]:not([disabled])) label:after {\n        left: 0;\n        visibility: visible;\n        width: 100%;\n      }\n\n      iron-icon {\n        position: absolute;\n        right: 0px;\n        bottom: 8px;    /* The container has an 8px bottom padding */\n        @apply --paper-font-subhead;\n        color: var(--disabled-text-color);\n        @apply --paper-dropdown-menu-icon;\n      }\n\n      iron-icon:dir(rtl) {\n        left: 0;\n        right: auto;\n      }\n\n      :host([no-label-float]) iron-icon {\n        margin-top: 0px;\n      }\n\n      .error {\n        display: inline-block;\n        visibility: hidden;\n        color: var(--paper-dropdown-error-color, var(--error-color));\n        @apply --paper-font-caption;\n        position: absolute;\n        left:0;\n        right:0;\n        bottom: -12px;\n      }\n\n      :host([invalid]) .error {\n        visibility: visible;\n      }\n    </style>\n\n    <!-- this div fulfills an a11y requirement for combobox, do not remove -->\n    <span role=\"button\"></span>\n    <paper-menu-button id=\"menuButton\" vertical-align=\"[[verticalAlign]]\" horizontal-align=\"[[horizontalAlign]]\" vertical-offset=\"[[_computeMenuVerticalOffset(noLabelFloat, verticalOffset)]]\" disabled=\"[[disabled]]\" no-animations=\"[[noAnimations]]\" on-iron-select=\"_onIronSelect\" on-iron-deselect=\"_onIronDeselect\" opened=\"{{opened}}\" close-on-activate allow-outside-scroll=\"[[allowOutsideScroll]]\">\n      <!-- support hybrid mode: user might be using paper-menu-button 1.x which distributes via <content> -->\n      <div class=\"dropdown-trigger\" slot=\"dropdown-trigger\">\n        <label class\\$=\"[[_computeLabelClass(noLabelFloat,alwaysFloatLabel,hasContent)]]\">\n          [[label]]\n        </label>\n        <div id=\"input\" tabindex=\"-1\">&nbsp;</div>\n        <iron-icon icon=\"paper-dropdown-menu:arrow-drop-down\"></iron-icon>\n        <span class=\"error\">[[errorMessage]]</span>\n      </div>\n      <slot id=\"content\" name=\"dropdown-content\" slot=\"dropdown-content\"></slot>\n    </paper-menu-button>\n`,\n\n  is: 'paper-dropdown-menu-light',\n\n  behaviors: [\n    IronButtonState,\n    IronControlState,\n    PaperRippleBehavior,\n    IronFormElementBehavior,\n    IronValidatableBehavior\n  ],\n\n  properties: {\n    /**\n     * The derived \"label\" of the currently selected item. This value\n     * is the `label` property on the selected item if set, or else the\n     * trimmed text content of the selected item.\n     */\n    selectedItemLabel: {type: String, notify: true, readOnly: true},\n\n    /**\n     * The last selected item. An item is selected if the dropdown menu has\n     * a child with class `dropdown-content`, and that child triggers an\n     * `iron-select` event with the selected `item` in the `detail`.\n     *\n     * @type {?Object}\n     */\n    selectedItem: {type: Object, notify: true, readOnly: true},\n\n    /**\n     * The value for this element that will be used when submitting in\n     * a form. It reflects the value of `selectedItemLabel`. If set directly,\n     * it will not update the `selectedItemLabel` value.\n     */\n    value: {\n      type: String,\n      notify: true,\n      observer: '_valueChanged',\n    },\n\n    /**\n     * The label for the dropdown.\n     */\n    label: {type: String},\n\n    /**\n     * The placeholder for the dropdown.\n     */\n    placeholder: {type: String},\n\n    /**\n     * True if the dropdown is open. Otherwise, false.\n     */\n    opened:\n        {type: Boolean, notify: true, value: false, observer: '_openedChanged'},\n\n    /**\n     * By default, the dropdown will constrain scrolling on the page\n     * to itself when opened.\n     * Set to true in order to prevent scroll from being constrained\n     * to the dropdown when it opens.\n     */\n    allowOutsideScroll: {type: Boolean, value: false},\n\n    /**\n     * Set to true to disable the floating label. Bind this to the\n     * `<paper-input-container>`'s `noLabelFloat` property.\n     */\n    noLabelFloat: {type: Boolean, value: false, reflectToAttribute: true},\n\n    /**\n     * Set to true to always float the label. Bind this to the\n     * `<paper-input-container>`'s `alwaysFloatLabel` property.\n     */\n    alwaysFloatLabel: {type: Boolean, value: false},\n\n    /**\n     * Set to true to disable animations when opening and closing the\n     * dropdown.\n     */\n    noAnimations: {type: Boolean, value: false},\n\n    /**\n     * The orientation against which to align the menu dropdown\n     * horizontally relative to the dropdown trigger.\n     */\n    horizontalAlign: {type: String, value: 'right'},\n\n    /**\n     * The orientation against which to align the menu dropdown\n     * vertically relative to the dropdown trigger.\n     */\n    verticalAlign: {type: String, value: 'top'},\n\n    /**\n     * Overrides the vertical offset computed in\n     * _computeMenuVerticalOffset.\n     */\n    verticalOffset: Number,\n\n    hasContent: {type: Boolean, readOnly: true}\n  },\n\n  listeners: {'tap': '_onTap'},\n\n  /**\n   * @type {!Object}\n   */\n  keyBindings: {'up down': 'open', 'esc': 'close'},\n\n  hostAttributes: {\n    tabindex: 0,\n    role: 'combobox',\n    'aria-autocomplete': 'none',\n    'aria-haspopup': 'true'\n  },\n\n  observers: ['_selectedItemChanged(selectedItem)'],\n\n  attached: function() {\n    // NOTE(cdata): Due to timing, a preselected value in a `IronSelectable`\n    // child will cause an `iron-select` event to fire while the element is\n    // still in a `DocumentFragment`. This has the effect of causing\n    // handlers not to fire. So, we double check this value on attached:\n    var contentElement = this.contentElement;\n    if (contentElement && contentElement.selectedItem) {\n      this._setSelectedItem(contentElement.selectedItem);\n    }\n  },\n\n  /**\n   * The content element that is contained by the dropdown menu, if any.\n   */\n  get contentElement() {\n    // Polymer 2.x returns slot.assignedNodes which can contain text nodes.\n    var nodes = dom(this.$.content).getDistributedNodes();\n    for (var i = 0, l = nodes.length; i < l; i++) {\n      if (nodes[i].nodeType === Node.ELEMENT_NODE) {\n        return nodes[i];\n      }\n    }\n  },\n\n  /**\n   * Show the dropdown content.\n   */\n  open: function() {\n    this.$.menuButton.open();\n  },\n\n  /**\n   * Hide the dropdown content.\n   */\n  close: function() {\n    this.$.menuButton.close();\n  },\n\n  /**\n   * A handler that is called when `iron-select` is fired.\n   *\n   * @param {CustomEvent} event An `iron-select` event.\n   */\n  _onIronSelect: function(event) {\n    this._setSelectedItem(event.detail.item);\n  },\n\n  /**\n   * A handler that is called when `iron-deselect` is fired.\n   *\n   * @param {CustomEvent} event An `iron-deselect` event.\n   */\n  _onIronDeselect: function(event) {\n    this._setSelectedItem(null);\n  },\n\n  /**\n   * A handler that is called when the dropdown is tapped.\n   *\n   * @param {CustomEvent} event A tap event.\n   */\n  _onTap: function(event) {\n    if (gestures.findOriginalTarget(event) === this) {\n      this.open();\n    }\n  },\n\n  /**\n   * Compute the label for the dropdown given a selected item.\n   *\n   * @param {Element} selectedItem A selected Element item, with an\n   * optional `label` property.\n   */\n  _selectedItemChanged: function(selectedItem) {\n    var value = '';\n    if (!selectedItem) {\n      value = '';\n    } else {\n      value = selectedItem.label || selectedItem.getAttribute('label') ||\n          selectedItem.textContent.trim();\n    }\n\n    this.value = value;\n    this._setSelectedItemLabel(value);\n  },\n\n  /**\n   * Compute the vertical offset of the menu based on the value of\n   * `noLabelFloat`.\n   *\n   * @param {boolean} noLabelFloat True if the label should not float\n   * @param {number=} opt_verticalOffset Optional offset from the user\n   * above the input, otherwise false.\n   */\n  _computeMenuVerticalOffset: function(noLabelFloat, opt_verticalOffset) {\n    // Override offset if it's passed from the user.\n    if (opt_verticalOffset) {\n      return opt_verticalOffset;\n    }\n\n    // NOTE(cdata): These numbers are somewhat magical because they are\n    // derived from the metrics of elements internal to `paper-input`'s\n    // template. The metrics will change depending on whether or not the\n    // input has a floating label.\n    return noLabelFloat ? -4 : 8;\n  },\n\n  /**\n   * Returns false if the element is required and does not have a selection,\n   * and true otherwise.\n   * @param {*=} _value Ignored.\n   * @return {boolean} true if `required` is false, or if `required` is true\n   * and the element has a valid selection.\n   */\n  _getValidity: function(_value) {\n    return this.disabled || !this.required || (this.required && !!this.value);\n  },\n\n  _openedChanged: function() {\n    var openState = this.opened ? 'true' : 'false';\n    var e = this.contentElement;\n    if (e) {\n      e.setAttribute('aria-expanded', openState);\n    }\n  },\n\n  _computeLabelClass: function(noLabelFloat, alwaysFloatLabel, hasContent) {\n    var cls = '';\n    if (noLabelFloat === true) {\n      return hasContent ? 'label-is-hidden' : '';\n    }\n\n    if (hasContent || alwaysFloatLabel === true) {\n      cls += ' label-is-floating';\n    }\n    return cls;\n  },\n\n  _valueChanged: function() {\n    // Only update if it's actually different.\n    if (this.$.input && this.$.input.textContent !== this.value) {\n      this.$.input.textContent = this.value;\n    }\n    this._setHasContent(!!this.value);\n  }\n});\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\nimport { navigate } from \"../common/navigate\";\n\n/*\n * @polymerMixin\n * @appliesMixin EventsMixin\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      navigate(...args) {\n        navigate(this, ...args);\n      }\n    }\n);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronButtonState, IronButtonStateImpl} from '@polymer/iron-behaviors/iron-button-state.js';\nimport {IronControlState} from '@polymer/iron-behaviors/iron-control-state.js';\n\nimport {PaperRippleBehavior} from './paper-ripple-behavior.js';\n\n/** @polymerBehavior PaperButtonBehavior */\nexport const PaperButtonBehaviorImpl = {\n  properties: {\n    /**\n     * The z-depth of this element, from 0-5. Setting to 0 will remove the\n     * shadow, and each increasing number greater than 0 will be \"deeper\"\n     * than the last.\n     *\n     * @attribute elevation\n     * @type number\n     * @default 1\n     */\n    elevation: {type: Number, reflectToAttribute: true, readOnly: true}\n  },\n\n  observers: [\n    '_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)',\n    '_computeKeyboardClass(receivedFocusFromKeyboard)'\n  ],\n\n  hostAttributes: {role: 'button', tabindex: '0', animated: true},\n\n  _calculateElevation: function() {\n    var e = 1;\n    if (this.disabled) {\n      e = 0;\n    } else if (this.active || this.pressed) {\n      e = 4;\n    } else if (this.receivedFocusFromKeyboard) {\n      e = 3;\n    }\n    this._setElevation(e);\n  },\n\n  _computeKeyboardClass: function(receivedFocusFromKeyboard) {\n    this.toggleClass('keyboard-focus', receivedFocusFromKeyboard);\n  },\n\n  /**\n   * In addition to `IronButtonState` behavior, when space key goes down,\n   * create a ripple down effect.\n   *\n   * @param {!KeyboardEvent} event .\n   */\n  _spaceKeyDownHandler: function(event) {\n    IronButtonStateImpl._spaceKeyDownHandler.call(this, event);\n    // Ensure that there is at most one ripple when the space key is held down.\n    if (this.hasRipple() && this.getRipple().ripples.length < 1) {\n      this._ripple.uiDownAction();\n    }\n  },\n\n  /**\n   * In addition to `IronButtonState` behavior, when space key goes up,\n   * create a ripple up effect.\n   *\n   * @param {!KeyboardEvent} event .\n   */\n  _spaceKeyUpHandler: function(event) {\n    IronButtonStateImpl._spaceKeyUpHandler.call(this, event);\n    if (this.hasRipple()) {\n      this._ripple.uiUpAction();\n    }\n  }\n};\n\n/** @polymerBehavior */\nexport const PaperButtonBehavior = [\n  IronButtonState,\n  IronControlState,\n  PaperRippleBehavior,\n  PaperButtonBehaviorImpl\n];\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/paper-styles/element-styles/paper-material-styles.js';\nimport '@polymer/paper-styles/color.js';\nimport '@polymer/paper-styles/default-theme.js';\n\nimport {PaperButtonBehavior} from '@polymer/paper-behaviors/paper-button-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst template = html`\n  <style include=\"paper-material-styles\">\n    :host {\n      @apply --layout-vertical;\n      @apply --layout-center-center;\n\n      background: var(--paper-fab-background, var(--accent-color));\n      border-radius: 50%;\n      box-sizing: border-box;\n      color: var(--text-primary-color);\n      cursor: pointer;\n      height: 56px;\n      min-width: 0;\n      outline: none;\n      padding: 16px;\n      position: relative;\n      -moz-user-select: none;\n      -ms-user-select: none;\n      -webkit-user-select: none;\n      user-select: none;\n      width: 56px;\n      z-index: 0;\n\n      /* NOTE: Both values are needed, since some phones require the value \\`transparent\\`. */\n      -webkit-tap-highlight-color: rgba(0,0,0,0);\n      -webkit-tap-highlight-color: transparent;\n\n      @apply --paper-fab;\n    }\n\n    [hidden] {\n      display: none !important;\n    }\n\n    :host([mini]) {\n      width: 40px;\n      height: 40px;\n      padding: 8px;\n\n      @apply --paper-fab-mini;\n    }\n\n    :host([disabled]) {\n      color: var(--paper-fab-disabled-text, var(--paper-grey-500));\n      background: var(--paper-fab-disabled-background, var(--paper-grey-300));\n\n      @apply --paper-fab-disabled;\n    }\n\n    iron-icon {\n      @apply --paper-fab-iron-icon;\n    }\n\n    span {\n      width: 100%;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      text-align: center;\n\n      @apply --paper-fab-label;\n    }\n\n    :host(.keyboard-focus) {\n      background: var(--paper-fab-keyboard-focus-background, var(--paper-pink-900));\n    }\n\n    :host([elevation=\"1\"]) {\n      @apply --paper-material-elevation-1;\n    }\n\n    :host([elevation=\"2\"]) {\n      @apply --paper-material-elevation-2;\n    }\n\n    :host([elevation=\"3\"]) {\n      @apply --paper-material-elevation-3;\n    }\n\n    :host([elevation=\"4\"]) {\n      @apply --paper-material-elevation-4;\n    }\n\n    :host([elevation=\"5\"]) {\n      @apply --paper-material-elevation-5;\n    }\n  </style>\n\n  <iron-icon id=\"icon\" hidden\\$=\"{{!_computeIsIconFab(icon, src)}}\" src=\"[[src]]\" icon=\"[[icon]]\"></iron-icon>\n  <span hidden\\$=\"{{_computeIsIconFab(icon, src)}}\">{{label}}</span>\n`;\ntemplate.setAttribute('strip-whitespace', '');\n\n/**\nMaterial design: [Floating Action\nButton](https://www.google.com/design/spec/components/buttons-floating-action-button.html)\n\n`paper-fab` is a floating action button. It contains an image placed in the\ncenter and comes in two sizes: regular size and a smaller size by applying the\nattribute `mini`. When the user touches the button, a ripple effect emanates\nfrom the center of the button.\n\nYou may import `iron-icons` to use with this element, or provide a URL to a\ncustom icon. See `iron-iconset` for more information about how to use a custom\nicon set.\n\nExample:\n\n    <script type=\"module\">\n      import '@polymer/iron-icons/iron-icons.js';\n    </script>\n\n    <paper-fab icon=\"add\"></paper-fab>\n    <paper-fab mini icon=\"favorite\"></paper-fab>\n    <paper-fab src=\"star.png\"></paper-fab>\n\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-fab-background` | The background color of the button | `--accent-color`\n`--paper-fab-keyboard-focus-background` | The background color of the button when focused | `--paper-pink-900`\n`--paper-fab-disabled-background` | The background color of the button when it's disabled | `--paper-grey-300`\n`--paper-fab-disabled-text` | The text color of the button when it's disabled | `--paper-grey-500`\n`--paper-fab` | Mixin applied to the button | `{}`\n`--paper-fab-mini` | Mixin applied to a mini button | `{}`\n`--paper-fab-disabled` | Mixin applied to a disabled button | `{}`\n`--paper-fab-iron-icon` | Mixin applied to the iron-icon within the button | `{}`\n`--paper-fab-label` | Mixin applied to the label within the button | `{}`\n\n@group Paper Elements\n@demo demo/index.html\n*/\nPolymer({\n  _template: template,\n\n  is: 'paper-fab',\n\n  behaviors: [PaperButtonBehavior],\n\n  properties: {\n    /**\n     * The URL of an image for the icon. If the src property is specified,\n     * the icon property should not be.\n     */\n    src: {type: String, value: ''},\n\n    /**\n     * Specifies the icon name or index in the set of icons available in\n     * the icon's icon set. If the icon property is specified,\n     * the src property should not be.\n     */\n    icon: {type: String, value: ''},\n\n    /**\n     * Set this to true to style this is a \"mini\" FAB.\n     */\n    mini: {type: Boolean, value: false, reflectToAttribute: true},\n\n    /**\n     * The label displayed in the badge. The label is centered, and ideally\n     * should have very few characters.\n     */\n    label: {type: String, observer: '_labelChanged'}\n  },\n\n  _labelChanged: function() {\n    this.setAttribute('aria-label', this.label);\n  },\n\n  _computeIsIconFab: function(icon, src) {\n    return (icon.length > 0) || (src.length > 0);\n  }\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\n\nimport {PaperCheckedElementBehavior} from '@polymer/paper-behaviors/paper-checked-element-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\nimport {afterNextRender} from '@polymer/polymer/lib/utils/render-status.js';\n\nconst template = html`\n<style>\n  :host {\n    display: inline-block;\n    line-height: 0;\n    white-space: nowrap;\n    cursor: pointer;\n    @apply --paper-font-common-base;\n    --calculated-paper-radio-button-size: var(--paper-radio-button-size, 16px);\n    /* -1px is a sentinel for the default and is replace in \\`attached\\`. */\n    --calculated-paper-radio-button-ink-size: var(--paper-radio-button-ink-size, -1px);\n  }\n\n  :host(:focus) {\n    outline: none;\n  }\n\n  #radioContainer {\n    @apply --layout-inline;\n    @apply --layout-center-center;\n    position: relative;\n    width: var(--calculated-paper-radio-button-size);\n    height: var(--calculated-paper-radio-button-size);\n    vertical-align: middle;\n\n    @apply --paper-radio-button-radio-container;\n  }\n\n  #ink {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    right: auto;\n    width: var(--calculated-paper-radio-button-ink-size);\n    height: var(--calculated-paper-radio-button-ink-size);\n    color: var(--paper-radio-button-unchecked-ink-color, var(--primary-text-color));\n    opacity: 0.6;\n    pointer-events: none;\n    -webkit-transform: translate(-50%, -50%);\n    transform: translate(-50%, -50%);\n  }\n\n  #ink[checked] {\n    color: var(--paper-radio-button-checked-ink-color, var(--primary-color));\n  }\n\n  #offRadio, #onRadio {\n    position: absolute;\n    box-sizing: border-box;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n  }\n\n  #offRadio {\n    border: 2px solid var(--paper-radio-button-unchecked-color, var(--primary-text-color));\n    background-color: var(--paper-radio-button-unchecked-background-color, transparent);\n    transition: border-color 0.28s;\n  }\n\n  #onRadio {\n    background-color: var(--paper-radio-button-checked-color, var(--primary-color));\n    -webkit-transform: scale(0);\n    transform: scale(0);\n    transition: -webkit-transform ease 0.28s;\n    transition: transform ease 0.28s;\n    will-change: transform;\n  }\n\n  :host([checked]) #offRadio {\n    border-color: var(--paper-radio-button-checked-color, var(--primary-color));\n  }\n\n  :host([checked]) #onRadio {\n    -webkit-transform: scale(0.5);\n    transform: scale(0.5);\n  }\n\n  #radioLabel {\n    line-height: normal;\n    position: relative;\n    display: inline-block;\n    vertical-align: middle;\n    margin-left: var(--paper-radio-button-label-spacing, 10px);\n    white-space: normal;\n    color: var(--paper-radio-button-label-color, var(--primary-text-color));\n\n    @apply --paper-radio-button-label;\n  }\n\n  :host([checked]) #radioLabel {\n    @apply --paper-radio-button-label-checked;\n  }\n\n  #radioLabel:dir(rtl) {\n    margin-left: 0;\n    margin-right: var(--paper-radio-button-label-spacing, 10px);\n  }\n\n  #radioLabel[hidden] {\n    display: none;\n  }\n\n  /* disabled state */\n\n  :host([disabled]) #offRadio {\n    border-color: var(--paper-radio-button-unchecked-color, var(--primary-text-color));\n    opacity: 0.5;\n  }\n\n  :host([disabled][checked]) #onRadio {\n    background-color: var(--paper-radio-button-unchecked-color, var(--primary-text-color));\n    opacity: 0.5;\n  }\n\n  :host([disabled]) #radioLabel {\n    /* slightly darker than the button, so that it's readable */\n    opacity: 0.65;\n  }\n</style>\n\n<div id=\"radioContainer\">\n  <div id=\"offRadio\"></div>\n  <div id=\"onRadio\"></div>\n</div>\n\n<div id=\"radioLabel\"><slot></slot></div>`;\ntemplate.setAttribute('strip-whitespace', '');\n\n/**\nMaterial design: [Radio button](https://www.google.com/design/spec/components/selection-controls.html#selection-controls-radio-button)\n\n`paper-radio-button` is a button that can be either checked or unchecked. The\nuser can tap the radio button to check or uncheck it.\n\nUse a `<paper-radio-group>` to group a set of radio buttons. When radio buttons\nare inside a radio group, exactly one radio button in the group can be checked\nat any time.\n\nExample:\n\n    <paper-radio-button></paper-radio-button>\n    <paper-radio-button>Item label</paper-radio-button>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-radio-button-unchecked-background-color` | Radio button background color when the input is not checked | `transparent`\n`--paper-radio-button-unchecked-color` | Radio button color when the input is not checked | `--primary-text-color`\n`--paper-radio-button-unchecked-ink-color` | Selected/focus ripple color when the input is not checked | `--primary-text-color`\n`--paper-radio-button-checked-color` | Radio button color when the input is checked | `--primary-color`\n`--paper-radio-button-checked-ink-color` | Selected/focus ripple color when the input is checked | `--primary-color`\n`--paper-radio-button-size` | Size of the radio button | `16px`\n`--paper-radio-button-ink-size` | Size of the ripple | `48px`\n`--paper-radio-button-label-color` | Label color | `--primary-text-color`\n`--paper-radio-button-label-spacing` | Spacing between the label and the button | `10px`\n`--paper-radio-button-radio-container` | A mixin applied to the internal radio container | `{}`\n`--paper-radio-button-label` | A mixin applied to the internal label | `{}`\n`--paper-radio-button-label-checked` | A mixin applied to the internal label when the radio button is checked | `{}`\n\nThis element applies the mixin `--paper-font-common-base` but does not import\n`paper-styles/typography.html`. In order to apply the `Roboto` font to this\nelement, make sure you've imported `paper-styles/typography.html`.\n\n@group Paper Elements\n@element paper-radio-button\n@demo demo/index.html\n*/\nPolymer({\n  _template: template,\n\n  is: 'paper-radio-button',\n\n  behaviors: [PaperCheckedElementBehavior],\n\n  hostAttributes: {role: 'radio', 'aria-checked': false, tabindex: 0},\n\n  properties: {\n    /**\n     * Fired when the checked state changes due to user interaction.\n     *\n     * @event change\n     */\n\n    /**\n     * Fired when the checked state changes.\n     *\n     * @event iron-change\n     */\n\n    ariaActiveAttribute: {type: String, value: 'aria-checked'}\n  },\n\n  ready: function() {\n    this._rippleContainer = this.$.radioContainer;\n  },\n\n  attached: function() {\n    // Wait until styles have resolved to check for the default sentinel.\n    // See polymer#4009 for more details.\n    afterNextRender(this, function() {\n      var inkSize =\n          this.getComputedStyleValue('--calculated-paper-radio-button-ink-size')\n              .trim();\n      // If unset, compute and set the default `--paper-radio-button-ink-size`.\n      if (inkSize === '-1px') {\n        var size = parseFloat(\n            this.getComputedStyleValue('--calculated-paper-radio-button-size')\n                .trim());\n        var defaultInkSize = Math.floor(3 * size);\n\n        // The button and ripple need to have the same parity so that their\n        // centers align.\n        if (defaultInkSize % 2 !== size % 2) {\n          defaultInkSize++;\n        }\n\n        this.updateStyles({\n          '--paper-radio-button-ink-size': defaultInkSize + 'px',\n        });\n      }\n    });\n  },\n})\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronMenuBehavior} from './iron-menu-behavior.js';\n\n/**\n * `IronMenubarBehavior` implements accessible menubar behavior.\n *\n * @polymerBehavior IronMenubarBehavior\n */\nexport const IronMenubarBehaviorImpl = {\n\n  hostAttributes: {'role': 'menubar'},\n\n  /**\n   * @type {!Object}\n   */\n  keyBindings: {'left': '_onLeftKey', 'right': '_onRightKey'},\n\n  _onUpKey: function(event) {\n    this.focusedItem.click();\n    event.detail.keyboardEvent.preventDefault();\n  },\n\n  _onDownKey: function(event) {\n    this.focusedItem.click();\n    event.detail.keyboardEvent.preventDefault();\n  },\n\n  get _isRTL() {\n    return window.getComputedStyle(this)['direction'] === 'rtl';\n  },\n\n  _onLeftKey: function(event) {\n    if (this._isRTL) {\n      this._focusNext();\n    } else {\n      this._focusPrevious();\n    }\n    event.detail.keyboardEvent.preventDefault();\n  },\n\n  _onRightKey: function(event) {\n    if (this._isRTL) {\n      this._focusPrevious();\n    } else {\n      this._focusNext();\n    }\n    event.detail.keyboardEvent.preventDefault();\n  },\n\n  _onKeydown: function(event) {\n    if (this.keyboardEventMatchesKeys(event, 'up down left right esc')) {\n      return;\n    }\n\n    // all other keys focus the menu item starting with that character\n    this._focusWithKeyboardEvent(event);\n  }\n\n};\n\n/** @polymerBehavior */\nexport const IronMenubarBehavior = [IronMenuBehavior, IronMenubarBehaviorImpl];\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\n\n/**\n`app-route` is an element that enables declarative, self-describing routing\nfor a web app.\n\nIn its typical usage, a `app-route` element consumes an object that describes\nsome state about the current route, via the `route` property. It then parses\nthat state using the `pattern` property, and produces two artifacts: some `data`\nrelated to the `route`, and a `tail` that contains the rest of the `route` that\ndid not match.\n\nHere is a basic example, when used with `app-location`:\n\n    <app-location route=\"{{route}}\"></app-location>\n    <app-route\n        route=\"{{route}}\"\n        pattern=\"/:page\"\n        data=\"{{data}}\"\n        tail=\"{{tail}}\">\n    </app-route>\n\nIn the above example, the `app-location` produces a `route` value. Then, the\n`route.path` property is matched by comparing it to the `pattern` property. If\nthe `pattern` property matches `route.path`, the `app-route` will set or update\nits `data` property with an object whose properties correspond to the parameters\nin `pattern`. So, in the above example, if `route.path` was `'/about'`, the\nvalue of `data` would be `{\"page\": \"about\"}`.\n\nThe `tail` property represents the remaining part of the route state after the\n`pattern` has been applied to a matching `route`.\n\nHere is another example, where `tail` is used:\n\n    <app-location route=\"{{route}}\"></app-location>\n    <app-route\n        route=\"{{route}}\"\n        pattern=\"/:page\"\n        data=\"{{routeData}}\"\n        tail=\"{{subroute}}\">\n    </app-route>\n    <app-route\n        route=\"{{subroute}}\"\n        pattern=\"/:id\"\n        data=\"{{subrouteData}}\">\n    </app-route>\n\nIn the above example, there are two `app-route` elements. The first\n`app-route` consumes a `route`. When the `route` is matched, the first\n`app-route` also produces `routeData` from its `data`, and `subroute` from\nits `tail`. The second `app-route` consumes the `subroute`, and when it\nmatches, it produces an object called `subrouteData` from its `data`.\n\nSo, when `route.path` is `'/about'`, the `routeData` object will look like\nthis: `{ page: 'about' }`\n\nAnd `subrouteData` will be null. However, if `route.path` changes to\n`'/article/123'`, the `routeData` object will look like this:\n`{ page: 'article' }`\n\nAnd the `subrouteData` will look like this: `{ id: '123' }`\n\n`app-route` is responsive to bi-directional changes to the `data` objects\nthey produce. So, if `routeData.page` changed from `'article'` to `'about'`,\nthe `app-route` will update `route.path`. This in-turn will update the\n`app-location`, and cause the global location bar to change its value.\n\n@element app-route\n@demo demo/index.html\n@demo demo/data-loading-demo.html\n@demo demo/simple-demo.html\n*/\nPolymer({\n  is: 'app-route',\n\n  properties: {\n    /**\n     * The URL component managed by this element.\n     */\n    route: {\n      type: Object,\n      notify: true,\n    },\n\n    /**\n     * The pattern of slash-separated segments to match `route.path` against.\n     *\n     * For example the pattern \"/foo\" will match \"/foo\" or \"/foo/bar\"\n     * but not \"/foobar\".\n     *\n     * Path segments like `/:named` are mapped to properties on the `data`\n     * object.\n     */\n    pattern: {\n      type: String,\n    },\n\n    /**\n     * The parameterized values that are extracted from the route as\n     * described by `pattern`.\n     */\n    data: {\n      type: Object,\n      value: function() {\n        return {};\n      },\n      notify: true,\n    },\n\n    /**\n     * Auto activate route if path empty\n     */\n    autoActivate: {\n      type: Boolean,\n      value: false,\n    },\n\n    _queryParamsUpdating: {\n      type: Boolean,\n      value: false,\n    },\n\n    /**\n     * @type {?Object}\n     */\n    queryParams: {\n      type: Object,\n      value: function() {\n        return {};\n      },\n      notify: true,\n    },\n\n    /**\n     * The part of `route.path` NOT consumed by `pattern`.\n     */\n    tail: {\n      type: Object,\n      value: function() {\n        return {\n          path: null,\n          prefix: null,\n          __queryParams: null,\n        };\n      },\n      notify: true,\n    },\n\n    /**\n     * Whether the current route is active. True if `route.path` matches the\n     * `pattern`, false otherwise.\n     */\n    active: {\n      type: Boolean,\n      notify: true,\n      readOnly: true,\n    },\n\n    /**\n     * @type {?string}\n     */\n    _matched: {\n      type: String,\n      value: '',\n    }\n  },\n\n  observers: [\n    '__tryToMatch(route.path, pattern)',\n    '__updatePathOnDataChange(data.*)',\n    '__tailPathChanged(tail.path)',\n    '__routeQueryParamsChanged(route.__queryParams)',\n    '__tailQueryParamsChanged(tail.__queryParams)',\n    '__queryParamsChanged(queryParams.*)'\n  ],\n\n  created: function() {\n    this.linkPaths('route.__queryParams', 'tail.__queryParams');\n    this.linkPaths('tail.__queryParams', 'route.__queryParams');\n  },\n\n  /**\n   * Deal with the query params object being assigned to wholesale.\n   */\n  __routeQueryParamsChanged: function(queryParams) {\n    if (queryParams && this.tail) {\n      if (this.tail.__queryParams !== queryParams) {\n        this.set('tail.__queryParams', queryParams);\n      }\n\n      if (!this.active || this._queryParamsUpdating) {\n        return;\n      }\n\n      // Copy queryParams and track whether there are any differences compared\n      // to the existing query params.\n      var copyOfQueryParams = {};\n      var anythingChanged = false;\n      for (var key in queryParams) {\n        copyOfQueryParams[key] = queryParams[key];\n        if (anythingChanged || !this.queryParams ||\n            queryParams[key] !== this.queryParams[key]) {\n          anythingChanged = true;\n        }\n      }\n      // Need to check whether any keys were deleted\n      for (var key in this.queryParams) {\n        if (anythingChanged || !(key in queryParams)) {\n          anythingChanged = true;\n          break;\n        }\n      }\n\n      if (!anythingChanged) {\n        return;\n      }\n      this._queryParamsUpdating = true;\n      this.set('queryParams', copyOfQueryParams);\n      this._queryParamsUpdating = false;\n    }\n  },\n\n  __tailQueryParamsChanged: function(queryParams) {\n    if (queryParams && this.route && this.route.__queryParams != queryParams) {\n      this.set('route.__queryParams', queryParams);\n    }\n  },\n\n  __queryParamsChanged: function(changes) {\n    if (!this.active || this._queryParamsUpdating) {\n      return;\n    }\n\n    this.set('route.__' + changes.path, changes.value);\n  },\n\n  __resetProperties: function() {\n    this._setActive(false);\n    this._matched = null;\n  },\n\n  __tryToMatch: function() {\n    if (!this.route) {\n      return;\n    }\n\n    var path = this.route.path;\n    var pattern = this.pattern;\n\n    if (this.autoActivate && path === '') {\n      path = '/';\n    }\n\n    if (!pattern) {\n      return;\n    }\n\n    if (!path) {\n      this.__resetProperties();\n      return;\n    }\n\n    var remainingPieces = path.split('/');\n    var patternPieces = pattern.split('/');\n\n    var matched = [];\n    var namedMatches = {};\n\n    for (var i = 0; i < patternPieces.length; i++) {\n      var patternPiece = patternPieces[i];\n      if (!patternPiece && patternPiece !== '') {\n        break;\n      }\n      var pathPiece = remainingPieces.shift();\n\n      // We don't match this path.\n      if (!pathPiece && pathPiece !== '') {\n        this.__resetProperties();\n        return;\n      }\n      matched.push(pathPiece);\n\n      if (patternPiece.charAt(0) == ':') {\n        namedMatches[patternPiece.slice(1)] = pathPiece;\n      } else if (patternPiece !== pathPiece) {\n        this.__resetProperties();\n        return;\n      }\n    }\n\n    this._matched = matched.join('/');\n\n    // Properties that must be updated atomically.\n    var propertyUpdates = {};\n\n    // this.active\n    if (!this.active) {\n      propertyUpdates.active = true;\n    }\n\n    // this.tail\n    var tailPrefix = this.route.prefix + this._matched;\n    var tailPath = remainingPieces.join('/');\n    if (remainingPieces.length > 0) {\n      tailPath = '/' + tailPath;\n    }\n    if (!this.tail || this.tail.prefix !== tailPrefix ||\n        this.tail.path !== tailPath) {\n      propertyUpdates.tail = {\n        prefix: tailPrefix,\n        path: tailPath,\n        __queryParams: this.route.__queryParams\n      };\n    }\n\n    // this.data\n    propertyUpdates.data = namedMatches;\n    this._dataInUrl = {};\n    for (var key in namedMatches) {\n      this._dataInUrl[key] = namedMatches[key];\n    }\n\n    if (this.setProperties) {\n      // atomic update\n      this.setProperties(propertyUpdates, true);\n    } else {\n      this.__setMulti(propertyUpdates);\n    }\n  },\n\n  __tailPathChanged: function(path) {\n    if (!this.active) {\n      return;\n    }\n    var tailPath = path;\n    var newPath = this._matched;\n    if (tailPath) {\n      if (tailPath.charAt(0) !== '/') {\n        tailPath = '/' + tailPath;\n      }\n      newPath += tailPath;\n    }\n    this.set('route.path', newPath);\n  },\n\n  __updatePathOnDataChange: function() {\n    if (!this.route || !this.active) {\n      return;\n    }\n    var newPath = this.__getLink({});\n    var oldPath = this.__getLink(this._dataInUrl);\n    if (newPath === oldPath) {\n      return;\n    }\n    this.set('route.path', newPath);\n  },\n\n  __getLink: function(overrideValues) {\n    var values = {tail: null};\n    for (var key in this.data) {\n      values[key] = this.data[key];\n    }\n    for (var key in overrideValues) {\n      values[key] = overrideValues[key];\n    }\n    var patternPieces = this.pattern.split('/');\n    var interp = patternPieces.map(function(value) {\n      if (value[0] == ':') {\n        value = values[value.slice(1)];\n      }\n      return value;\n    }, this);\n    if (values.tail && values.tail.path) {\n      if (interp.length > 0 && values.tail.path.charAt(0) === '/') {\n        interp.push(values.tail.path.slice(1));\n      } else {\n        interp.push(values.tail.path);\n      }\n    }\n    return interp.join('/');\n  },\n\n  __setMulti: function(setObj) {\n    // HACK(rictic): skirting around 1.0's lack of a setMulti by poking at\n    //     internal data structures. I would not advise that you copy this\n    //     example.\n    //\n    //     In the future this will be a feature of Polymer itself.\n    //     See: https://github.com/Polymer/polymer/issues/3640\n    //\n    //     Hacking around with private methods like this is juggling footguns,\n    //     and is likely to have unexpected and unsupported rough edges.\n    //\n    //     Be ye so warned.\n    for (var property in setObj) {\n      this._propertySetter(property, setObj[property]);\n    }\n    // notify in a specific order\n    if (setObj.data !== undefined) {\n      this._pathEffector('data', this.data);\n      this._notifyChange('data');\n    }\n    if (setObj.active !== undefined) {\n      this._pathEffector('active', this.active);\n      this._notifyChange('active');\n    }\n    if (setObj.tail !== undefined) {\n      this._pathEffector('tail', this.tail);\n      this._notifyChange('tail');\n    }\n  }\n});\n","/*\nWrapper for paper-textarea.\n\npaper-textarea crashes on iOS when created programmatically. This only impacts\nour automation and script editors as they are using Preact. Polymer is using\ntemplate elements and does not have this issue.\n\npaper-textarea issue: https://github.com/PolymerElements/paper-input/issues/556\nWebKit issue: https://bugs.webkit.org/show_bug.cgi?id=174629\n*/\n\nimport \"@polymer/paper-input/paper-textarea\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nclass HaTextarea extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n        }\n      </style>\n      <paper-textarea label=\"[[label]]\" value=\"{{value}}\"></paper-textarea>\n    `;\n  }\n\n  static get properties() {\n    return {\n      label: String,\n      value: {\n        type: String,\n        notify: true,\n      },\n    };\n  }\n}\n\ncustomElements.define(\"ha-textarea\", HaTextarea);\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\n\n/**\n * `Polymer.IronScrollTargetBehavior` allows an element to respond to scroll\n * events from a designated scroll target.\n *\n * Elements that consume this behavior can override the `_scrollHandler`\n * method to add logic on the scroll event.\n *\n * @demo demo/scrolling-region.html Scrolling Region\n * @demo demo/document.html Document Element\n * @polymerBehavior\n */\nexport const IronScrollTargetBehavior = {\n\n  properties: {\n\n    /**\n     * Specifies the element that will handle the scroll event\n     * on the behalf of the current element. This is typically a reference to an\n     *element, but there are a few more posibilities:\n     *\n     * ### Elements id\n     *\n     *```html\n     * <div id=\"scrollable-element\" style=\"overflow: auto;\">\n     *  <x-element scroll-target=\"scrollable-element\">\n     *    <!-- Content-->\n     *  </x-element>\n     * </div>\n     *```\n     * In this case, the `scrollTarget` will point to the outer div element.\n     *\n     * ### Document scrolling\n     *\n     * For document scrolling, you can use the reserved word `document`:\n     *\n     *```html\n     * <x-element scroll-target=\"document\">\n     *   <!-- Content -->\n     * </x-element>\n     *```\n     *\n     * ### Elements reference\n     *\n     *```js\n     * appHeader.scrollTarget = document.querySelector('#scrollable-element');\n     *```\n     *\n     * @type {HTMLElement}\n     * @default document\n     */\n    scrollTarget: {\n      type: HTMLElement,\n      value: function() {\n        return this._defaultScrollTarget;\n      }\n    }\n  },\n\n  observers: ['_scrollTargetChanged(scrollTarget, isAttached)'],\n\n  /**\n   * True if the event listener should be installed.\n   */\n  _shouldHaveListener: true,\n\n  _scrollTargetChanged: function(scrollTarget, isAttached) {\n    var eventTarget;\n\n    if (this._oldScrollTarget) {\n      this._toggleScrollListener(false, this._oldScrollTarget);\n      this._oldScrollTarget = null;\n    }\n    if (!isAttached) {\n      return;\n    }\n    // Support element id references\n    if (scrollTarget === 'document') {\n      this.scrollTarget = this._doc;\n\n    } else if (typeof scrollTarget === 'string') {\n      var domHost = this.domHost;\n\n      this.scrollTarget = domHost && domHost.$ ?\n          domHost.$[scrollTarget] :\n          dom(this.ownerDocument).querySelector('#' + scrollTarget);\n\n    } else if (this._isValidScrollTarget()) {\n      this._oldScrollTarget = scrollTarget;\n      this._toggleScrollListener(this._shouldHaveListener, scrollTarget);\n    }\n  },\n\n  /**\n   * Runs on every scroll event. Consumer of this behavior may override this\n   * method.\n   *\n   * @protected\n   */\n  _scrollHandler: function scrollHandler() {},\n\n  /**\n   * The default scroll target. Consumers of this behavior may want to customize\n   * the default scroll target.\n   *\n   * @type {Element}\n   */\n  get _defaultScrollTarget() {\n    return this._doc;\n  },\n\n  /**\n   * Shortcut for the document element\n   *\n   * @type {Element}\n   */\n  get _doc() {\n    return this.ownerDocument.documentElement;\n  },\n\n  /**\n   * Gets the number of pixels that the content of an element is scrolled\n   * upward.\n   *\n   * @type {number}\n   */\n  get _scrollTop() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.pageYOffset :\n                                               this.scrollTarget.scrollTop;\n    }\n    return 0;\n  },\n\n  /**\n   * Gets the number of pixels that the content of an element is scrolled to the\n   * left.\n   *\n   * @type {number}\n   */\n  get _scrollLeft() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.pageXOffset :\n                                               this.scrollTarget.scrollLeft;\n    }\n    return 0;\n  },\n\n  /**\n   * Sets the number of pixels that the content of an element is scrolled\n   * upward.\n   *\n   * @type {number}\n   */\n  set _scrollTop(top) {\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(window.pageXOffset, top);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollTop = top;\n    }\n  },\n\n  /**\n   * Sets the number of pixels that the content of an element is scrolled to the\n   * left.\n   *\n   * @type {number}\n   */\n  set _scrollLeft(left) {\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(left, window.pageYOffset);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollLeft = left;\n    }\n  },\n\n  /**\n   * Scrolls the content to a particular place.\n   *\n   * @method scroll\n   * @param {number|!{left: number, top: number}} leftOrOptions The left position or scroll options\n   * @param {number=} top The top position\n   * @return {void}\n   */\n  scroll: function(leftOrOptions, top) {\n    var left;\n\n    if (typeof leftOrOptions === 'object') {\n      left = leftOrOptions.left;\n      top = leftOrOptions.top;\n    } else {\n      left = leftOrOptions;\n    }\n\n    left = left || 0;\n    top = top || 0;\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(left, top);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollLeft = left;\n      this.scrollTarget.scrollTop = top;\n    }\n  },\n\n  /**\n   * Gets the width of the scroll target.\n   *\n   * @type {number}\n   */\n  get _scrollTargetWidth() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.innerWidth :\n                                               this.scrollTarget.offsetWidth;\n    }\n    return 0;\n  },\n\n  /**\n   * Gets the height of the scroll target.\n   *\n   * @type {number}\n   */\n  get _scrollTargetHeight() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.innerHeight :\n                                               this.scrollTarget.offsetHeight;\n    }\n    return 0;\n  },\n\n  /**\n   * Returns true if the scroll target is a valid HTMLElement.\n   *\n   * @return {boolean}\n   */\n  _isValidScrollTarget: function() {\n    return this.scrollTarget instanceof HTMLElement;\n  },\n\n  _toggleScrollListener: function(yes, scrollTarget) {\n    var eventTarget = scrollTarget === this._doc ? window : scrollTarget;\n    if (yes) {\n      if (!this._boundScrollHandler) {\n        this._boundScrollHandler = this._scrollHandler.bind(this);\n        eventTarget.addEventListener('scroll', this._boundScrollHandler);\n      }\n    } else {\n      if (this._boundScrollHandler) {\n        eventTarget.removeEventListener('scroll', this._boundScrollHandler);\n        this._boundScrollHandler = null;\n      }\n    }\n  },\n\n  /**\n   * Enables or disables the scroll event listener.\n   *\n   * @param {boolean} yes True to add the event, False to remove it.\n   */\n  toggleScrollListener: function(yes) {\n    this._shouldHaveListener = yes;\n    this._toggleScrollListener(yes, this.scrollTarget);\n  }\n\n};\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/*\nThis code is copied from app-header-layout.\n'fullbleed' support is removed as Home Assisstant doesn't use it.\ntransform: translate(0) is added.\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport \"@polymer/app-layout/app-header-layout/app-header-layout\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport \"@polymer/polymer/polymer-element\";\n\nclass HaAppLayout extends customElements.get(\"app-header-layout\") {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n          /**\n         * Force app-header-layout to have its own stacking context so that its parent can\n         * control the stacking of it relative to other elements (e.g. app-drawer-layout).\n         * This could be done using \\`isolation: isolate\\`, but that's not well supported\n         * across browsers.\n         */\n          position: relative;\n          z-index: 0;\n        }\n\n        #wrapper ::slotted([slot=\"header\"]) {\n          @apply --layout-fixed-top;\n          z-index: 1;\n        }\n\n        #wrapper.initializing ::slotted([slot=\"header\"]) {\n          position: relative;\n        }\n\n        :host([has-scrolling-region]) {\n          height: 100%;\n        }\n\n        :host([has-scrolling-region]) #wrapper ::slotted([slot=\"header\"]) {\n          position: absolute;\n        }\n\n        :host([has-scrolling-region])\n          #wrapper.initializing\n          ::slotted([slot=\"header\"]) {\n          position: relative;\n        }\n\n        :host([has-scrolling-region]) #wrapper #contentContainer {\n          @apply --layout-fit;\n          overflow-y: auto;\n          -webkit-overflow-scrolling: touch;\n        }\n\n        :host([has-scrolling-region]) #wrapper.initializing #contentContainer {\n          position: relative;\n        }\n\n        #contentContainer {\n          /* Create a stacking context here so that all children appear below the header. */\n          position: relative;\n          z-index: 0;\n          /* Using 'transform' will cause 'position: fixed' elements to behave like\n           'position: absolute' relative to this element. */\n          transform: translate(0);\n        }\n\n        @media print {\n          :host([has-scrolling-region]) #wrapper #contentContainer {\n            overflow-y: visible;\n          }\n        }\n      </style>\n\n      <div id=\"wrapper\" class=\"initializing\">\n        <slot id=\"headerSlot\" name=\"header\"></slot>\n\n        <div id=\"contentContainer\"><slot></slot></div>\n        <slot id=\"fab\" name=\"fab\"></slot>\n      </div>\n    `;\n  }\n}\ncustomElements.define(\"ha-app-layout\", HaAppLayout);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\nimport '@polymer/paper-radio-button/paper-radio-button.js';\n\nimport {IronMenubarBehavior, IronMenubarBehaviorImpl} from '@polymer/iron-menu-behavior/iron-menubar-behavior.js';\nimport {IronSelectableBehavior} from '@polymer/iron-selector/iron-selectable.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\nMaterial design: [Radio\nbutton](https://www.google.com/design/spec/components/selection-controls.html#selection-controls-radio-button)\n\n`paper-radio-group` allows user to select at most one radio button from a set.\nChecking one radio button that belongs to a radio group unchecks any\npreviously checked radio button within the same group. Use\n`selected` to get or set the selected radio button.\n\nThe <paper-radio-buttons> inside the group must have the `name` attribute\nset.\n\nExample:\n\n    <paper-radio-group selected=\"small\">\n      <paper-radio-button name=\"small\">Small</paper-radio-button>\n      <paper-radio-button name=\"medium\">Medium</paper-radio-button>\n      <paper-radio-button name=\"large\">Large</paper-radio-button>\n    </paper-radio-group>\n\nRadio-button-groups can be made optional, and allow zero buttons to be selected:\n\n    <paper-radio-group selected=\"small\" allow-empty-selection>\n      <paper-radio-button name=\"small\">Small</paper-radio-button>\n      <paper-radio-button name=\"medium\">Medium</paper-radio-button>\n      <paper-radio-button name=\"large\">Large</paper-radio-button>\n    </paper-radio-group>\n\nSee <a href=\"paper-radio-button\">paper-radio-button</a> for more\ninformation about `paper-radio-button`.\n\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-radio-group-item-padding` | The padding of the item | `12px`\n\n@group Paper Elements\n@element paper-radio-group\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-block;\n      }\n\n      :host ::slotted(*) {\n        padding: var(--paper-radio-group-item-padding, 12px);\n      }\n    </style>\n\n    <slot></slot>\n`,\n\n  is: 'paper-radio-group',\n  behaviors: [IronMenubarBehavior],\n\n  /** @private */\n  hostAttributes: {\n    role: 'radiogroup',\n  },\n\n  properties: {\n    /**\n     * Fired when the radio group selection changes.\n     *\n     * @event paper-radio-group-changed\n     */\n\n    /**\n     * Overriden from Polymer.IronSelectableBehavior\n     */\n    attrForSelected: {type: String, value: 'name'},\n\n    /**\n     * Overriden from Polymer.IronSelectableBehavior\n     */\n    selectedAttribute: {type: String, value: 'checked'},\n\n    /**\n     * Overriden from Polymer.IronSelectableBehavior\n     */\n    selectable: {type: String, value: 'paper-radio-button'},\n\n    /**\n     * If true, radio-buttons can be deselected\n     */\n    allowEmptySelection: {type: Boolean, value: false}\n  },\n\n  /**\n   * Selects the given value.\n   */\n  select: function(value) {\n    var newItem = this._valueToItem(value);\n    if (newItem && newItem.hasAttribute('disabled')) {\n      return;\n    }\n\n    if (this.selected) {\n      var oldItem = this._valueToItem(this.selected);\n\n      if (this.selected == value) {\n        // If deselecting is allowed we'll have to apply an empty selection.\n        // Otherwise, we should force the selection to stay and make this\n        // action a no-op.\n        if (this.allowEmptySelection) {\n          value = '';\n        } else {\n          if (oldItem)\n            oldItem.checked = true;\n          return;\n        }\n      }\n\n      if (oldItem)\n        oldItem.checked = false;\n    }\n\n    IronSelectableBehavior.select.apply(this, [value]);\n    this.fire('paper-radio-group-changed');\n  },\n\n  _activateFocusedItem: function() {\n    this._itemActivate(this._valueForItem(this.focusedItem), this.focusedItem);\n  },\n\n  _onUpKey: function(event) {\n    this._focusPrevious();\n    event.preventDefault();\n    this._activateFocusedItem();\n  },\n\n  _onDownKey: function(event) {\n    this._focusNext();\n    event.preventDefault();\n    this._activateFocusedItem();\n  },\n\n  _onLeftKey: function(event) {\n    IronMenubarBehaviorImpl._onLeftKey.apply(this, arguments);\n    this._activateFocusedItem();\n  },\n\n  _onRightKey: function(event) {\n    IronMenubarBehaviorImpl._onRightKey.apply(this, arguments);\n    this._activateFocusedItem();\n  }\n});\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronScrollTargetBehavior} from '@polymer/iron-scroll-target-behavior/iron-scroll-target-behavior.js';\nimport {_scrollEffects} from '../helpers/helpers.js';\n\n/**\n * `Polymer.AppScrollEffectsBehavior` provides an interface that allows an\n * element to use scrolls effects.\n *\n * ### Importing the app-layout effects\n *\n * app-layout provides a set of scroll effects that can be used by explicitly\n * importing `app-scroll-effects.js`:\n *\n * ```js\n * import '@polymer/app-layout/app-scroll-effects/app-scroll-effects.js';\n * ```\n *\n * The scroll effects can also be used by individually importing\n * `@polymer/app-layout/app-scroll-effects/effects/[effectName].js`. For\n * example:\n *\n * ```js\n * import '@polymer/app-layout/app-scroll-effects/effects/waterfall.js';\n * ```\n *\n * ### Consuming effects\n *\n * Effects can be consumed via the `effects` property. For example:\n *\n * ```html\n * <app-header effects=\"waterfall\"></app-header>\n * ```\n *\n * ### Creating scroll effects\n *\n * You may want to create a custom scroll effect if you need to modify the CSS\n * of an element based on the scroll position.\n *\n * A scroll effect definition is an object with `setUp()`, `tearDown()` and\n * `run()` functions.\n *\n * To register the effect, you can use\n * `Polymer.AppLayout.registerEffect(effectName, effectDef)` For example, let's\n * define an effect that resizes the header's logo:\n *\n * ```js\n * Polymer.AppLayout.registerEffect('resizable-logo', {\n *   setUp: function(config) {\n *     // the effect's config is passed to the setUp.\n *     this._fxResizeLogo = { logo: Polymer.dom(this).querySelector('[logo]') };\n *   },\n *\n *   run: function(progress) {\n *      // the progress of the effect\n *      this.transform('scale3d(' + progress + ', '+ progress +', 1)',\n * this._fxResizeLogo.logo);\n *   },\n *\n *   tearDown: function() {\n *      // clean up and reset of states\n *      delete this._fxResizeLogo;\n *   }\n * });\n * ```\n * Now, you can consume the effect:\n *\n * ```html\n * <app-header id=\"appHeader\" effects=\"resizable-logo\">\n *   <img logo src=\"logo.svg\">\n * </app-header>\n * ```\n *\n * ### Imperative API\n *\n * ```js\n * var logoEffect = appHeader.createEffect('resizable-logo', effectConfig);\n * // run the effect: logoEffect.run(progress);\n * // tear down the effect: logoEffect.tearDown();\n * ```\n *\n * ### Configuring effects\n *\n * For effects installed via the `effects` property, their configuration can be\n * set via the `effectsConfig` property. For example:\n *\n * ```html\n * <app-header effects=\"waterfall\"\n *   effects-config='{\"waterfall\": {\"startsAt\": 0, \"endsAt\": 0.5}}'>\n * </app-header>\n * ```\n *\n * All effects have a `startsAt` and `endsAt` config property. They specify at\n * what point the effect should start and end. This value goes from 0 to 1\n * inclusive.\n *\n * @polymerBehavior\n */\nexport const AppScrollEffectsBehavior = [\n  IronScrollTargetBehavior,\n  {\n\n    properties: {\n\n      /**\n       * A space-separated list of the effects names that will be triggered when\n       * the user scrolls. e.g. `waterfall parallax-background` installs the\n       * `waterfall` and `parallax-background`.\n       */\n      effects: {type: String},\n\n      /**\n       * An object that configurates the effects installed via the `effects`\n       * property. e.g.\n       * ```js\n       *  element.effectsConfig = {\n       *   \"blend-background\": {\n       *     \"startsAt\": 0.5\n       *   }\n       * };\n       * ```\n       * Every effect has at least two config properties: `startsAt` and\n       * `endsAt`. These properties indicate when the event should start and end\n       * respectively and relative to the overall element progress. So for\n       * example, if `blend-background` starts at `0.5`, the effect will only\n       * start once the current element reaches 0.5 of its progress. In this\n       * context, the progress is a value in the range of `[0, 1]` that\n       * indicates where this element is on the screen relative to the viewport.\n       */\n      effectsConfig: {\n        type: Object,\n        value: function() {\n          return {};\n        }\n      },\n\n      /**\n       * Disables CSS transitions and scroll effects on the element.\n       */\n      disabled: {type: Boolean, reflectToAttribute: true, value: false},\n\n      /**\n       * Allows to set a `scrollTop` threshold. When greater than 0,\n       * `thresholdTriggered` is true only when the scroll target's `scrollTop`\n       * has reached this value.\n       *\n       * For example, if `threshold = 100`, `thresholdTriggered` is true when\n       * the `scrollTop` is at least `100`.\n       */\n      threshold: {type: Number, value: 0},\n\n      /**\n       * True if the `scrollTop` threshold (set in `scrollTopThreshold`) has\n       * been reached.\n       */\n      thresholdTriggered: {\n        type: Boolean,\n        notify: true,\n        readOnly: true,\n        reflectToAttribute: true\n      }\n    },\n\n    observers: ['_effectsChanged(effects, effectsConfig, isAttached)'],\n\n    /**\n     * Updates the scroll state. This method should be overridden\n     * by the consumer of this behavior.\n     *\n     * @method _updateScrollState\n     * @param {number} scrollTop\n     */\n    _updateScrollState: function(scrollTop) {},\n\n    /**\n     * Returns true if the current element is on the screen.\n     * That is, visible in the current viewport. This method should be\n     * overridden by the consumer of this behavior.\n     *\n     * @method isOnScreen\n     * @return {boolean}\n     */\n    isOnScreen: function() {\n      return false;\n    },\n\n    /**\n     * Returns true if there's content below the current element. This method\n     * should be overridden by the consumer of this behavior.\n     *\n     * @method isContentBelow\n     * @return {boolean}\n     */\n    isContentBelow: function() {\n      return false;\n    },\n\n    /**\n     * List of effects handlers that will take place during scroll.\n     *\n     * @type {Array<Function>}\n     */\n    _effectsRunFn: null,\n\n    /**\n     * List of the effects definitions installed via the `effects` property.\n     *\n     * @type {Array<Object>}\n     */\n    _effects: null,\n\n    /**\n     * The clamped value of `_scrollTop`.\n     * @type number\n     */\n    get _clampedScrollTop() {\n      return Math.max(0, this._scrollTop);\n    },\n\n    attached: function() {\n      this._scrollStateChanged();\n    },\n\n    detached: function() {\n      this._tearDownEffects();\n    },\n\n    /**\n     * Creates an effect object from an effect's name that can be used to run\n     * effects programmatically.\n     *\n     * @method createEffect\n     * @param {string} effectName The effect's name registered via `Polymer.AppLayout.registerEffect`.\n     * @param {Object=} effectConfig The effect config object. (Optional)\n     * @return {Object} An effect object with the following functions:\n     *\n     *  * `effect.setUp()`, Sets up the requirements for the effect.\n     *       This function is called automatically before the `effect` function\n     * returns.\n     *  * `effect.run(progress, y)`, Runs the effect given a `progress`.\n     *  * `effect.tearDown()`, Cleans up any DOM nodes or element references\n     * used by the effect.\n     *\n     * Example:\n     * ```js\n     * var parallax = element.createEffect('parallax-background');\n     * // runs the effect\n     * parallax.run(0.5, 0);\n     * ```\n     */\n    createEffect: function(effectName, effectConfig) {\n      var effectDef = _scrollEffects[effectName];\n      if (!effectDef) {\n        throw new ReferenceError(this._getUndefinedMsg(effectName));\n      }\n      var prop = this._boundEffect(effectDef, effectConfig || {});\n      prop.setUp();\n      return prop;\n    },\n\n    /**\n     * Called when `effects` or `effectsConfig` changes.\n     */\n    _effectsChanged: function(effects, effectsConfig, isAttached) {\n      this._tearDownEffects();\n\n      if (!effects || !isAttached) {\n        return;\n      }\n      effects.split(' ').forEach(function(effectName) {\n        var effectDef;\n        if (effectName !== '') {\n          if ((effectDef = _scrollEffects[effectName])) {\n            this._effects.push(\n                this._boundEffect(effectDef, effectsConfig[effectName]));\n          } else {\n            console.warn(this._getUndefinedMsg(effectName));\n          }\n        }\n      }, this);\n\n      this._setUpEffect();\n    },\n\n    /**\n     * Forces layout\n     */\n    _layoutIfDirty: function() {\n      return this.offsetWidth;\n    },\n\n    /**\n     * Returns an effect object bound to the current context.\n     *\n     * @param {Object} effectDef\n     * @param {Object=} effectsConfig The effect config object if the effect accepts config values. (Optional)\n     */\n    _boundEffect: function(effectDef, effectsConfig) {\n      effectsConfig = effectsConfig || {};\n      var startsAt = parseFloat(effectsConfig.startsAt || 0);\n      var endsAt = parseFloat(effectsConfig.endsAt || 1);\n      var deltaS = endsAt - startsAt;\n      var noop = function() {};\n      // fast path if possible\n      var runFn = (startsAt === 0 && endsAt === 1) ?\n          effectDef.run :\n          function(progress, y) {\n            effectDef.run.call(\n                this, Math.max(0, (progress - startsAt) / deltaS), y);\n          };\n      return {\n        setUp: effectDef.setUp ? effectDef.setUp.bind(this, effectsConfig) :\n                                 noop,\n        run: effectDef.run ? runFn.bind(this) : noop,\n        tearDown: effectDef.tearDown ? effectDef.tearDown.bind(this) : noop\n      };\n    },\n\n    /**\n     * Sets up the effects.\n     */\n    _setUpEffect: function() {\n      if (this.isAttached && this._effects) {\n        this._effectsRunFn = [];\n        this._effects.forEach(function(effectDef) {\n          // install the effect only if no error was reported\n          if (effectDef.setUp() !== false) {\n            this._effectsRunFn.push(effectDef.run);\n          }\n        }, this);\n      }\n    },\n\n    /**\n     * Tears down the effects.\n     */\n    _tearDownEffects: function() {\n      if (this._effects) {\n        this._effects.forEach(function(effectDef) {\n          effectDef.tearDown();\n        });\n      }\n      this._effectsRunFn = [];\n      this._effects = [];\n    },\n\n    /**\n     * Runs the effects.\n     *\n     * @param {number} p The progress\n     * @param {number} y The top position of the current element relative to the viewport.\n     */\n    _runEffects: function(p, y) {\n      if (this._effectsRunFn) {\n        this._effectsRunFn.forEach(function(run) {\n          run(p, y);\n        });\n      }\n    },\n\n    /**\n     * Overrides the `_scrollHandler`.\n     */\n    _scrollHandler: function() {\n      this._scrollStateChanged();\n    },\n\n    _scrollStateChanged: function() {\n      if (!this.disabled) {\n        var scrollTop = this._clampedScrollTop;\n        this._updateScrollState(scrollTop);\n        if (this.threshold > 0) {\n          this._setThresholdTriggered(scrollTop >= this.threshold);\n        }\n      }\n    },\n\n    /**\n     * Override this method to return a reference to a node in the local DOM.\n     * The node is consumed by a scroll effect.\n     *\n     * @param {string} id The id for the node.\n     */\n    _getDOMRef: function(id) {\n      console.warn('_getDOMRef', '`' + id + '` is undefined');\n    },\n\n    _getUndefinedMsg: function(effectName) {\n      return 'Scroll effect `' + effectName + '` is undefined. ' +\n          'Did you forget to import app-layout/app-scroll-effects/effects/' +\n          effectName + '.html ?';\n    }\n\n  }\n];\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nexport const _scrollEffects = {};\nexport let _scrollTimer = null;\n\nexport const scrollTimingFunction = function easeOutQuad(t, b, c, d) {\n  t /= d;\n  return -c * t * (t - 2) + b;\n};\n\n/**\n * Registers a scroll effect to be used in elements that implement the\n * `Polymer.AppScrollEffectsBehavior` behavior.\n *\n * @param {string} effectName The effect name.\n * @param {Object} effectDef The effect definition.\n */\nexport const registerEffect = function registerEffect(effectName, effectDef) {\n  if (_scrollEffects[effectName] != null) {\n    throw new Error('effect `' + effectName + '` is already registered.');\n  }\n  _scrollEffects[effectName] = effectDef;\n};\n\nexport const queryAllRoot = function(selector, root) {\n  var queue = [root];\n  var matches = [];\n\n  while (queue.length > 0) {\n    var node = queue.shift();\n    matches.push.apply(matches, node.querySelectorAll(selector));\n    for (var i = 0; node.children[i]; i++) {\n      if (node.children[i].shadowRoot) {\n        queue.push(node.children[i].shadowRoot);\n      }\n    }\n  }\n  return matches;\n};\n\n/**\n * Scrolls to a particular set of coordinates in a scroll target.\n * If the scroll target is not defined, then it would use the main document as\n * the target.\n *\n * To scroll in a smooth fashion, you can set the option `behavior: 'smooth'`.\n * e.g.\n *\n * ```js\n * Polymer.AppLayout.scroll({top: 0, behavior: 'smooth'});\n * ```\n *\n * To scroll in a silent mode, without notifying scroll changes to any\n * app-layout elements, you can set the option `behavior: 'silent'`. This is\n * particularly useful we you are using `app-header` and you desire to scroll to\n * the top of a scrolling region without running scroll effects. e.g.\n *\n * ```js\n * Polymer.AppLayout.scroll({top: 0, behavior: 'silent'});\n * ```\n *\n * @param {Object} options {top: Number, left: Number, behavior: String(smooth | silent)}\n */\nexport const scroll = function scroll(options) {\n  options = options || {};\n\n  var docEl = document.documentElement;\n  var target = options.target || docEl;\n  var hasNativeScrollBehavior =\n      'scrollBehavior' in target.style && target.scroll;\n  var scrollClassName = 'app-layout-silent-scroll';\n  var scrollTop = options.top || 0;\n  var scrollLeft = options.left || 0;\n  var scrollTo = target === docEl ? window.scrollTo :\n                                    function scrollTo(scrollLeft, scrollTop) {\n                                      target.scrollLeft = scrollLeft;\n                                      target.scrollTop = scrollTop;\n                                    };\n\n  if (options.behavior === 'smooth') {\n    if (hasNativeScrollBehavior) {\n      target.scroll(options);\n\n    } else {\n      var timingFn = scrollTimingFunction;\n      var startTime = Date.now();\n      var currentScrollTop =\n          target === docEl ? window.pageYOffset : target.scrollTop;\n      var currentScrollLeft =\n          target === docEl ? window.pageXOffset : target.scrollLeft;\n      var deltaScrollTop = scrollTop - currentScrollTop;\n      var deltaScrollLeft = scrollLeft - currentScrollLeft;\n      var duration = 300;\n      var updateFrame =\n          (function updateFrame() {\n            var now = Date.now();\n            var elapsedTime = now - startTime;\n\n            if (elapsedTime < duration) {\n              scrollTo(\n                  timingFn(\n                      elapsedTime,\n                      currentScrollLeft,\n                      deltaScrollLeft,\n                      duration),\n                  timingFn(\n                      elapsedTime, currentScrollTop, deltaScrollTop, duration));\n              requestAnimationFrame(updateFrame);\n            } else {\n              scrollTo(scrollLeft, scrollTop);\n            }\n          }).bind(this);\n\n      updateFrame();\n    }\n\n  } else if (options.behavior === 'silent') {\n    var headers = queryAllRoot('app-header', document.body);\n\n    headers.forEach(function(header) {\n      header.setAttribute('silent-scroll', '');\n    });\n\n    // Browsers keep the scroll momentum even if the bottom of the scrolling\n    // content was reached. This means that calling scroll({top: 0, behavior:\n    // 'silent'}) when the momentum is still going will result in more scroll\n    // events and thus scroll effects. This seems to only apply when using\n    // document scrolling. Therefore, when should we remove the class from the\n    // document element?\n\n    if (_scrollTimer) {\n      window.cancelAnimationFrame(_scrollTimer);\n    }\n\n    _scrollTimer = window.requestAnimationFrame(function() {\n      headers.forEach(function(header) {\n        header.removeAttribute('silent-scroll');\n      });\n      _scrollTimer = null;\n    });\n\n    scrollTo(scrollLeft, scrollTop);\n\n  } else {\n    scrollTo(scrollLeft, scrollTop);\n  }\n};\n","import \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-item/paper-item\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport \"@vaadin/vaadin-combo-box/vaadin-combo-box-light\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\nclass HaComboBox extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        paper-input > paper-icon-button {\n          width: 24px;\n          height: 24px;\n          padding: 2px;\n          color: var(--secondary-text-color);\n        }\n        [hidden] {\n          display: none;\n        }\n      </style>\n      <vaadin-combo-box-light\n        items=\"[[_items]]\"\n        item-value-path=\"[[itemValuePath]]\"\n        item-label-path=\"[[itemLabelPath]]\"\n        value=\"{{value}}\"\n        opened=\"{{opened}}\"\n        allow-custom-value=\"[[allowCustomValue]]\"\n        on-change=\"_fireChanged\"\n      >\n        <paper-input\n          autofocus=\"[[autofocus]]\"\n          label=\"[[label]]\"\n          class=\"input\"\n          value=\"[[value]]\"\n        >\n          <paper-icon-button\n            slot=\"suffix\"\n            class=\"clear-button\"\n            icon=\"hass:close\"\n            hidden$=\"[[!value]]\"\n            >Clear</paper-icon-button\n          >\n          <paper-icon-button\n            slot=\"suffix\"\n            class=\"toggle-button\"\n            icon=\"[[_computeToggleIcon(opened)]]\"\n            hidden$=\"[[!items.length]]\"\n            >Toggle</paper-icon-button\n          >\n        </paper-input>\n        <template>\n          <style>\n            paper-item {\n              margin: -5px -10px;\n              padding: 0;\n            }\n          </style>\n          <paper-item>[[_computeItemLabel(item, itemLabelPath)]]</paper-item>\n        </template>\n      </vaadin-combo-box-light>\n    `;\n  }\n\n  static get properties() {\n    return {\n      allowCustomValue: Boolean,\n      items: {\n        type: Object,\n        observer: \"_itemsChanged\",\n      },\n      _items: Object,\n      itemLabelPath: String,\n      itemValuePath: String,\n      autofocus: Boolean,\n      label: String,\n      opened: {\n        type: Boolean,\n        value: false,\n        observer: \"_openedChanged\",\n      },\n      value: {\n        type: String,\n        notify: true,\n      },\n    };\n  }\n\n  _openedChanged(newVal) {\n    if (!newVal) {\n      this._items = this.items;\n    }\n  }\n\n  _itemsChanged(newVal) {\n    if (!this.opened) {\n      this._items = newVal;\n    }\n  }\n\n  _computeToggleIcon(opened) {\n    return opened ? \"hass:menu-up\" : \"hass:menu-down\";\n  }\n\n  _computeItemLabel(item, itemLabelPath) {\n    return itemLabelPath ? item[itemLabelPath] : item;\n  }\n\n  _fireChanged(ev) {\n    ev.stopPropagation();\n    this.fire(\"change\");\n  }\n}\n\ncustomElements.define(\"ha-combo-box\", HaComboBox);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"./ha-combo-box\";\n\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaServicePicker extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <ha-combo-box\n        label=\"[[localize('ui.components.service-picker.service')]]\"\n        items=\"[[_services]]\"\n        value=\"{{value}}\"\n        allow-custom-value=\"\"\n      ></ha-combo-box>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: \"_hassChanged\",\n      },\n      _services: Array,\n      value: {\n        type: String,\n        notify: true,\n      },\n    };\n  }\n\n  _hassChanged(hass, oldHass) {\n    if (!hass) {\n      this._services = [];\n      return;\n    }\n    if (oldHass && hass.services === oldHass.services) {\n      return;\n    }\n    const result = [];\n\n    Object.keys(hass.services)\n      .sort()\n      .forEach((domain) => {\n        const services = Object.keys(hass.services[domain]).sort();\n\n        for (let i = 0; i < services.length; i++) {\n          result.push(`${domain}.${services[i]}`);\n        }\n      });\n\n    this._services = result;\n  }\n}\n\ncustomElements.define(\"ha-service-picker\", HaServicePicker);\n","import { h, Component } from \"preact\";\nimport \"../../../components/ha-textarea\";\n\nexport default class JSONTextArea extends Component {\n  constructor(props) {\n    super(props);\n    this.state.isValid = true;\n    this.state.value = JSON.stringify(props.value || {}, null, 2);\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(ev) {\n    const value = ev.target.value;\n    let parsed;\n    let isValid;\n\n    try {\n      parsed = JSON.parse(value);\n      isValid = true;\n    } catch (err) {\n      // Invalid JSON\n      isValid = false;\n    }\n\n    this.setState({\n      value,\n      isValid,\n    });\n    if (isValid) {\n      this.props.onChange(parsed);\n    }\n  }\n\n  componentWillReceiveProps({ value }) {\n    if (value === this.props.value) return;\n    this.setState({\n      value: JSON.stringify(value, null, 2),\n      isValid: true,\n    });\n  }\n\n  render({ label }, { value, isValid }) {\n    const style = {\n      minWidth: 300,\n      width: \"100%\",\n    };\n    if (!isValid) {\n      style.border = \"1px solid red\";\n    }\n    return (\n      <ha-textarea\n        label={label}\n        value={value}\n        style={style}\n        onvalue-changed={this.onChange}\n        dir=\"ltr\"\n      />\n    );\n  }\n}\n","import { h, Component } from \"preact\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"../../../../components/entity/ha-entity-picker\";\n\nimport { onChangeEvent } from \"../../../../common/preact/event\";\n\nexport default class StateCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, \"condition\");\n    this.entityPicked = this.entityPicked.bind(this);\n  }\n\n  entityPicked(ev) {\n    this.props.onChange(\n      this.props.index,\n      Object.assign({}, this.props.condition, { entity_id: ev.target.value })\n    );\n  }\n\n  /* eslint-disable camelcase */\n  render({ condition, hass, localize }) {\n    const { entity_id, state } = condition;\n    const cndFor = condition.for;\n    return (\n      <div>\n        <ha-entity-picker\n          value={entity_id}\n          onChange={this.entityPicked}\n          hass={hass}\n          allowCustomEntity\n        />\n        <paper-input\n          label={localize(\n            \"ui.panel.config.automation.editor.conditions.type.state.state\"\n          )}\n          name=\"state\"\n          value={state}\n          onvalue-changed={this.onChange}\n        />\n        {cndFor && <pre>For: {JSON.stringify(cndFor, null, 2)}</pre>}\n      </div>\n    );\n  }\n}\n\nStateCondition.defaultConfig = {\n  entity_id: \"\",\n  state: \"\",\n};\n","import { HassEntity } from \"home-assistant-js-websocket\";\n\nexport default function hasLocation(stateObj: HassEntity) {\n  return (\n    \"latitude\" in stateObj.attributes && \"longitude\" in stateObj.attributes\n  );\n}\n","import { h, Component } from \"preact\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"../../../../components/ha-textarea\";\nimport \"../../../../components/entity/ha-entity-picker\";\n\nimport { onChangeEvent } from \"../../../../common/preact/event\";\n\nexport default class NumericStateCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, \"condition\");\n    this.entityPicked = this.entityPicked.bind(this);\n  }\n\n  entityPicked(ev) {\n    this.props.onChange(\n      this.props.index,\n      Object.assign({}, this.props.condition, { entity_id: ev.target.value })\n    );\n  }\n\n  /* eslint-disable camelcase */\n  render({ condition, hass, localize }) {\n    const { value_template, entity_id, below, above } = condition;\n    return (\n      <div>\n        <ha-entity-picker\n          value={entity_id}\n          onChange={this.entityPicked}\n          hass={hass}\n          allowCustomEntity\n        />\n        <paper-input\n          label={localize(\n            \"ui.panel.config.automation.editor.conditions.type.numeric_state.above\"\n          )}\n          name=\"above\"\n          value={above}\n          onvalue-changed={this.onChange}\n        />\n        <paper-input\n          label={localize(\n            \"ui.panel.config.automation.editor.conditions.type.numeric_state.below\"\n          )}\n          name=\"below\"\n          value={below}\n          onvalue-changed={this.onChange}\n        />\n        <ha-textarea\n          label={localize(\n            \"ui.panel.config.automation.editor.conditions.type.numeric_state.value_template\"\n          )}\n          name=\"value_template\"\n          value={value_template}\n          onvalue-changed={this.onChange}\n          dir=\"ltr\"\n        />\n      </div>\n    );\n  }\n}\n\nNumericStateCondition.defaultConfig = {\n  entity_id: \"\",\n};\n","import { h, Component } from \"preact\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-radio-button/paper-radio-button\";\nimport \"@polymer/paper-radio-group/paper-radio-group\";\n\nimport { onChangeEvent } from \"../../../../common/preact/event\";\n\nexport default class SunCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, \"condition\");\n    this.afterPicked = this.radioGroupPicked.bind(this, \"after\");\n    this.beforePicked = this.radioGroupPicked.bind(this, \"before\");\n  }\n\n  radioGroupPicked(key, ev) {\n    const condition = Object.assign({}, this.props.condition);\n\n    if (ev.target.selected) {\n      condition[key] = ev.target.selected;\n    } else {\n      delete condition[key];\n    }\n\n    this.props.onChange(this.props.index, condition);\n  }\n\n  render({ condition, localize }) {\n    /* eslint-disable camelcase */\n    const { after, after_offset, before, before_offset } = condition;\n    return (\n      <div>\n        <label id=\"beforelabel\">\n          {localize(\n            \"ui.panel.config.automation.editor.conditions.type.sun.before\"\n          )}\n        </label>\n        <paper-radio-group\n          allow-empty-selection\n          selected={before}\n          aria-labelledby=\"beforelabel\"\n          onpaper-radio-group-changed={this.beforePicked}\n        >\n          <paper-radio-button name=\"sunrise\">\n            {localize(\n              \"ui.panel.config.automation.editor.conditions.type.sun.sunrise\"\n            )}\n          </paper-radio-button>\n          <paper-radio-button name=\"sunset\">\n            {localize(\n              \"ui.panel.config.automation.editor.conditions.type.sun.sunset\"\n            )}\n          </paper-radio-button>\n        </paper-radio-group>\n\n        <paper-input\n          label={localize(\n            \"ui.panel.config.automation.editor.conditions.type.sun.before_offset\"\n          )}\n          name=\"before_offset\"\n          value={before_offset}\n          onvalue-changed={this.onChange}\n          disabled={before === undefined}\n        />\n\n        <label id=\"afterlabel\">\n          {localize(\n            \"ui.panel.config.automation.editor.conditions.type.sun.after\"\n          )}\n        </label>\n        <paper-radio-group\n          allow-empty-selection\n          selected={after}\n          aria-labelledby=\"afterlabel\"\n          onpaper-radio-group-changed={this.afterPicked}\n        >\n          <paper-radio-button name=\"sunrise\">\n            {localize(\n              \"ui.panel.config.automation.editor.conditions.type.sun.sunrise\"\n            )}\n          </paper-radio-button>\n          <paper-radio-button name=\"sunset\">\n            {localize(\n              \"ui.panel.config.automation.editor.conditions.type.sun.sunset\"\n            )}\n          </paper-radio-button>\n        </paper-radio-group>\n\n        <paper-input\n          label={localize(\n            \"ui.panel.config.automation.editor.conditions.type.sun.after_offset\"\n          )}\n          name=\"after_offset\"\n          value={after_offset}\n          onvalue-changed={this.onChange}\n          disabled={after === undefined}\n        />\n      </div>\n    );\n  }\n}\n\nSunCondition.defaultConfig = {};\n","import { h, Component } from \"preact\";\nimport \"../../../../components/ha-textarea\";\n\nimport { onChangeEvent } from \"../../../../common/preact/event\";\n\nexport default class TemplateCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, \"condition\");\n  }\n\n  render({ condition, localize }) {\n    /* eslint-disable camelcase */\n    const { value_template } = condition;\n    return (\n      <div>\n        <ha-textarea\n          label={localize(\n            \"ui.panel.config.automation.editor.conditions.type.template.value_template\"\n          )}\n          name=\"value_template\"\n          value={value_template}\n          onvalue-changed={this.onChange}\n          dir=\"ltr\"\n        />\n      </div>\n    );\n  }\n}\n\nTemplateCondition.defaultConfig = {\n  value_template: \"\",\n};\n","import { h, Component } from \"preact\";\nimport \"@polymer/paper-input/paper-input\";\n\nimport { onChangeEvent } from \"../../../../common/preact/event\";\n\nexport default class TimeCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, \"condition\");\n  }\n\n  /* eslint-disable camelcase */\n  render({ condition, localize }) {\n    const { after, before } = condition;\n    return (\n      <div>\n        <paper-input\n          label={localize(\n            \"ui.panel.config.automation.editor.conditions.type.time.after\"\n          )}\n          name=\"after\"\n          value={after}\n          onvalue-changed={this.onChange}\n        />\n        <paper-input\n          label={localize(\n            \"ui.panel.config.automation.editor.conditions.type.time.before\"\n          )}\n          name=\"before\"\n          value={before}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nTimeCondition.defaultConfig = {};\n","import { h, Component } from \"preact\";\nimport \"../../../../components/entity/ha-entity-picker\";\nimport { onChangeEvent } from \"../../../../common/preact/event\";\nimport hasLocation from \"../../../../common/entity/has_location\";\nimport computeStateDomain from \"../../../../common/entity/compute_state_domain\";\n\nfunction zoneAndLocationFilter(stateObj) {\n  return hasLocation(stateObj) && computeStateDomain(stateObj) !== \"zone\";\n}\n\nexport default class ZoneCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, \"condition\");\n    this.entityPicked = this.entityPicked.bind(this);\n    this.zonePicked = this.zonePicked.bind(this);\n  }\n\n  entityPicked(ev) {\n    this.props.onChange(\n      this.props.index,\n      Object.assign({}, this.props.condition, { entity_id: ev.target.value })\n    );\n  }\n\n  zonePicked(ev) {\n    this.props.onChange(\n      this.props.index,\n      Object.assign({}, this.props.condition, { zone: ev.target.value })\n    );\n  }\n\n  /* eslint-disable camelcase */\n  render({ condition, hass, localize }) {\n    const { entity_id, zone } = condition;\n    return (\n      <div>\n        <ha-entity-picker\n          label={localize(\n            \"ui.panel.config.automation.editor.conditions.type.zone.entity\"\n          )}\n          value={entity_id}\n          onChange={this.entityPicked}\n          hass={hass}\n          allowCustomEntity\n          entityFilter={zoneAndLocationFilter}\n        />\n        <ha-entity-picker\n          label={localize(\n            \"ui.panel.config.automation.editor.conditions.type.zone.zone\"\n          )}\n          value={zone}\n          onChange={this.zonePicked}\n          hass={hass}\n          allowCustomEntity\n          domainFilter=\"zone\"\n        />\n      </div>\n    );\n  }\n}\n\nZoneCondition.defaultConfig = {\n  entity_id: \"\",\n  zone: \"\",\n};\n","import { h, Component } from \"preact\";\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu-light\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-item/paper-item\";\n\nimport NumericStateCondition from \"./numeric_state\";\nimport StateCondition from \"./state\";\nimport SunCondition from \"./sun\";\nimport TemplateCondition from \"./template\";\nimport TimeCondition from \"./time\";\nimport ZoneCondition from \"./zone\";\n\nconst TYPES = {\n  state: StateCondition,\n  numeric_state: NumericStateCondition,\n  sun: SunCondition,\n  template: TemplateCondition,\n  time: TimeCondition,\n  zone: ZoneCondition,\n};\n\nconst OPTIONS = Object.keys(TYPES).sort();\n\nexport default class ConditionRow extends Component {\n  constructor() {\n    super();\n\n    this.typeChanged = this.typeChanged.bind(this);\n  }\n\n  typeChanged(ev) {\n    const type = ev.target.selectedItem.attributes.condition.value;\n\n    if (type !== this.props.condition.condition) {\n      this.props.onChange(\n        this.props.index,\n        Object.assign({ condition: type }, TYPES[type].defaultConfig)\n      );\n    }\n  }\n\n  render({ index, condition, onChange, hass, localize }) {\n    const Comp = TYPES[condition.condition];\n    const selected = OPTIONS.indexOf(condition.condition);\n\n    if (!Comp) {\n      return (\n        <div>\n          {localize(\n            \"ui.panel.config.automation.editor.conditions.unsupported_condition\",\n            \"condition\",\n            condition.condition\n          )}\n          <pre>{JSON.stringify(condition, null, 2)}</pre>\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <paper-dropdown-menu-light\n          label={localize(\n            \"ui.panel.config.automation.editor.conditions.type_select\"\n          )}\n          no-animations\n        >\n          <paper-listbox\n            slot=\"dropdown-content\"\n            selected={selected}\n            oniron-select={this.typeChanged}\n          >\n            {OPTIONS.map((opt) => (\n              <paper-item condition={opt}>\n                {localize(\n                  `ui.panel.config.automation.editor.conditions.type.${opt}.label`\n                )}\n              </paper-item>\n            ))}\n          </paper-listbox>\n        </paper-dropdown-menu-light>\n        <Comp\n          index={index}\n          condition={condition}\n          onChange={onChange}\n          hass={hass}\n          localize={localize}\n        />\n      </div>\n    );\n  }\n}\n","import { render } from \"preact\";\n\nexport default function unmount(mountEl) {\n  render(\n    // @ts-ignore\n    () => null,\n    mountEl\n  );\n}\n","import { h, Component } from \"preact\";\nimport \"../../../../components/ha-service-picker\";\n\nimport JSONTextArea from \"../json_textarea\";\n\nexport default class CallServiceAction extends Component {\n  constructor() {\n    super();\n\n    this.serviceChanged = this.serviceChanged.bind(this);\n    this.serviceDataChanged = this.serviceDataChanged.bind(this);\n  }\n\n  serviceChanged(ev) {\n    this.props.onChange(\n      this.props.index,\n      Object.assign({}, this.props.action, { service: ev.target.value })\n    );\n  }\n\n  serviceDataChanged(data) {\n    this.props.onChange(\n      this.props.index,\n      Object.assign({}, this.props.action, { data })\n    );\n  }\n\n  render({ action, hass, localize }) {\n    const { service, data } = action;\n\n    return (\n      <div>\n        <ha-service-picker\n          hass={hass}\n          value={service}\n          onChange={this.serviceChanged}\n        />\n        <JSONTextArea\n          label={localize(\n            \"ui.panel.config.automation.editor.actions.type.service.service_data\"\n          )}\n          value={data}\n          onChange={this.serviceDataChanged}\n        />\n      </div>\n    );\n  }\n}\n\nCallServiceAction.defaultConfig = {\n  alias: \"\",\n  service: \"\",\n  data: {},\n};\n","import { h, Component } from \"preact\";\n\nimport StateCondition from \"../condition/state\";\nimport ConditionEdit from \"../condition/condition_edit\";\n\nexport default class ConditionAction extends Component {\n  // eslint-disable-next-line\n  render({ action, index, onChange, hass, localize }) {\n    return (\n      <ConditionEdit\n        condition={action}\n        onChange={onChange}\n        index={index}\n        hass={hass}\n        localize={localize}\n      />\n    );\n  }\n}\n\nConditionAction.defaultConfig = Object.assign(\n  { condition: \"state\" },\n  StateCondition.defaultConfig\n);\n","import { h, Component } from \"preact\";\nimport \"@polymer/paper-input/paper-input\";\nimport { onChangeEvent } from \"../../../../common/preact/event\";\n\nexport default class DelayAction extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, \"action\");\n  }\n\n  render({ action, localize }) {\n    const { delay } = action;\n    return (\n      <div>\n        <paper-input\n          label={localize(\n            \"ui.panel.config.automation.editor.actions.type.delay.delay\"\n          )}\n          name=\"delay\"\n          value={delay}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nDelayAction.defaultConfig = {\n  delay: \"\",\n};\n","import { h, Component } from \"preact\";\nimport \"@polymer/paper-input/paper-input\";\n\nimport \"../../../../components/ha-textarea\";\n\nimport { onChangeEvent } from \"../../../../common/preact/event\";\n\nexport default class WaitAction extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, \"action\");\n    this.onTemplateChange = this.onTemplateChange.bind(this);\n  }\n\n  // Gets fired on mount. If empty, onChangeEvent removes attribute.\n  // Without the attribute this action is no longer matched to this component.\n  onTemplateChange(ev) {\n    this.props.onChange(\n      this.props.index,\n      Object.assign({}, this.props.action, {\n        [ev.target.getAttribute(\"name\")]: ev.target.value,\n      })\n    );\n  }\n\n  render({ action, localize }) {\n    /* eslint-disable camelcase */\n    const { wait_template, timeout } = action;\n    return (\n      <div>\n        <ha-textarea\n          label={localize(\n            \"ui.panel.config.automation.editor.actions.type.wait_template.wait_template\"\n          )}\n          name=\"wait_template\"\n          value={wait_template}\n          onvalue-changed={this.onTemplateChange}\n          dir=\"ltr\"\n        />\n        <paper-input\n          label={localize(\n            \"ui.panel.config.automation.editor.actions.type.wait_template.timeout\"\n          )}\n          name=\"timeout\"\n          value={timeout}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nWaitAction.defaultConfig = {\n  wait_template: \"\",\n  timeout: \"\",\n};\n","import { h, Component } from \"preact\";\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu-light\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-item/paper-item\";\n\nimport CallServiceAction from \"./call_service\";\nimport ConditionAction from \"./condition\";\nimport DelayAction from \"./delay\";\nimport EventAction from \"./event\";\nimport WaitAction from \"./wait\";\n\nconst TYPES = {\n  service: CallServiceAction,\n  delay: DelayAction,\n  wait_template: WaitAction,\n  condition: ConditionAction,\n  event: EventAction,\n};\n\nconst OPTIONS = Object.keys(TYPES).sort();\n\nfunction getType(action) {\n  const keys = Object.keys(TYPES);\n  for (let i = 0; i < keys.length; i++) {\n    if (keys[i] in action) {\n      return keys[i];\n    }\n  }\n  return null;\n}\n\nexport default class Action extends Component {\n  constructor() {\n    super();\n\n    this.typeChanged = this.typeChanged.bind(this);\n  }\n\n  typeChanged(ev) {\n    const newType = ev.target.selectedItem.attributes.action.value;\n    const oldType = getType(this.props.action);\n\n    if (oldType !== newType) {\n      this.props.onChange(this.props.index, TYPES[newType].defaultConfig);\n    }\n  }\n\n  render({ index, action, onChange, hass, localize }) {\n    const type = getType(action);\n    const Comp = type && TYPES[type];\n    const selected = OPTIONS.indexOf(type);\n\n    if (!Comp) {\n      return (\n        <div>\n          {localize(\n            \"ui.panel.config.automation.editor.actions.unsupported_action\",\n            \"action\",\n            type\n          )}\n          <pre>{JSON.stringify(action, null, 2)}</pre>\n        </div>\n      );\n    }\n    return (\n      <div>\n        <paper-dropdown-menu-light\n          label={localize(\n            \"ui.panel.config.automation.editor.actions.type_select\"\n          )}\n          no-animations\n        >\n          <paper-listbox\n            slot=\"dropdown-content\"\n            selected={selected}\n            oniron-select={this.typeChanged}\n          >\n            {OPTIONS.map((opt) => (\n              <paper-item action={opt}>\n                {localize(\n                  `ui.panel.config.automation.editor.actions.type.${opt}.label`\n                )}\n              </paper-item>\n            ))}\n          </paper-listbox>\n        </paper-dropdown-menu-light>\n        <Comp\n          index={index}\n          action={action}\n          onChange={onChange}\n          hass={hass}\n          localize={localize}\n        />\n      </div>\n    );\n  }\n}\n","import { h, Component } from \"preact\";\nimport \"@polymer/paper-input/paper-input\";\n\nimport JSONTextArea from \"../json_textarea\";\nimport { onChangeEvent } from \"../../../../common/preact/event\";\nimport { LocalizeFunc } from \"../../../../common/translations/localize\";\nimport { EventAction } from \"../../../../data/script\";\n\ninterface Props {\n  index: number;\n  action: EventAction;\n  localize: LocalizeFunc;\n  onChange: (index: number, action: EventAction) => void;\n}\n\nexport default class EventActionForm extends Component<Props> {\n  private onChange: (event: Event) => void;\n\n  static get defaultConfig(): EventAction {\n    return {\n      event: \"\",\n      event_data: {},\n    };\n  }\n\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, \"action\");\n    this.serviceDataChanged = this.serviceDataChanged.bind(this);\n  }\n\n  public render() {\n    const {\n      action: { event, event_data },\n      localize,\n    } = this.props;\n    return (\n      <div>\n        <paper-input\n          label={localize(\n            \"ui.panel.config.automation.editor.actions.type.event.event\"\n          )}\n          name=\"event\"\n          value={event}\n          onvalue-changed={this.onChange}\n        />\n        <JSONTextArea\n          label={localize(\n            \"ui.panel.config.automation.editor.actions.type.event.service_data\"\n          )}\n          value={event_data}\n          onChange={this.serviceDataChanged}\n        />\n      </div>\n    );\n  }\n\n  private serviceDataChanged(eventData) {\n    this.props.onChange(this.props.index, {\n      ...this.props.action,\n      event_data: eventData,\n    });\n  }\n}\n","import { h, Component } from \"preact\";\nimport \"@polymer/paper-menu-button/paper-menu-button\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"../../../../components/ha-card\";\n\nimport ActionEdit from \"./action_edit\";\n\nexport default class Action extends Component {\n  constructor() {\n    super();\n\n    this.onDelete = this.onDelete.bind(this);\n  }\n\n  onDelete() {\n    // eslint-disable-next-line\n    if (\n      confirm(\n        this.props.localize(\n          \"ui.panel.config.automation.editor.actions.delete_confirm\"\n        )\n      )\n    ) {\n      this.props.onChange(this.props.index, null);\n    }\n  }\n\n  render(props) {\n    return (\n      <ha-card>\n        <div class=\"card-content\">\n          <div class=\"card-menu\">\n            <paper-menu-button\n              no-animations\n              horizontal-align=\"right\"\n              horizontal-offset=\"-5\"\n              vertical-offset=\"-5\"\n            >\n              <paper-icon-button\n                icon=\"hass:dots-vertical\"\n                slot=\"dropdown-trigger\"\n              />\n              <paper-listbox slot=\"dropdown-content\">\n                <paper-item disabled>\n                  {props.localize(\n                    \"ui.panel.config.automation.editor.actions.duplicate\"\n                  )}\n                </paper-item>\n                <paper-item onTap={this.onDelete}>\n                  {props.localize(\n                    \"ui.panel.config.automation.editor.actions.delete\"\n                  )}\n                </paper-item>\n              </paper-listbox>\n            </paper-menu-button>\n          </div>\n          <ActionEdit {...props} />\n        </div>\n      </ha-card>\n    );\n  }\n}\n","import { h, Component } from \"preact\";\nimport \"@material/mwc-button\";\nimport \"../../../../components/ha-card\";\n\nimport ActionRow from \"./action_row\";\n\nexport default class Script extends Component {\n  constructor() {\n    super();\n\n    this.addAction = this.addAction.bind(this);\n    this.actionChanged = this.actionChanged.bind(this);\n  }\n\n  addAction() {\n    const script = this.props.script.concat({\n      service: \"\",\n    });\n\n    this.props.onChange(script);\n  }\n\n  actionChanged(index, newValue) {\n    const script = this.props.script.concat();\n\n    if (newValue === null) {\n      script.splice(index, 1);\n    } else {\n      script[index] = newValue;\n    }\n\n    this.props.onChange(script);\n  }\n\n  render({ script, hass, localize }) {\n    return (\n      <div class=\"script\">\n        {script.map((act, idx) => (\n          <ActionRow\n            index={idx}\n            action={act}\n            onChange={this.actionChanged}\n            hass={hass}\n            localize={localize}\n          />\n        ))}\n        <ha-card>\n          <div class=\"card-actions add-card\">\n            <mwc-button onTap={this.addAction}>\n              {localize(\"ui.panel.config.automation.editor.actions.add\")}\n            </mwc-button>\n          </div>\n        </ha-card>\n      </div>\n    );\n  }\n}\n","import { h, Component } from \"preact\";\n\nimport \"@polymer/paper-input/paper-input\";\nimport \"../ha-config-section\";\nimport \"../../../components/ha-card\";\n\nimport Script from \"./script/index\";\n\nexport default class ScriptEditor extends Component {\n  constructor() {\n    super();\n\n    this.onChange = this.onChange.bind(this);\n    this.sequenceChanged = this.sequenceChanged.bind(this);\n  }\n\n  onChange(ev) {\n    this.props.onChange(\n      Object.assign({}, this.props.script, {\n        [ev.target.name]: ev.target.value,\n      })\n    );\n  }\n\n  sequenceChanged(sequence) {\n    this.props.onChange(Object.assign({}, this.props.script, { sequence }));\n  }\n\n  render({ script, isWide, hass, localize }) {\n    const { alias, sequence } = script;\n\n    return (\n      <div>\n        <ha-config-section is-wide={isWide}>\n          <span slot=\"header\">{alias}</span>\n          <span slot=\"introduction\">\n            Use scripts to execute a sequence of actions.\n          </span>\n          <ha-card>\n            <div class=\"card-content\">\n              <paper-input\n                label=\"Name\"\n                name=\"alias\"\n                value={alias}\n                onvalue-changed={this.onChange}\n              />\n            </div>\n          </ha-card>\n        </ha-config-section>\n\n        <ha-config-section is-wide={isWide}>\n          <span slot=\"header\">Sequence</span>\n          <span slot=\"introduction\">\n            The sequence of actions of this script.\n            <p>\n              <a href=\"https://home-assistant.io/docs/scripts/\" target=\"_blank\">\n                Learn more about available actions.\n              </a>\n            </p>\n          </span>\n          <Script\n            script={sequence}\n            onChange={this.sequenceChanged}\n            hass={hass}\n            localize={localize}\n          />\n        </ha-config-section>\n      </div>\n    );\n  }\n}\n","import { HomeAssistant } from \"../types\";\nimport computeObjectId from \"../common/entity/compute_object_id\";\n\nexport interface EventAction {\n  event: string;\n  event_data?: { [key: string]: any };\n  event_data_template?: { [key: string]: any };\n}\n\nexport const triggerScript = (\n  hass: HomeAssistant,\n  entityId: string,\n  variables?: {}\n) => hass.callService(\"script\", computeObjectId(entityId), variables);\n\nexport const deleteScript = (hass: HomeAssistant, objectId: string) =>\n  hass.callApi(\"DELETE\", `config/script/config/${objectId}`);\n","import \"@polymer/app-layout/app-header/app-header\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-fab/paper-fab\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport { h, render } from \"preact\";\n\nimport \"../../../layouts/ha-app-layout\";\nimport \"../../../components/ha-paper-icon-button-arrow-prev\";\n\nimport Script from \"../js/script\";\nimport unmountPreact from \"../../../common/preact/unmount\";\n\nimport computeObjectId from \"../../../common/entity/compute_object_id\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport NavigateMixin from \"../../../mixins/navigate-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nimport { computeRTL } from \"../../../common/util/compute_rtl\";\nimport { deleteScript } from \"../../../data/script\";\n\nfunction ScriptEditor(mountEl, props, mergeEl) {\n  return render(h(Script, props), mountEl, mergeEl);\n}\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n */\nclass HaScriptEditor extends LocalizeMixin(NavigateMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"ha-style\">\n        .errors {\n          padding: 20px;\n          font-weight: bold;\n          color: var(--google-red-500);\n        }\n        .content {\n          padding-bottom: 20px;\n        }\n        .triggers,\n        .script {\n          margin-top: -16px;\n        }\n        .triggers ha-card,\n        .script ha-card {\n          margin-top: 16px;\n        }\n        .add-card mwc-button {\n          display: block;\n          text-align: center;\n        }\n        .card-menu {\n          position: absolute;\n          top: 0;\n          right: 0;\n          z-index: 1;\n          color: var(--primary-text-color);\n        }\n        .card-menu paper-item {\n          cursor: pointer;\n        }\n        span[slot=\"introduction\"] a {\n          color: var(--primary-color);\n        }\n        paper-fab {\n          position: fixed;\n          bottom: 16px;\n          right: 16px;\n          z-index: 1;\n          margin-bottom: -80px;\n          transition: margin-bottom 0.3s;\n        }\n\n        paper-fab[is-wide] {\n          bottom: 24px;\n          right: 24px;\n        }\n\n        paper-fab[dirty] {\n          margin-bottom: 0;\n        }\n\n        paper-fab[rtl] {\n          right: auto;\n          left: 16px;\n        }\n\n        paper-fab[rtl][is-wide] {\n          bottom: 24px;\n          right: auto;\n          left: 24px;\n        }\n      </style>\n      <ha-app-layout has-scrolling-region=\"\">\n        <app-header slot=\"header\" fixed=\"\">\n          <app-toolbar>\n            <ha-paper-icon-button-arrow-prev\n              on-click=\"backTapped\"\n            ></ha-paper-icon-button-arrow-prev>\n            <div main-title>Script [[computeName(script)]]</div>\n            <template is=\"dom-if\" if=\"[[!creatingNew]]\">\n              <paper-icon-button\n                icon=\"hass:delete\"\n                on-click=\"_delete\"\n              ></paper-icon-button>\n            </template>\n          </app-toolbar>\n        </app-header>\n        <div class=\"content\">\n          <template is=\"dom-if\" if=\"[[errors]]\">\n            <div class=\"errors\">[[errors]]</div>\n          </template>\n          <div id=\"root\"></div>\n        </div>\n        <paper-fab\n          slot=\"fab\"\n          is-wide$=\"[[isWide]]\"\n          dirty$=\"[[dirty]]\"\n          icon=\"hass:content-save\"\n          title=\"Save\"\n          on-click=\"saveScript\"\n          rtl$=\"[[rtl]]\"\n        ></paper-fab>\n      </ha-app-layout>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      errors: {\n        type: Object,\n        value: null,\n      },\n\n      dirty: {\n        type: Boolean,\n        value: false,\n      },\n\n      config: {\n        type: Object,\n        value: null,\n      },\n\n      script: {\n        type: Object,\n        observer: \"scriptChanged\",\n      },\n\n      creatingNew: {\n        type: Boolean,\n        observer: \"creatingNewChanged\",\n      },\n\n      isWide: {\n        type: Boolean,\n        observer: \"_updateComponent\",\n      },\n\n      _rendered: {\n        type: Object,\n        value: null,\n      },\n\n      _renderScheduled: {\n        type: Boolean,\n        value: false,\n      },\n\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  ready() {\n    this.configChanged = this.configChanged.bind(this);\n    super.ready(); // This call will initialize preact.\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._rendered) {\n      unmountPreact(this._rendered);\n      this._rendered = null;\n    }\n  }\n\n  configChanged(config) {\n    // onChange gets called a lot during initial rendering causing recursing calls.\n    if (this._rendered === null) return;\n    this.config = config;\n    this.errors = null;\n    this.dirty = true;\n    this._updateComponent();\n  }\n\n  scriptChanged(newVal, oldVal) {\n    if (!newVal) return;\n    if (!this.hass) {\n      setTimeout(() => this.scriptChanged(newVal, oldVal), 0);\n      return;\n    }\n    if (oldVal && oldVal.entity_id === newVal.entity_id) {\n      return;\n    }\n    this.hass\n      .callApi(\n        \"get\",\n        \"config/script/config/\" + computeObjectId(newVal.entity_id)\n      )\n      .then(\n        (config) => {\n          // Normalize data: ensure sequence is a list\n          // Happens when people copy paste their scripts into the config\n          var value = config.sequence;\n          if (value && !Array.isArray(value)) {\n            config.sequence = [value];\n          }\n\n          this.dirty = false;\n          this.config = config;\n          this._updateComponent();\n        },\n        () => {\n          alert(\"Only scripts inside scripts.yaml are editable.\");\n          history.back();\n        }\n      );\n  }\n\n  creatingNewChanged(newVal) {\n    if (!newVal) {\n      return;\n    }\n    this.dirty = false;\n    this.config = {\n      alias: \"New Script\",\n      sequence: [{ service: \"\", data: {} }],\n    };\n    this._updateComponent();\n  }\n\n  backTapped() {\n    if (\n      this.dirty &&\n      // eslint-disable-next-line\n      !confirm(\"You have unsaved changes. Are you sure you want to leave?\")\n    ) {\n      return;\n    }\n    history.back();\n  }\n\n  _updateComponent() {\n    if (this._renderScheduled || !this.hass || !this.config) return;\n    this._renderScheduled = true;\n    Promise.resolve().then(() => {\n      this._rendered = ScriptEditor(\n        this.$.root,\n        {\n          script: this.config,\n          onChange: this.configChanged,\n          isWide: this.isWide,\n          hass: this.hass,\n          localize: this.localize,\n        },\n        this._rendered\n      );\n      this._renderScheduled = false;\n    });\n  }\n\n  async _delete() {\n    if (!confirm(\"Are you sure you want to delete this script?\")) {\n      return;\n    }\n    await deleteScript(this.hass, computeObjectId(this.script.entity_id));\n    history.back();\n  }\n\n  saveScript() {\n    var id = this.creatingNew\n      ? \"\" + Date.now()\n      : computeObjectId(this.script.entity_id);\n    this.hass.callApi(\"post\", \"config/script/config/\" + id, this.config).then(\n      () => {\n        this.dirty = false;\n\n        if (this.creatingNew) {\n          this.navigate(`/config/script/edit/${id}`, true);\n        }\n      },\n      (errors) => {\n        this.errors = errors.body.message;\n        throw errors;\n      }\n    );\n  }\n\n  computeName(script) {\n    return script && computeStateName(script);\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\n\ncustomElements.define(\"ha-script-editor\", HaScriptEditor);\n","import {\n  LitElement,\n  html,\n  CSSResultArray,\n  css,\n  TemplateResult,\n  property,\n  customElement,\n} from \"lit-element\";\nimport \"@polymer/paper-fab/paper-fab\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\nimport \"../../../layouts/hass-subpage\";\n\nimport { computeRTL } from \"../../../common/util/compute_rtl\";\n\nimport \"../../../components/ha-card\";\n\nimport \"../ha-config-section\";\n\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport { haStyle } from \"../../../resources/styles\";\nimport { HomeAssistant } from \"../../../types\";\nimport { triggerScript } from \"../../../data/script\";\nimport { showToast } from \"../../../util/toast\";\n\n@customElement(\"ha-script-picker\")\nclass HaScriptPicker extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() public scripts!: HassEntity[];\n  @property() public isWide!: boolean;\n\n  protected render(): TemplateResult | void {\n    return html`\n      <hass-subpage\n        .header=${this.hass.localize(\"ui.panel.config.script.caption\")}\n      >\n        <ha-config-section .isWide=${this.isWide}>\n          <div slot=\"header\">Script Editor</div>\n          <div slot=\"introduction\">\n            The script editor allows you to create and edit scripts. Please read\n            <a\n              href=\"https://home-assistant.io/docs/scripts/editor/\"\n              target=\"_blank\"\n              >the instructions</a\n            >\n            to make sure that you have configured JAVIS Home correctly.\n          </div>\n\n          <ha-card header=\"Pick script to edit\">\n            ${this.scripts.length === 0\n              ? html`\n                  <div class=\"card-content\">\n                    <p>We couldn't find any scripts.</p>\n                  </div>\n                `\n              : this.scripts.map(\n                  (script) => html`\n                    <div class=\"script\">\n                      <paper-icon-button\n                        .script=${script}\n                        icon=\"hass:play\"\n                        @click=${this._runScript}\n                      ></paper-icon-button>\n                      <paper-item-body>\n                        <div>${computeStateName(script)}</div>\n                      </paper-item-body>\n                      <div class=\"actions\">\n                        <a href=${`/config/script/edit/${script.entity_id}`}>\n                          <paper-icon-button\n                            icon=\"hass:pencil\"\n                          ></paper-icon-button>\n                        </a>\n                      </div>\n                    </div>\n                  `\n                )}\n          </ha-card>\n        </ha-config-section>\n\n        <a href=\"/config/script/new\">\n          <paper-fab\n            slot=\"fab\"\n            ?is-wide=${this.isWide}\n            icon=\"hass:plus\"\n            title=\"Add Script\"\n            ?rtl=${computeRTL(this.hass)}\n          ></paper-fab>\n        </a>\n      </hass-subpage>\n    `;\n  }\n\n  private async _runScript(ev) {\n    const script = ev.currentTarget.script as HassEntity;\n    await triggerScript(this.hass, script.entity_id);\n    showToast(this, {\n      message: `Triggered ${computeStateName(script)}`,\n    });\n  }\n\n  static get styles(): CSSResultArray {\n    return [\n      haStyle,\n      css`\n        :host {\n          display: block;\n        }\n\n        ha-card {\n          padding-bottom: 8px;\n          margin-bottom: 56px;\n        }\n\n        .script {\n          display: flex;\n          flex-direction: horizontal;\n          align-items: center;\n          padding: 0 8px;\n          margin: 4px 0;\n        }\n\n        .script > *:first-child {\n          margin-right: 8px;\n        }\n\n        .script a[href],\n        paper-icon-button {\n          color: var(--primary-text-color);\n        }\n\n        .actions {\n          display: flex;\n        }\n\n        paper-fab {\n          position: fixed;\n          bottom: 16px;\n          right: 16px;\n          z-index: 1;\n        }\n\n        paper-fab[is-wide] {\n          bottom: 24px;\n          right: 24px;\n        }\n\n        paper-fab[rtl] {\n          right: auto;\n          left: 16px;\n        }\n\n        paper-fab[rtl][is-wide] {\n          bottom: 24px;\n          right: auto;\n          left: 24px;\n        }\n\n        a {\n          color: var(--primary-color);\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-script-picker\": HaScriptPicker;\n  }\n}\n","import \"@polymer/app-route/app-route\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"./ha-script-editor\";\nimport \"./ha-script-picker\";\n\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport computeStateDomain from \"../../../common/entity/compute_state_domain\";\n\nclass HaConfigScript extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        ha-script-picker,\n        ha-script-editor {\n          height: 100%;\n        }\n      </style>\n      <app-route\n        route=\"[[route]]\"\n        pattern=\"/edit/:script\"\n        data=\"{{_routeData}}\"\n        active=\"{{_edittingScript}}\"\n      ></app-route>\n      <app-route\n        route=\"[[route]]\"\n        pattern=\"/new\"\n        active=\"{{_creatingNew}}\"\n      ></app-route>\n\n      <template is=\"dom-if\" if=\"[[!showEditor]]\">\n        <ha-script-picker\n          hass=\"[[hass]]\"\n          scripts=\"[[scripts]]\"\n          is-wide=\"[[isWide]]\"\n        ></ha-script-picker>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[showEditor]]\" restamp=\"\">\n        <ha-script-editor\n          hass=\"[[hass]]\"\n          script=\"[[script]]\"\n          is-wide=\"[[isWide]]\"\n          creating-new=\"[[_creatingNew]]\"\n        ></ha-script-editor>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      route: Object,\n      isWide: Boolean,\n      _routeData: Object,\n      _routeMatches: Boolean,\n      _creatingNew: Boolean,\n      _edittingScript: Boolean,\n\n      scripts: {\n        type: Array,\n        computed: \"computeScripts(hass)\",\n      },\n\n      script: {\n        type: Object,\n        computed: \"computeScript(scripts, _edittingScript, _routeData)\",\n      },\n\n      showEditor: {\n        type: Boolean,\n        computed: \"computeShowEditor(_edittingScript, _creatingNew)\",\n      },\n    };\n  }\n\n  computeScript(scripts, edittingAddon, routeData) {\n    if (!scripts || !edittingAddon) {\n      return null;\n    }\n    for (var i = 0; i < scripts.length; i++) {\n      if (scripts[i].entity_id === routeData.script) {\n        return scripts[i];\n      }\n    }\n    return null;\n  }\n\n  computeScripts(hass) {\n    var scripts = [];\n\n    Object.keys(hass.states).forEach(function(key) {\n      var entity = hass.states[key];\n\n      if (computeStateDomain(entity) === \"script\") {\n        scripts.push(entity);\n      }\n    });\n\n    return scripts.sort(function entitySortBy(entityA, entityB) {\n      var nameA = computeStateName(entityA);\n      var nameB = computeStateName(entityB);\n\n      if (nameA < nameB) {\n        return -1;\n      }\n      if (nameA > nameB) {\n        return 1;\n      }\n      return 0;\n    });\n  }\n\n  computeShowEditor(_edittingScript, _creatingNew) {\n    return _creatingNew || _edittingScript;\n  }\n}\n\ncustomElements.define(\"ha-config-script\", HaConfigScript);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-input/iron-input.js';\nimport './paper-input-char-counter.js';\nimport './paper-input-container.js';\nimport './paper-input-error.js';\n\nimport {IronFormElementBehavior} from '@polymer/iron-form-element-behavior/iron-form-element-behavior.js';\nimport {DomModule} from '@polymer/polymer/lib/elements/dom-module.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\nimport {PaperInputBehavior} from './paper-input-behavior.js';\n\n/**\nMaterial design: [Text\nfields](https://www.google.com/design/spec/components/text-fields.html)\n\n`<paper-input>` is a single-line text field with Material Design styling.\n\n    <paper-input label=\"Input label\"></paper-input>\n\nIt may include an optional error message or character counter.\n\n    <paper-input error-message=\"Invalid input!\" label=\"Input\n    label\"></paper-input> <paper-input char-counter label=\"Input\n    label\"></paper-input>\n\nIt can also include custom prefix or suffix elements, which are displayed\nbefore or after the text input itself. In order for an element to be\nconsidered as a prefix, it must have the `prefix` attribute (and similarly\nfor `suffix`).\n\n    <paper-input label=\"total\">\n      <div prefix>$</div>\n      <paper-icon-button slot=\"suffix\" icon=\"clear\"></paper-icon-button>\n    </paper-input>\n\nA `paper-input` can use the native `type=search` or `type=file` features.\nHowever, since we can't control the native styling of the input (search icon,\nfile button, date placeholder, etc.), in these cases the label will be\nautomatically floated. The `placeholder` attribute can still be used for\nadditional informational text.\n\n    <paper-input label=\"search!\" type=\"search\"\n        placeholder=\"search for cats\" autosave=\"test\" results=\"5\">\n    </paper-input>\n\nSee `Polymer.PaperInputBehavior` for more API docs.\n\n### Focus\n\nTo focus a paper-input, you can call the native `focus()` method as long as the\npaper input has a tab index. Similarly, `blur()` will blur the element.\n\n### Styling\n\nSee `Polymer.PaperInputContainer` for a list of custom properties used to\nstyle this element.\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-input-container-ms-clear` | Mixin applied to the Internet Explorer reveal button (the eyeball) | {}\n\n@group Paper Elements\n@element paper-input\n@hero hero.svg\n@demo demo/index.html\n*/\nPolymer({\n  is: 'paper-input',\n\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n\n      :host([focused]) {\n        outline: none;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      input {\n        /* Firefox sets a min-width on the input, which can cause layout issues */\n        min-width: 0;\n      }\n\n      /* In 1.x, the <input> is distributed to paper-input-container, which styles it.\n      In 2.x the <iron-input> is distributed to paper-input-container, which styles\n      it, but in order for this to work correctly, we need to reset some\n      of the native input's properties to inherit (from the iron-input) */\n      iron-input > input {\n        @apply --paper-input-container-shared-input-style;\n        font-family: inherit;\n        font-weight: inherit;\n        font-size: inherit;\n        letter-spacing: inherit;\n        word-spacing: inherit;\n        line-height: inherit;\n        text-shadow: inherit;\n        color: inherit;\n        cursor: inherit;\n      }\n\n      input:disabled {\n        @apply --paper-input-container-input-disabled;\n      }\n\n      input::-webkit-outer-spin-button,\n      input::-webkit-inner-spin-button {\n        @apply --paper-input-container-input-webkit-spinner;\n      }\n\n      input::-webkit-clear-button {\n        @apply --paper-input-container-input-webkit-clear;\n      }\n\n      input::-webkit-calendar-picker-indicator {\n        @apply --paper-input-container-input-webkit-calendar-picker-indicator;\n      }\n\n      input::-webkit-input-placeholder {\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      input:-moz-placeholder {\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      input::-moz-placeholder {\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      input::-ms-clear {\n        @apply --paper-input-container-ms-clear;\n      }\n\n      input::-ms-reveal {\n        @apply --paper-input-container-ms-reveal;\n      }\n\n      input:-ms-input-placeholder {\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      label {\n        pointer-events: none;\n      }\n    </style>\n\n    <paper-input-container id=\"container\" no-label-float=\"[[noLabelFloat]]\" always-float-label=\"[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]\" auto-validate$=\"[[autoValidate]]\" disabled$=\"[[disabled]]\" invalid=\"[[invalid]]\">\n\n      <slot name=\"prefix\" slot=\"prefix\"></slot>\n\n      <label hidden$=\"[[!label]]\" aria-hidden=\"true\" for$=\"[[_inputId]]\" slot=\"label\">[[label]]</label>\n\n      <!-- Need to bind maxlength so that the paper-input-char-counter works correctly -->\n      <iron-input bind-value=\"{{value}}\" slot=\"input\" class=\"input-element\" id$=\"[[_inputId]]\" maxlength$=\"[[maxlength]]\" allowed-pattern=\"[[allowedPattern]]\" invalid=\"{{invalid}}\" validator=\"[[validator]]\">\n        <input aria-labelledby$=\"[[_ariaLabelledBy]]\" aria-describedby$=\"[[_ariaDescribedBy]]\" disabled$=\"[[disabled]]\" title$=\"[[title]]\" type$=\"[[type]]\" pattern$=\"[[pattern]]\" required$=\"[[required]]\" autocomplete$=\"[[autocomplete]]\" autofocus$=\"[[autofocus]]\" inputmode$=\"[[inputmode]]\" minlength$=\"[[minlength]]\" maxlength$=\"[[maxlength]]\" min$=\"[[min]]\" max$=\"[[max]]\" step$=\"[[step]]\" name$=\"[[name]]\" placeholder$=\"[[placeholder]]\" readonly$=\"[[readonly]]\" list$=\"[[list]]\" size$=\"[[size]]\" autocapitalize$=\"[[autocapitalize]]\" autocorrect$=\"[[autocorrect]]\" on-change=\"_onChange\" tabindex$=\"[[tabIndex]]\" autosave$=\"[[autosave]]\" results$=\"[[results]]\" accept$=\"[[accept]]\" multiple$=\"[[multiple]]\">\n      </iron-input>\n\n      <slot name=\"suffix\" slot=\"suffix\"></slot>\n\n      <template is=\"dom-if\" if=\"[[errorMessage]]\">\n        <paper-input-error aria-live=\"assertive\" slot=\"add-on\">[[errorMessage]]</paper-input-error>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[charCounter]]\">\n        <paper-input-char-counter slot=\"add-on\"></paper-input-char-counter>\n      </template>\n\n    </paper-input-container>\n  `,\n\n  behaviors: [PaperInputBehavior, IronFormElementBehavior],\n\n  properties: {\n    value: {\n      // Required for the correct TypeScript type-generation\n      type: String\n    }\n  },\n\n  /**\n   * Returns a reference to the focusable element. Overridden from\n   * PaperInputBehavior to correctly focus the native input.\n   *\n   * @return {!HTMLElement}\n   */\n  get _focusableElement() {\n    return this.inputElement._inputElement;\n  },\n\n  // Note: This event is only available in the 1.0 version of this element.\n  // In 2.0, the functionality of `_onIronInputReady` is done in\n  // PaperInputBehavior::attached.\n  listeners: {'iron-input-ready': '_onIronInputReady'},\n\n  _onIronInputReady: function() {\n    // Even though this is only used in the next line, save this for\n    // backwards compatibility, since the native input had this ID until 2.0.5.\n    if (!this.$.nativeInput) {\n      this.$.nativeInput = this.$$('input');\n    }\n    if (this.inputElement &&\n        this._typesThatHaveText.indexOf(this.$.nativeInput.type) !== -1) {\n      this.alwaysFloatLabel = true;\n    }\n\n    // Only validate when attached if the input already has a value.\n    if (!!this.inputElement.bindValue) {\n      this.$.container._handleValueAndAutoValidate(this.inputElement);\n    }\n  },\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\n`iron-a11y-announcer` is a singleton element that is intended to add a11y\nto features that require on-demand announcement from screen readers. In\norder to make use of the announcer, it is best to request its availability\nin the announcing element.\n\nExample:\n\n    Polymer({\n\n      is: 'x-chatty',\n\n      attached: function() {\n        // This will create the singleton element if it has not\n        // been created yet:\n        Polymer.IronA11yAnnouncer.requestAvailability();\n      }\n    });\n\nAfter the `iron-a11y-announcer` has been made available, elements can\nmake announces by firing bubbling `iron-announce` events.\n\nExample:\n\n    this.fire('iron-announce', {\n      text: 'This is an announcement!'\n    }, { bubbles: true });\n\nNote: announcements are only audible if you have a screen reader enabled.\n\n@group Iron Elements\n@demo demo/index.html\n*/\nexport const IronA11yAnnouncer = Polymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-block;\n        position: fixed;\n        clip: rect(0px,0px,0px,0px);\n      }\n    </style>\n    <div aria-live$=\"[[mode]]\">[[_text]]</div>\n`,\n\n  is: 'iron-a11y-announcer',\n\n  properties: {\n\n    /**\n     * The value of mode is used to set the `aria-live` attribute\n     * for the element that will be announced. Valid values are: `off`,\n     * `polite` and `assertive`.\n     */\n    mode: {type: String, value: 'polite'},\n\n    _text: {type: String, value: ''}\n  },\n\n  created: function() {\n    if (!IronA11yAnnouncer.instance) {\n      IronA11yAnnouncer.instance = this;\n    }\n\n    document.body.addEventListener(\n        'iron-announce', this._onIronAnnounce.bind(this));\n  },\n\n  /**\n   * Cause a text string to be announced by screen readers.\n   *\n   * @param {string} text The text that should be announced.\n   */\n  announce: function(text) {\n    this._text = '';\n    this.async(function() {\n      this._text = text;\n    }, 100);\n  },\n\n  _onIronAnnounce: function(event) {\n    if (event.detail && event.detail.text) {\n      this.announce(event.detail.text);\n    }\n  }\n});\n\nIronA11yAnnouncer.instance = null;\n\nIronA11yAnnouncer.requestAvailability = function() {\n  if (!IronA11yAnnouncer.instance) {\n    IronA11yAnnouncer.instance = document.createElement('iron-a11y-announcer');\n  }\n\n  document.body.appendChild(IronA11yAnnouncer.instance);\n};\n"],"sourceRoot":""}